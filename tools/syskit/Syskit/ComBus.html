<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Syskit::ComBus
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Syskit::ComBus";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Syskit.html" title="Syskit (module)">Syskit</a></span></span>
     &raquo; 
    <span class="title">ComBus</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Syskit::ComBus
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/syskit/data_service.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Module that represents the communication busses in the task models. It
defines the methods that are available on task instances. For methods that
are added to the task models, see ComBus::ClassExtension</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attach-instance_method" title="#attach (instance method)">#<strong>attach</strong>(task)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attaches the given task to the communication bus.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_attached_device-instance_method" title="#each_attached_device (instance method)">#<strong>each_attached_device</strong> {|device| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerates all the devices that are attached to this communication bus for
which a corresponding <span class='object_link'><a href="Component.html" title="Syskit::Component (class)">Component</a></span> instance has been attached to
self using <span class='object_link'><a href="#attach-instance_method" title="Syskit::ComBus#attach (method)">#attach</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_com_bus_device-instance_method" title="#each_com_bus_device (instance method)">#<strong>each_com_bus_device</strong> {|the| ... } &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerates the communication busses this task is a driver for.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_declared_attached_device-instance_method" title="#each_declared_attached_device (instance method)">#<strong>each_declared_attached_device</strong> {|device| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerates all the devices that are attached to the underlying
communication busses, regardless of whether a corresponding
<span class='object_link'><a href="Component.html" title="Syskit::Component (class)">Component</a></span> instance has been associated with self using <span class='object_link'><a href="#attach-instance_method" title="Syskit::ComBus#attach (method)">#attach</a></span>.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="attach-instance_method">
  
    #<strong>attach</strong>(task)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Attaches the given task to the communication bus</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/data_service.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attach'>attach</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_each_com_bus_driver_service'>each_com_bus_driver_service</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_combus_srv'>combus_srv</span><span class='op'>|</span>
        <span class='id identifier rubyid_combus_m'>combus_m</span> <span class='op'>=</span> <span class='id identifier rubyid_combus_srv'>combus_srv</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span>

        <span class='comment'># Do we have a device for this bus ?
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_combus'>combus</span> <span class='op'>=</span> <span class='id identifier rubyid_find_device_attached_to'>find_device_attached_to</span><span class='lparen'>(</span><span class='id identifier rubyid_combus_srv'>combus_srv</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_master_device'>each_master_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dev'>dev</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_attached_to?'>attached_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_combus'>combus</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_client_in_srv'>client_in_srv</span>  <span class='op'>=</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_combus_client_in_srv'>combus_client_in_srv</span>
            <span class='id identifier rubyid_client_out_srv'>client_out_srv</span> <span class='op'>=</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_combus_client_out_srv'>combus_client_out_srv</span>

            <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_combus_m'>combus_m</span><span class='period'>.</span><span class='id identifier rubyid_lazy_dispatch?'>lazy_dispatch?</span>
                <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_bus_srv'>bus_srv</span> <span class='op'>=</span> <span class='id identifier rubyid_find_data_service'>find_data_service</span><span class='lparen'>(</span><span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>combus task </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='embexpr_end'>}</span><span class='tstring_content'> was expected to have a service named </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> to connect to the device of the same name, but has none</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_bus_srv'>bus_srv</span> <span class='op'>=</span> <span class='id identifier rubyid_combus'>combus</span><span class='period'>.</span><span class='id identifier rubyid_require_dynamic_service_for_device'>require_dynamic_service_for_device</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_dev'>dev</span><span class='rparen'>)</span>
            <span class='kw'>end</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_client_to_bus?'>client_to_bus?</span>
                <span class='id identifier rubyid_client_out_srv'>client_out_srv</span><span class='period'>.</span><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_connect_to'>connect_to</span> <span class='id identifier rubyid_bus_srv'>bus_srv</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_bus_to_client?'>bus_to_client?</span>
                <span class='id identifier rubyid_bus_srv'>bus_srv</span><span class='period'>.</span><span class='id identifier rubyid_connect_to'>connect_to</span> <span class='id identifier rubyid_client_in_srv'>client_in_srv</span><span class='period'>.</span><span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_attached_device-instance_method">
  
    #<strong>each_attached_device</strong> {|device| ... } &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enumerates all the devices that are attached to this communication bus for
which a corresponding <span class='object_link'><a href="Component.html" title="Syskit::Component (class)">Syskit::Component</a></span> instance has been attached to
self using <span class='object_link'><a href="#attach-instance_method" title="Syskit::ComBus#attach (method)">#attach</a></span></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>device</span>
      
      
        <span class='type'>(<tt>DeviceInstance</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a device that is using self as a communication bus</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#each_declared_attached_device-instance_method" title="Syskit::ComBus#each_declared_attached_device (method)">#each_declared_attached_device</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/data_service.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_attached_device'>each_attached_device</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each_attached_device</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_each_declared_attached_device'>each_declared_attached_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dev'>dev</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_find_data_service'>find_data_service</span><span class='lparen'>(</span><span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
            <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_dev'>dev</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_com_bus_device-instance_method">
  
    #<strong>each_com_bus_device</strong> {|the| ... } &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Enumerates the communication busses this task is a driver for</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>the</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Robot/ComBus.html" title="Syskit::Robot::ComBus (class)">Robot::ComBus</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>communication bus device</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>void</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/data_service.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_com_bus_device'>each_com_bus_device</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each_com_bus_device</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_each_master_device'>each_master_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_device'>device</span><span class='op'>|</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_device'>device</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Robot.html" title="Syskit::Robot (module)">Robot</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Robot/ComBus.html" title="Syskit::Robot::ComBus (class)">ComBus</a></span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_declared_attached_device-instance_method">
  
    #<strong>each_declared_attached_device</strong> {|device| ... } &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enumerates all the devices that are attached to the underlying
communication busses, regardless of whether a corresponding
<span class='object_link'><a href="Component.html" title="Syskit::Component (class)">Syskit::Component</a></span> instance has been associated with self using <span class='object_link'><a href="#attach-instance_method" title="Syskit::ComBus#attach (method)">#attach</a></span></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>device</span>
      
      
        <span class='type'>(<tt>DeviceInstance</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a device that is using self as a communication bus</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#each_attached_device-instance_method" title="Syskit::ComBus#each_attached_device (method)">#each_attached_device</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/data_service.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_declared_attached_device'>each_declared_attached_device</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each_declared_attached_device</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_each_com_bus_device'>each_com_bus_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_combus'>combus</span><span class='op'>|</span>
        <span class='id identifier rubyid_combus'>combus</span><span class='period'>.</span><span class='id identifier rubyid_each_attached_device'>each_attached_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dev'>dev</span><span class='op'>|</span>
            <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_dev'>dev</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 21:50:08 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>