<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Syskit::NetworkGeneration::SystemNetworkGenerator
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Syskit::NetworkGeneration::SystemNetworkGenerator";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Syskit.html" title="Syskit (module)">Syskit</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../NetworkGeneration.html" title="Syskit::NetworkGeneration (module)">NetworkGeneration</a></span></span>
     &raquo; 
    <span class="title">SystemNetworkGenerator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Syskit::NetworkGeneration::SystemNetworkGenerator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Syskit::NetworkGeneration::SystemNetworkGenerator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>Logger::Hierarchy</dd>
  </dl>
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Logger::Hierarchy, Roby::DRoby::EventLogging</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/syskit/network_generation/system_network_generator.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Generate a plan from a set of InstanceRequirement objects</p>

<p>It generates the canonical, non-deployed, plan. It does not take care of
the adaptation of an existing plan into the generated one</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#event_logger-instance_method" title="#event_logger (instance method)">#<strong>event_logger</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute event_logger.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_solver-instance_method" title="#merge_solver (instance method)">#<strong>merge_solver</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute merge_solver.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#plan-instance_method" title="#plan (instance method)">#<strong>plan</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute plan.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_abstract_composition_optional_children-class_method" title="remove_abstract_composition_optional_children (class method)">.<strong>remove_abstract_composition_optional_children</strong>(plan)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify_device_allocation-class_method" title="verify_device_allocation (class method)">.<strong>verify_device_allocation</strong>(plan)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verifies that all tasks that are device drivers have at least one device
attached, and that the same device is not attached to more than one task in
the plan.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify_no_multiplexing_connections-class_method" title="verify_no_multiplexing_connections (class method)">.<strong>verify_no_multiplexing_connections</strong>(plan)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verifies that there are no multiple output - single input connections
towards ports that are not multiplexing ports.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify_task_allocation-class_method" title="verify_task_allocation (class method)">.<strong>verify_task_allocation</strong>(plan)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verifies that the task allocation is complete.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allocate_devices-instance_method" title="#allocate_devices (instance method)">#<strong>allocate_devices</strong>(task)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Try to autoallocate the devices in <code>task</code> based on the
information in the instance requirements in the task&#39;s hierarchy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compute_system_network-instance_method" title="#compute_system_network (instance method)">#<strong>compute_system_network</strong>(instance_requirements, garbage_collect: true, validate_abstract_network: true, validate_generated_network: true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Compute in #plan the network needed to fullfill the requirements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_selected_device_in_hierarchy-instance_method" title="#find_selected_device_in_hierarchy (instance method)">#<strong>find_selected_device_in_hierarchy</strong>(argument_name, leaf_task, requirements)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-instance_method" title="#generate (instance method)">#<strong>generate</strong>(instance_requirements, garbage_collect: true, validate_abstract_network: true, validate_generated_network: true)  &#x21d2; Hash&lt;Syskit::Component=&gt;Array&lt;InstanceRequirements&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generate the network in the plan.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(plan, event_logger: plan.event_logger, merge_solver: MergeSolver.new(plan))  &#x21d2; SystemNetworkGenerator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of SystemNetworkGenerator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instanciate-instance_method" title="#instanciate (instance method)">#<strong>instanciate</strong>(instance_requirements)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create on <span class='object_link'><a href="#plan-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#plan (method)">#plan</a></span> the task instances that are currently required in
#real_plan.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link_to_busses-instance_method" title="#link_to_busses (instance method)">#<strong>link_to_busses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates communication busses and links the tasks to them.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_abstract_network-instance_method" title="#validate_abstract_network (instance method)">#<strong>validate_abstract_network</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Validates the network generated by <span class='object_link'><a href="#compute_system_network-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#compute_system_network (method)">#compute_system_network</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_generated_network-instance_method" title="#validate_generated_network (instance method)">#<strong>validate_generated_network</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Validates the network generated by <span class='object_link'><a href="#compute_system_network-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#compute_system_network (method)">#compute_system_network</a></span>.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(plan, event_logger: plan.event_logger, merge_solver: MergeSolver.new(plan))  &#x21d2; <tt><span class='object_link'><a href="" title="Syskit::NetworkGeneration::SystemNetworkGenerator (class)">SystemNetworkGenerator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of SystemNetworkGenerator</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='comma'>,</span>
               <span class='label'>event_logger:</span> <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_event_logger'>event_logger</span><span class='comma'>,</span>
               <span class='label'>merge_solver:</span> <span class='const'><span class='object_link'><a href="MergeSolver.html" title="Syskit::NetworkGeneration::MergeSolver (class)">MergeSolver</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MergeSolver.html#initialize-instance_method" title="Syskit::NetworkGeneration::MergeSolver#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_merge_solver'>merge_solver</span><span class='period'>.</span><span class='id identifier rubyid_plan'>plan</span> <span class='op'>!=</span> <span class='id identifier rubyid_plan'>plan</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gave </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_merge_solver'>merge_solver</span><span class='embexpr_end'>}</span><span class='tstring_content'> as merge solver, which applies on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_merge_solver'>merge_solver</span><span class='period'>.</span><span class='id identifier rubyid_plan'>plan</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Was expecting </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_plan'>plan</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='ivar'>@plan</span> <span class='op'>=</span> <span class='id identifier rubyid_plan'>plan</span>
    <span class='ivar'>@event_logger</span> <span class='op'>=</span> <span class='id identifier rubyid_event_logger'>event_logger</span>
    <span class='ivar'>@merge_solver</span> <span class='op'>=</span> <span class='id identifier rubyid_merge_solver'>merge_solver</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="event_logger-instance_method">
  
    #<strong>event_logger</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute event_logger</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_event_logger'>event_logger</span>
  <span class='ivar'>@event_logger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="merge_solver-instance_method">
  
    #<strong>merge_solver</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute merge_solver</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_merge_solver'>merge_solver</span>
  <span class='ivar'>@merge_solver</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="plan-instance_method">
  
    #<strong>plan</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute plan</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plan'>plan</span>
  <span class='ivar'>@plan</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="remove_abstract_composition_optional_children-class_method">
  
    .<strong>remove_abstract_composition_optional_children</strong>(plan)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 154</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_remove_abstract_composition_optional_children'>remove_abstract_composition_optional_children</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='comment'># Now remove the optional, non-resolved children of compositions
</span>    <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Syskit.html#AbstractComponent-constant" title="Syskit::AbstractComponent (constant)">AbstractComponent</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_abstract'>abstract</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_parent_tasks'>parent_tasks</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_parent_task'>each_parent_task</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
        <span class='id identifier rubyid_parent_tasks'>parent_tasks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_parent_task'>parent_task</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Syskit.html" title="Syskit (module)">Syskit</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Composition.html" title="Syskit::Composition (class)">Composition</a></span></span><span class='rparen'>)</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_abstract?'>abstract?</span>

            <span class='id identifier rubyid_roles'>roles</span> <span class='op'>=</span> <span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_roles_of'>roles_of</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
            <span class='id identifier rubyid_remaining_roles'>remaining_roles</span> <span class='op'>=</span> <span class='id identifier rubyid_roles'>roles</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child_role'>child_role</span><span class='op'>|</span>
                <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_child_model'>child_model</span> <span class='op'>=</span> <span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_find_child'>find_child</span><span class='lparen'>(</span><span class='id identifier rubyid_child_role'>child_role</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_child_model'>child_model</span><span class='period'>.</span><span class='id identifier rubyid_optional?'>optional?</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_remaining_roles'>remaining_roles</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_remove_child'>remove_child</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_parent_task'>parent_task</span><span class='period'>.</span><span class='id identifier rubyid_remove_roles'>remove_roles</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='op'>*</span><span class='lparen'>(</span><span class='id identifier rubyid_roles'>roles</span> <span class='op'>-</span> <span class='id identifier rubyid_remaining_roles'>remaining_roles</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verify_device_allocation-class_method">
  
    .<strong>verify_device_allocation</strong>(plan)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Verifies that all tasks that are device drivers have at least one device
attached, and that the same device is not attached to more than one task in
the plan</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plan</span>
      
      
        <span class='type'>(<tt>Roby::Plan</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the plan on which we are working</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../DeviceAllocationFailed.html" title="Syskit::DeviceAllocationFailed (class)">DeviceAllocationFailed</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if some device drivers are not attached to any device</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../SpecError.html" title="Syskit::SpecError (class)">SpecError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if some devices are assigned to more than one task</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 289</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_verify_device_allocation'>verify_device_allocation</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_components'>components</span> <span class='op'>=</span> <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Syskit.html" title="Syskit (module)">Syskit</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Device.html" title="Syskit::Device (module)">Device</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

    <span class='comment'># Check that all devices are properly assigned
</span>    <span class='id identifier rubyid_missing_devices'>missing_devices</span> <span class='op'>=</span> <span class='id identifier rubyid_components'>components</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
        <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_each_master_driver_service'>each_master_driver_service</span><span class='period'>.</span>
            <span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_srv'>srv</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_find_device_attached_to'>find_device_attached_to</span><span class='lparen'>(</span><span class='id identifier rubyid_srv'>srv</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_missing_devices'>missing_devices</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../DeviceAllocationFailed.html" title="Syskit::DeviceAllocationFailed (class)">DeviceAllocationFailed</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../DeviceAllocationFailed.html#initialize-instance_method" title="Syskit::DeviceAllocationFailed#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='comma'>,</span> <span class='id identifier rubyid_missing_devices'>missing_devices</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not allocate devices for the following tasks: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_missing_devices'>missing_devices</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_devices'>devices</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_components'>components</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_master_device'>each_master_device</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_dev'>dev</span><span class='op'>|</span>
            <span class='id identifier rubyid_device_name'>device_name</span> <span class='op'>=</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_old_task'>old_task</span> <span class='op'>=</span> <span class='id identifier rubyid_devices'>devices</span><span class='lbracket'>[</span><span class='id identifier rubyid_device_name'>device_name</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ConflictingDeviceAllocation.html" title="Syskit::ConflictingDeviceAllocation (class)">ConflictingDeviceAllocation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../ConflictingDeviceAllocation.html#initialize-instance_method" title="Syskit::ConflictingDeviceAllocation#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_dev'>dev</span><span class='comma'>,</span> <span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_old_task'>old_task</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_devices'>devices</span><span class='lbracket'>[</span><span class='id identifier rubyid_device_name'>device_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verify_no_multiplexing_connections-class_method">
  
    .<strong>verify_no_multiplexing_connections</strong>(plan)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Verifies that there are no multiple output - single input connections
towards ports that are not multiplexing ports</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plan</span>
      
      
        <span class='type'>(<tt>Roby::Plan</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the plan on which we are working</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../SpecError.html" title="Syskit::SpecError (class)">SpecError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if some abstract tasks are still in the plan</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 262</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_verify_no_multiplexing_connections'>verify_no_multiplexing_connections</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_task_contexts'>task_contexts</span> <span class='op'>=</span> <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../TaskContext.html" title="Syskit::TaskContext (class)">TaskContext</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
    <span class='id identifier rubyid_task_contexts'>task_contexts</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_seen'>seen</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_concrete_input_connection'>each_concrete_input_connection</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_source_task'>source_task</span><span class='comma'>,</span> <span class='id identifier rubyid_source_port'>source_port</span><span class='comma'>,</span> <span class='id identifier rubyid_sink_port'>sink_port</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_port_model'>port_model</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_find_input_port'>find_input_port</span><span class='lparen'>(</span><span class='id identifier rubyid_sink_port'>sink_port</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_port_model'>port_model</span><span class='period'>.</span><span class='id identifier rubyid_multiplexes?'>multiplexes?</span>
                <span class='kw'>next</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_sink_port'>sink_port</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_seen_task'>seen_task</span><span class='comma'>,</span> <span class='id identifier rubyid_seen_port'>seen_port</span> <span class='op'>=</span> <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_sink_port'>sink_port</span><span class='rbracket'>]</span>
                <span class='kw'>if</span> <span class='lbracket'>[</span><span class='id identifier rubyid_source_task'>source_task</span><span class='comma'>,</span> <span class='id identifier rubyid_source_port'>source_port</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_seen_task'>seen_task</span><span class='comma'>,</span> <span class='id identifier rubyid_seen_port'>seen_port</span><span class='rbracket'>]</span>
                    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../SpecError.html" title="Syskit::SpecError (class)">SpecError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_task'>task</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sink_port'>sink_port</span><span class='embexpr_end'>}</span><span class='tstring_content'> is connected multiple times, at least to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source_task'>source_task</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source_port'>source_port</span><span class='embexpr_end'>}</span><span class='tstring_content'> and </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_seen_task'>seen_task</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_seen_port'>seen_port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_seen'>seen</span><span class='lbracket'>[</span><span class='id identifier rubyid_sink_port'>sink_port</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_source_task'>source_task</span><span class='comma'>,</span> <span class='id identifier rubyid_source_port'>source_port</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verify_task_allocation-class_method">
  
    .<strong>verify_task_allocation</strong>(plan)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Verifies that the task allocation is complete</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>plan</span>
      
      
        <span class='type'>(<tt>Roby::Plan</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the plan on which we are working</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../TaskAllocationFailed.html" title="Syskit::TaskAllocationFailed (class)">TaskAllocationFailed</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if some abstract tasks are still in the plan</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 247</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_verify_task_allocation'>verify_task_allocation</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_components'>components</span> <span class='op'>=</span> <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Syskit.html#AbstractComponent-constant" title="Syskit::AbstractComponent (constant)">AbstractComponent</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_still_abstract'>still_abstract</span> <span class='op'>=</span> <span class='id identifier rubyid_components'>components</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:abstract?</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_still_abstract'>still_abstract</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../TaskAllocationFailed.html" title="Syskit::TaskAllocationFailed (class)">TaskAllocationFailed</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../TaskAllocationFailed.html#initialize-instance_method" title="Syskit::TaskAllocationFailed#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_still_abstract'>still_abstract</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not find implementation for the following abstract tasks: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_still_abstract'>still_abstract</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="allocate_devices-instance_method">
  
    #<strong>allocate_devices</strong>(task)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Try to autoallocate the devices in <code>task</code> based on the
information in the instance requirements in the task&#39;s hierarchy</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allocate_devices'>allocate_devices</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>allocating devices on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_task'>task</span><span class='embexpr_end'>}</span><span class='tstring_content'> using</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_each_master_driver_service'>each_master_driver_service</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_srv'>srv</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_find_device_attached_to'>find_device_attached_to</span><span class='lparen'>(</span><span class='id identifier rubyid_srv'>srv</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_dev'>dev</span> <span class='op'>=</span> <span class='id identifier rubyid_find_selected_device_in_hierarchy'>find_selected_device_in_hierarchy</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_srv'>srv</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_dev</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_srv'>srv</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_to_instance_requirements'>to_instance_requirements</span><span class='rparen'>)</span>
            <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
                <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  selected </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dev'>dev</span><span class='embexpr_end'>}</span><span class='tstring_content'> for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_srv'>srv</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='lbracket'>[</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_srv'>srv</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_dev</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_dev'>dev</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compute_system_network-instance_method">
  
    #<strong>compute_system_network</strong>(instance_requirements, garbage_collect: true, validate_abstract_network: true, validate_generated_network: true)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Compute in #plan the network needed to fullfill the requirements</p>

<p>This network is neither validated nor tied to actual deployments</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compute_system_network'>compute_system_network</span><span class='lparen'>(</span><span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='comma'>,</span> <span class='label'>garbage_collect:</span> <span class='kw'>true</span><span class='comma'>,</span>
                           <span class='label'>validate_abstract_network:</span> <span class='kw'>true</span><span class='comma'>,</span>
                           <span class='label'>validate_generated_network:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_toplevel_tasks'>toplevel_tasks</span> <span class='op'>=</span> <span class='id identifier rubyid_log_timepoint_group'>log_timepoint_group</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>instanciate</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_instanciate'>instanciate</span><span class='lparen'>(</span><span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_merge_solver'>merge_solver</span><span class='period'>.</span><span class='id identifier rubyid_merge_identical_tasks'>merge_identical_tasks</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>merge</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instanciated_network_postprocessing'><span class='object_link'><a href="Engine.html#instanciated_network_postprocessing-class_method" title="Syskit::NetworkGeneration::Engine.instanciated_network_postprocessing (method)">instanciated_network_postprocessing</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>postprocessing:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_block'>block</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_link_to_busses'>link_to_busses</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>link_to_busses</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_merge_solver'>merge_solver</span><span class='period'>.</span><span class='id identifier rubyid_merge_identical_tasks'>merge_identical_tasks</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>merge</span><span class='tstring_end'>&#39;</span></span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_remove_abstract_composition_optional_children'>remove_abstract_composition_optional_children</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>remove-optional</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># Finally, select &#39;default&#39; as configuration for all
</span>    <span class='comment'># remaining tasks that do not have a &#39;conf&#39; argument set
</span>    <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Component.html" title="Syskit::Component (class)">Component</a></span></span><span class='rparen'>)</span><span class='period'>.</span>
        <span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_freeze_delayed_arguments'>freeze_delayed_arguments</span>
        <span class='kw'>end</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>default_conf</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># Cleanup the remainder of the tasks that are of no use right
</span>    <span class='comment'># now (mostly devices)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_garbage_collect'>garbage_collect</span>
        <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_static_garbage_collect'>static_garbage_collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_obj'>obj</span><span class='op'>|</span>
            <span class='id identifier rubyid_debug'>debug</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  removing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_obj'>obj</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
            <span class='comment'># Remove tasks that we just added and are not
</span>            <span class='comment'># useful anymore
</span>            <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_remove_task'>remove_task</span><span class='lparen'>(</span><span class='id identifier rubyid_obj'>obj</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>static_garbage_collect</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='comment'># And get rid of the &#39;permanent&#39; marking we use to be able to
</span>    <span class='comment'># run static_garbage_collect
</span>    <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_each_task'>each_task</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_unmark_permanent_task'>unmark_permanent_task</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_system_network_postprocessing'><span class='object_link'><a href="Engine.html#system_network_postprocessing-class_method" title="Syskit::NetworkGeneration::Engine.system_network_postprocessing (method)">system_network_postprocessing</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>postprocessing</span><span class='tstring_end'>&#39;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_validate_abstract_network'>validate_abstract_network</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate_abstract_network'>validate_abstract_network</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>validate_abstract_network</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_validate_generated_network'>validate_generated_network</span>
        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate_generated_network'>validate_generated_network</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>validate_generated_network</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_toplevel_tasks'>toplevel_tasks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_selected_device_in_hierarchy-instance_method">
  
    #<strong>find_selected_device_in_hierarchy</strong>(argument_name, leaf_task, requirements)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_selected_device_in_hierarchy'>find_selected_device_in_hierarchy</span><span class='lparen'>(</span><span class='id identifier rubyid_argument_name'>argument_name</span><span class='comma'>,</span> <span class='id identifier rubyid_leaf_task'>leaf_task</span><span class='comma'>,</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='id identifier rubyid_leaf_task'>leaf_task</span><span class='period'>.</span><span class='id identifier rubyid_requirements'>requirements</span><span class='period'>.</span><span class='id identifier rubyid_resolved_dependency_injection'>resolved_dependency_injection</span><span class='period'>.</span><span class='id identifier rubyid_selection_for'>selection_for</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_model'>model</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dev'>dev</span> <span class='op'>=</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='lbracket'>[</span><span class='id identifier rubyid_argument_name'>argument_name</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_dev'>dev</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_devices'>devices</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
        <span class='id identifier rubyid_leaf_task'>leaf_task</span><span class='period'>.</span><span class='id identifier rubyid_each_parent_task'>each_parent_task</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_parent'>parent</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_sel'>sel</span> <span class='op'>=</span> <span class='id identifier rubyid_find_selected_device_in_hierarchy'>find_selected_device_in_hierarchy</span><span class='lparen'>(</span><span class='id identifier rubyid_argument_name'>argument_name</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_devices'>devices</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sel'>sel</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_devices'>devices</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
            <span class='kw'>return</span> <span class='id identifier rubyid_devices'>devices</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate-instance_method">
  
    #<strong>generate</strong>(instance_requirements, garbage_collect: true, validate_abstract_network: true, validate_generated_network: true)  &#x21d2; <tt>Hash&lt;<span class='object_link'><a href="../Component.html" title="Syskit::Component (class)">Syskit::Component</a></span>=&gt;Array&lt;<span class='object_link'><a href="../InstanceRequirements.html" title="Syskit::InstanceRequirements (class)">InstanceRequirements</a></span>&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generate the network in the plan</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;<span class='object_link'><a href="../Component.html" title="Syskit::Component (class)">Syskit::Component</a></span>=&gt;Array&lt;<span class='object_link'><a href="../InstanceRequirements.html" title="Syskit::InstanceRequirements (class)">InstanceRequirements</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the list of toplevel tasks mapped to the instance requirements it
represents</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='comma'>,</span>
             <span class='label'>garbage_collect:</span> <span class='kw'>true</span><span class='comma'>,</span>
             <span class='label'>validate_abstract_network:</span> <span class='kw'>true</span><span class='comma'>,</span>
             <span class='label'>validate_generated_network:</span> <span class='kw'>true</span><span class='rparen'>)</span>

    <span class='comment'># We first generate a non-deployed network that fits all
</span>    <span class='comment'># requirements.
</span>    <span class='id identifier rubyid_log_timepoint_group'>log_timepoint_group</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>compute_system_network</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
        <span class='id identifier rubyid_compute_system_network'>compute_system_network</span><span class='lparen'>(</span><span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='comma'>,</span>
                               <span class='label'>garbage_collect:</span> <span class='id identifier rubyid_garbage_collect'>garbage_collect</span><span class='comma'>,</span>
                               <span class='label'>validate_abstract_network:</span> <span class='id identifier rubyid_validate_abstract_network'>validate_abstract_network</span><span class='comma'>,</span>
                               <span class='label'>validate_generated_network:</span> <span class='id identifier rubyid_validate_generated_network'>validate_generated_network</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instanciate-instance_method">
  
    #<strong>instanciate</strong>(instance_requirements)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Create on <span class='object_link'><a href="#plan-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#plan (method)">#plan</a></span> the task instances that are currently required in
#real_plan</p>

<p>It does not try to merge the result, <span class='object_link'><a href="#plan-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#plan (method)">#plan</a></span> is probably full of
redundancies after this call</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instanciate'>instanciate</span><span class='lparen'>(</span><span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>instanciate_requirements</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_toplevel_tasks'>toplevel_tasks</span> <span class='op'>=</span> <span class='id identifier rubyid_instance_requirements'>instance_requirements</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_requirements'>requirements</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='period'>.</span><span class='id identifier rubyid_instanciate'>instanciate</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span><span class='period'>.</span>
            <span class='id identifier rubyid_to_task'>to_task</span>
        <span class='comment'># We add all these tasks as permanent tasks, to use
</span>        <span class='comment'># #static_garbage_collect to cleanup #plan.
</span>        <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_add_permanent_task'>add_permanent_task</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_fullfilled_task_m'>fullfilled_task_m</span><span class='comma'>,</span> <span class='id identifier rubyid_fullfilled_modules'>fullfilled_modules</span><span class='comma'>,</span> <span class='id identifier rubyid_fullfilled_args'>fullfilled_args</span> <span class='op'>=</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='period'>.</span><span class='id identifier rubyid_fullfilled_model'>fullfilled_model</span>
        <span class='id identifier rubyid_fullfilled_args'>fullfilled_args</span> <span class='op'>=</span> <span class='id identifier rubyid_fullfilled_args'>fullfilled_args</span><span class='period'>.</span><span class='id identifier rubyid_each_key'>each_key</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_arg_name'>arg_name</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='period'>.</span><span class='id identifier rubyid_set?'>set?</span><span class='lparen'>(</span><span class='id identifier rubyid_arg_name'>arg_name</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_arg_name'>arg_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_arguments'>arguments</span><span class='lbracket'>[</span><span class='id identifier rubyid_arg_name'>arg_name</span><span class='rbracket'>]</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_h'>h</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_fullfilled_model'>fullfilled_model</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_fullfilled_task_m'>fullfilled_task_m</span><span class='comma'>,</span> <span class='id identifier rubyid_fullfilled_modules'>fullfilled_modules</span><span class='comma'>,</span> <span class='id identifier rubyid_fullfilled_args'>fullfilled_args</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>task-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_task'>task</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_each_task'>each_task</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:each_master_driver_service</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_allocate_devices'>allocate_devices</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>device_allocation</span><span class='tstring_end'>&#39;</span></span>
    <span class='const'><span class='object_link'><a href="Engine.html" title="Syskit::NetworkGeneration::Engine (class)">Engine</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instanciation_postprocessing'><span class='object_link'><a href="Engine.html#instanciation_postprocessing-class_method" title="Syskit::NetworkGeneration::Engine.instanciation_postprocessing (method)">instanciation_postprocessing</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
        <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_log_timepoint'>log_timepoint</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>postprocessing:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_block'>block</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_toplevel_tasks'>toplevel_tasks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link_to_busses-instance_method">
  
    #<strong>link_to_busses</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates communication busses and links the tasks to them</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_link_to_busses'>link_to_busses</span>
    <span class='comment'># Get all the tasks that need at least one communication bus
</span>    <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_plan'>plan</span><span class='period'>.</span><span class='id identifier rubyid_find_local_tasks'>find_local_tasks</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Syskit.html" title="Syskit (module)">Syskit</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Device.html" title="Syskit::Device (module)">Device</a></span></span><span class='rparen'>)</span><span class='period'>.</span>
        <span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
            <span class='id identifier rubyid_required_busses'>required_busses</span> <span class='op'>=</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_each_master_device'>each_master_device</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_list'>list</span><span class='comma'>,</span> <span class='id identifier rubyid_dev'>dev</span><span class='op'>|</span>
                <span class='id identifier rubyid_list'>list</span> <span class='op'>+</span> <span class='id identifier rubyid_dev'>dev</span><span class='period'>.</span><span class='id identifier rubyid_com_busses'>com_busses</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
            <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_required_busses'>required_busses</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_required_busses'>required_busses</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_h'>h</span>
        <span class='kw'>end</span>

    <span class='id identifier rubyid_bus_tasks'>bus_tasks</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_needed_busses'>needed_busses</span><span class='op'>|</span>
        <span class='id identifier rubyid_needed_busses'>needed_busses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bus_device'>bus_device</span><span class='op'>|</span>
            <span class='id identifier rubyid_com_bus_task'>com_bus_task</span> <span class='op'>=</span> <span class='id identifier rubyid_bus_tasks'>bus_tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_bus_device'>bus_device</span><span class='rbracket'>]</span> <span class='op'>||</span>
                <span class='id identifier rubyid_bus_device'>bus_device</span><span class='period'>.</span><span class='id identifier rubyid_instanciate'>instanciate</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_bus_tasks'>bus_tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_bus_device'>bus_device</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_com_bus_task'>com_bus_task</span>

            <span class='id identifier rubyid_com_bus_task'>com_bus_task</span> <span class='op'>=</span> <span class='id identifier rubyid_com_bus_task'>com_bus_task</span><span class='period'>.</span><span class='id identifier rubyid_component'>component</span>
            <span class='id identifier rubyid_com_bus_task'>com_bus_task</span><span class='period'>.</span><span class='id identifier rubyid_attach'>attach</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_depends_on'>depends_on</span> <span class='id identifier rubyid_com_bus_task'>com_bus_task</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_should_configure_after'>should_configure_after</span> <span class='id identifier rubyid_com_bus_task'>com_bus_task</span><span class='period'>.</span><span class='id identifier rubyid_start_event'>start_event</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_abstract_network-instance_method">
  
    #<strong>validate_abstract_network</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Validates the network generated by <span class='object_link'><a href="#compute_system_network-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#compute_system_network (method)">#compute_system_network</a></span></p>

<p>It performs the tests that are only needed on an abstract network, i.e. on
a network in which some tasks are still abstract</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 319</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_abstract_network'>validate_abstract_network</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_verify_no_multiplexing_connections'>verify_no_multiplexing_connections</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='kw'>super</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_generated_network-instance_method">
  
    #<strong>validate_generated_network</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Validates the network generated by <span class='object_link'><a href="#compute_system_network-instance_method" title="Syskit::NetworkGeneration::SystemNetworkGenerator#compute_system_network (method)">#compute_system_network</a></span></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/network_generation/system_network_generator.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_generated_network'>validate_generated_network</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_verify_task_allocation'>verify_task_allocation</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_verify_device_allocation'>verify_device_allocation</span><span class='lparen'>(</span><span class='id identifier rubyid_plan'>plan</span><span class='rparen'>)</span>
    <span class='kw'>super</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 21:59:23 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>