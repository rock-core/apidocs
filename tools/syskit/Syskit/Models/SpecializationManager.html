<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Syskit::Models::SpecializationManager
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Syskit::Models::SpecializationManager";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Syskit.html" title="Syskit (module)">Syskit</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span>
     &raquo; 
    <span class="title">SpecializationManager</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Syskit::Models::SpecializationManager
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Syskit::Models::SpecializationManager</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>MetaRuby::Attributes</dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/syskit/models/specialization_manager.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Management of the specializations of a particular composition model</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="SpecializationManager/SpecializationBlockContext.html" title="Syskit::Models::SpecializationManager::SpecializationBlockContext (class)">SpecializationBlockContext</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#composition_model-instance_method" title="#composition_model (instance method)">#<strong>composition_model</strong>  &#x21d2; Model&lt;Composition&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The composition model.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_specialization_constraint-instance_method" title="#add_specialization_constraint (instance method)">#<strong>add_specialization_constraint</strong>(explicit = nil) {|spec0, spec1| ... } &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Registers a block that will be able to tell the system that two
specializations are not compatible (i.e. should never be applied at the
same time).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_default_specialization-instance_method" title="#all_default_specialization (instance method)">#<strong>all_default_specialization</strong>  &#x21d2; Array&lt;Object&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The union, along the class hierarchy, of all the values stored in
default_specialization.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compatible_specializations%3F-instance_method" title="#compatible_specializations? (instance method)">#<strong>compatible_specializations?</strong>(spec1, spec2)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the two given specializations are compatible, as given by
the registered specialization constraints.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_specialized_model-instance_method" title="#create_specialized_model (instance method)">#<strong>create_specialized_model</strong>(composite_spec, applied_specializations)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_specialization-instance_method" title="#default_specialization (instance method)">#<strong>default_specialization</strong>(child, child_model)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Declares a preferred specialization in case two specializations match that
are not related to each other.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_specializations-instance_method" title="#default_specializations (instance method)">#<strong>default_specializations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deregister-instance_method" title="#deregister (instance method)">#<strong>deregister</strong>(specialization)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deregisters the given specialization on this manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_default_specialization-instance_method" title="#each_default_specialization (instance method)">#<strong>each_default_specialization</strong>(key = nil, uniq = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_specialization-instance_method" title="#each_specialization (instance method)">#<strong>each_specialization</strong> {|CompositionSpecialization| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerates all specializations defined on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if no specializations are registered on this manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_common_specialization_subset-instance_method" title="#find_common_specialization_subset (instance method)">#<strong>find_common_specialization_subset</strong>(candidates)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Given a set of specialization sets, returns subset common to all of the
contained sets.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_default_specialization-instance_method" title="#find_default_specialization (instance method)">#<strong>find_default_specialization</strong>(key)  &#x21d2; Object<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Looks for objects registered in default_specialization under the given key,
and returns the first one in the ancestor chain (i.e. the one tha thas been
registered in the most specialized class).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_matching_specializations-instance_method" title="#find_matching_specializations (instance method)">#<strong>find_matching_specializations</strong>(selection)  &#x21d2; [CompositionSpecialization,Array&lt;CompositionSpecialization&gt;] </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Find the sets of specializations that match <code>selection</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_default_specialization%3F-instance_method" title="#has_default_specialization? (instance method)">#<strong>has_default_specialization?</strong>(key)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if an object is registered in default_specialization anywhere
in the class hierarchy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(composition_model)  &#x21d2; SpecializationManager </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of SpecializationManager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instanciate_all_possible_specializations-instance_method" title="#instanciate_all_possible_specializations (instance method)">#<strong>instanciate_all_possible_specializations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instanciated_specializations-instance_method" title="#instanciated_specializations (instance method)">#<strong>instanciated_specializations</strong>  &#x21d2; Hash{Hash{String=&gt;Model} =&gt; CompositionSpecialization} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set of specialized composition models already instantiated with
<span class='object_link'><a href="#specialized_model-instance_method" title="Syskit::Models::SpecializationManager#specialized_model (method)">#specialized_model</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matching_specialized_model-instance_method" title="#matching_specialized_model (instance method)">#<strong>matching_specialized_model</strong>(selection, options = Hash.new)  &#x21d2; Model&lt;Composition&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Looks for a single composition model that matches the given selection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_specialization_mappings-instance_method" title="#normalize_specialization_mappings (instance method)">#<strong>normalize_specialization_mappings</strong>(mappings)  &#x21d2; {String=&gt;Model&lt;Component&gt;,Model&lt;DataService&gt;} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transforms specialization specifications given to #specialize into a name
=&gt; model_set mapping.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#partition_specializations-instance_method" title="#partition_specializations (instance method)">#<strong>partition_specializations</strong>(specialization_set)  &#x21d2; [(CompositionSpecialization,Array&lt;CompositionSpecialization&gt;)] </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Partitions a set of specializations into the smallest number of partitions,
where all the specializations in a subset of the partition can be applied
together.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register-instance_method" title="#register (instance method)">#<strong>register</strong>(specialization)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Registers the given specialization on this manager.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#specializations-instance_method" title="#specializations (instance method)">#<strong>specializations</strong>  &#x21d2; {{String =&gt; Array&lt;Model&lt;DataService&gt;,Model&lt;Component&gt;&gt;}=&gt;CompositionSpecialization} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The set of specializations defined on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#specialize-instance_method" title="#specialize (instance method)">#<strong>specialize</strong>(options = Hash.new, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Specifies a modification that should be applied on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>
when select children fullfill some specific models.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#specialized_model-instance_method" title="#specialized_model (instance method)">#<strong>specialized_model</strong>(composite_spec, applied_specializations = [composite_spec])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the composition model that is a specialization of
<span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>, applying the set of specializations in
&#39;applied_specializations&#39; <code>composite_spec</code> is a
Specialization object in which all the required specializations have been
merged and <code>applied_specializations</code> the list of the
specializations, separate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_specialization_mappings-instance_method" title="#validate_specialization_mappings (instance method)">#<strong>validate_specialization_mappings</strong>(new_spec)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verifies that the child selection in <code>new_spec</code> is valid.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(composition_model)  &#x21d2; <tt><span class='object_link'><a href="" title="Syskit::Models::SpecializationManager (class)">SpecializationManager</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of SpecializationManager</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='rparen'>)</span>
    <span class='ivar'>@composition_model</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="composition_model-instance_method">
  
    #<strong>composition_model</strong>  &#x21d2; <tt>Model&lt;<span class='object_link'><a href="Composition.html" title="Syskit::Models::Composition (module)">Composition</a></span>&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The composition model</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Model&lt;<span class='object_link'><a href="Composition.html" title="Syskit::Models::Composition (module)">Composition</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
  <span class='ivar'>@composition_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_specialization_constraint-instance_method">
  
    #<strong>add_specialization_constraint</strong>(explicit = nil) {|spec0, spec1| ... } &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Registers a block that will be able to tell the system that two
specializations are not compatible (i.e. should never be applied at the
same time).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>a</span>
      
      
        <span class='type'>(<tt>#[]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>proc object given explicitly if the block form is not desired</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>spec0</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the first specialization</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>spec1</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the second specialization</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if the two specializations are compatible, and false otherwise</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_specialization_constraint'>add_specialization_constraint</span><span class='lparen'>(</span><span class='id identifier rubyid_explicit'>explicit</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_as_block'>as_block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_specialization_constraints'>specialization_constraints</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_explicit'>explicit</span> <span class='op'>||</span> <span class='id identifier rubyid_as_block'>as_block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_default_specialization-instance_method">
  
    #<strong>all_default_specialization</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The union, along the class hierarchy, of all the values stored in
default_specialization</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 12</span>

<span class='id identifier rubyid_inherited_attribute'>inherited_attribute</span><span class='lparen'>(</span><span class='symbol'>:default_specialization</span><span class='comma'>,</span> <span class='symbol'>:default_specializations</span><span class='comma'>,</span> <span class='symbol'>:map</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compatible_specializations?-instance_method">
  
    #<strong>compatible_specializations?</strong>(spec1, spec2)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the two given specializations are compatible, as given by
the registered specialization constraints</p>

<p>This method also checks that the values returned by the constraints are
symmetric</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>false if at least one specialization constraint block returns false, and
true otherwise</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../NonSymmetricSpecializationConstraint.html" title="Syskit::NonSymmetricSpecializationConstraint (class)">NonSymmetricSpecializationConstraint</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a specialization constraint does not return the same value with (spec1,
spec2) than with (spec2, spec1)</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#add_specialization_constraint-instance_method" title="Syskit::Models::SpecializationManager#add_specialization_constraint (method)">#add_specialization_constraint</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compatible_specializations?'>compatible_specializations?</span><span class='lparen'>(</span><span class='id identifier rubyid_spec1'>spec1</span><span class='comma'>,</span> <span class='id identifier rubyid_spec2'>spec2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_specialization_constraints'>specialization_constraints</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_validator'>validator</span><span class='op'>|</span>
        <span class='comment'># This is potentially expensive, but the specialization
</span>        <span class='comment'># compatibilities are done at modelling time, so that&#39;s not
</span>        <span class='comment'># an issue given the added robustness -- designing properly
</span>        <span class='comment'># symmetric constraint blocks can be a bit tricky
</span>        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_validator'>validator</span><span class='lbracket'>[</span><span class='id identifier rubyid_spec1'>spec1</span><span class='comma'>,</span> <span class='id identifier rubyid_spec2'>spec2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_sym_result'>sym_result</span> <span class='op'>=</span> <span class='id identifier rubyid_validator'>validator</span><span class='lbracket'>[</span><span class='id identifier rubyid_spec2'>spec2</span><span class='comma'>,</span> <span class='id identifier rubyid_spec1'>spec1</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>!=</span> <span class='id identifier rubyid_sym_result'>sym_result</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../NonSymmetricSpecializationConstraint.html" title="Syskit::NonSymmetricSpecializationConstraint (class)">NonSymmetricSpecializationConstraint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../NonSymmetricSpecializationConstraint.html#initialize-instance_method" title="Syskit::NonSymmetricSpecializationConstraint#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_validator'>validator</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_spec1'>spec1</span><span class='comma'>,</span> <span class='id identifier rubyid_spec2'>spec2</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_validator'>validator</span><span class='embexpr_end'>}</span><span class='tstring_content'> returned </span><span class='embexpr_beg'>#{</span><span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_result'>result</span><span class='embexpr_end'>}</span><span class='tstring_content'> on (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec1'>spec1</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec2'>spec2</span><span class='embexpr_end'>}</span><span class='tstring_content'>) and </span><span class='embexpr_beg'>#{</span><span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_sym_result'>sym_result</span><span class='embexpr_end'>}</span><span class='tstring_content'> on (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec2'>spec2</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spec1'>spec1</span><span class='embexpr_end'>}</span><span class='tstring_content'>). Specialization constraints must be symmetric</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_result'>result</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_specialized_model-instance_method">
  
    #<strong>create_specialized_model</strong>(composite_spec, applied_specializations)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 441</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_specialized_model'>create_specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='comma'>,</span> <span class='id identifier rubyid_applied_specializations'>applied_specializations</span><span class='rparen'>)</span>
    <span class='comment'># There&#39;s no composition with that spec. Create a new one
</span>    <span class='id identifier rubyid_child_composition'>child_composition</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_new_specialized_submodel'>new_specialized_submodel</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_private_model'>private_model</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_root_model'>root_model</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_root_model'>root_model</span>

    <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_applied_specializations'>applied_specializations</span> <span class='op'>=</span> <span class='id identifier rubyid_applied_specializations'>applied_specializations</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
    <span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_single_spec'>single_spec</span><span class='op'>|</span>
        <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='id identifier rubyid_single_spec'>single_spec</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child_name'>child_name</span><span class='comma'>,</span> <span class='id identifier rubyid_child_models'>child_models</span><span class='op'>|</span>
        <span class='id identifier rubyid_child_composition'>child_composition</span><span class='period'>.</span><span class='id identifier rubyid_overload'>overload</span> <span class='id identifier rubyid_child_name'>child_name</span><span class='comma'>,</span> <span class='id identifier rubyid_child_models'>child_models</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_applied_specializations'>applied_specializations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_applied_spec'>applied_spec</span><span class='op'>|</span>
        <span class='id identifier rubyid_applied_spec'>applied_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialization_blocks'>specialization_blocks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_block'>block</span><span class='op'>|</span>
            <span class='id identifier rubyid_reference_model'>reference_model</span> <span class='op'>=</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_applied_spec'>applied_spec</span> <span class='op'>==</span> <span class='id identifier rubyid_composite_spec'>composite_spec</span>
                    <span class='id identifier rubyid_child_composition'>child_composition</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_applied_spec'>applied_spec</span><span class='period'>.</span><span class='id identifier rubyid_composition_model'>composition_model</span>
                <span class='kw'>end</span>

            <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="SpecializationManager/SpecializationBlockContext.html" title="Syskit::Models::SpecializationManager::SpecializationBlockContext (class)">SpecializationBlockContext</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SpecializationManager/SpecializationBlockContext.html#initialize-instance_method" title="Syskit::Models::SpecializationManager::SpecializationBlockContext#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_child_composition'>child_composition</span><span class='comma'>,</span> <span class='id identifier rubyid_reference_model'>reference_model</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_apply_block'>apply_block</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_specialization-instance_method">
  
    #<strong>default_specialization</strong>(child, child_model)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Declares a preferred specialization in case two specializations match that
are not related to each other.</p>

<p>In the following case:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_composition'>composition</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ManualDriving</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_specialize'>specialize</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>SimpleController</span><span class='comma'>,</span> <span class='symbol'>:not</span> <span class='op'>=&gt;</span> <span class='const'>FourWheelController</span> <span class='kw'>do</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_specialize'>specialize</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>FourWheelController</span><span class='comma'>,</span> <span class='symbol'>:not</span> <span class='op'>=&gt;</span> <span class='const'>SimpleController</span> <span class='kw'>do</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>If a Control model is selected that fullfills both SimpleController and
FourWheelController, then there is an ambiguity as both specializations
apply and one cannot be preferred w.r.t. the other.</p>

<p>By using</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_default_specialization'>default_specialization</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>SimpleController</span>
</code></pre>

<p>the first one will be preferred by default. The second one can then be
selected at instanciation time with</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ManualDriving</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_controller_model'>controller_model</span><span class='period'>.</span><span class='id identifier rubyid_as'>as</span><span class='lparen'>(</span><span class='const'>FourWheelController</span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311
312
313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_specialization'>default_specialization</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='id identifier rubyid_child_model'>child_model</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>

    <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_str</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_to_str'>to_str</span>
            <span class='kw'>else</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*::</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>end</span>

    <span class='id identifier rubyid_default_specializations'>default_specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_child'>child</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_child_model'>child_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_specializations-instance_method">
  
    #<strong>default_specializations</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 12</span>

<span class='id identifier rubyid_inherited_attribute'>inherited_attribute</span><span class='lparen'>(</span><span class='symbol'>:default_specialization</span><span class='comma'>,</span> <span class='symbol'>:default_specializations</span><span class='comma'>,</span> <span class='symbol'>:map</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deregister-instance_method">
  
    #<strong>deregister</strong>(specialization)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Deregisters the given specialization on this manager</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>specialization</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the specialization to be removed</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deregister'>deregister</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization'>specialization</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_specializations'>specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_specialization'>specialization</span>
        <span class='id identifier rubyid_instanciated_specializations'>instanciated_specializations</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_deregister_submodels'>deregister_submodels</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_default_specialization-instance_method">
  
    
      <span class="overload">#<strong>each_default_specialization</strong>(key, uniq = true) {|element| ... } &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>each_default_specialization</strong>(nil, uniq = true) {|key, element| ... } &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>each_default_specialization</strong>(key, uniq = true) {|element| ... } &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Enumerates all objects registered in default_specialization under the given
key</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>element</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>element</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>each_default_specialization</strong>(nil, uniq = true) {|key, element| ... } &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    
<p>Enumerates all objects registered in default_specialization</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>key</tt>, <tt>element</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>element</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 12</span>

<span class='id identifier rubyid_inherited_attribute'>inherited_attribute</span><span class='lparen'>(</span><span class='symbol'>:default_specialization</span><span class='comma'>,</span> <span class='symbol'>:default_specializations</span><span class='comma'>,</span> <span class='symbol'>:map</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_specialization-instance_method">
  
    #<strong>each_specialization</strong> {|CompositionSpecialization| ... } &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enumerates all specializations defined on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_specialization'>each_specialization</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each_specialization</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty?-instance_method">
  
    #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if no specializations are registered on this manager</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_common_specialization_subset-instance_method">
  
    #<strong>find_common_specialization_subset</strong>(candidates)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Given a set of specialization sets, returns subset common to all of the
contained sets</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659
660
661
662
663
664
665
666
667</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 657</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_common_specialization_subset'>find_common_specialization_subset</span><span class='lparen'>(</span><span class='id identifier rubyid_candidates'>candidates</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
    <span class='id identifier rubyid_candidates'>candidates</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_subset'>subset</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>&amp;=</span> <span class='id identifier rubyid_subset'>subset</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CompositionSpecialization.html#initialize-instance_method" title="Syskit::Models::CompositionSpecialization#initialize (method)">new</a></span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span>
        <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_default_specialization-instance_method">
  
    #<strong>find_default_specialization</strong>(key)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Looks for objects registered in default_specialization under the given key,
and returns the first one in the ancestor chain (i.e. the one tha thas been
registered in the most specialized class)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the found object, or nil if none is registered under that key</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 12</span>

<span class='id identifier rubyid_inherited_attribute'>inherited_attribute</span><span class='lparen'>(</span><span class='symbol'>:default_specialization</span><span class='comma'>,</span> <span class='symbol'>:default_specializations</span><span class='comma'>,</span> <span class='symbol'>:map</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_matching_specializations-instance_method">
  
    #<strong>find_matching_specializations</strong>(selection)  &#x21d2; <tt>[<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>,Array&lt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>&gt;]</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Find the sets of specializations that match <code>selection</code></p>

<p>Further disambiguation would, for instance, have to pick one of these sets
and call</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_specialized_model'>specialized_model</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_candidates'>candidates</span><span class='lbracket'>[</span><span class='id identifier rubyid_selected_element'>selected_element</span><span class='rbracket'>]</span><span class='rparen'>)</span>
</code></pre>

<p>to get the corresponding composition model</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>[<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>,Array&lt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>&gt;]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>set of (merged_specialization,atomic_specializations) pairs, in which:</p>
<ul><li>
<p>merged_specialization is the Specialization instance representing the
desired composite specialization</p>
</li><li>
<p>atomic_specializations is the set of single specializations that have been
merged to obtain <code>merged_specialization</code></p>
</li></ul>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 560</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_matching_specializations'>find_matching_specializations</span><span class='lparen'>(</span><span class='id identifier rubyid_selection'>selection</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_selection'>selection</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CompositionSpecialization.html#initialize-instance_method" title="Syskit::Models::CompositionSpecialization#initialize (method)">new</a></span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>looking for specialization of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_selection'>selection</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
            <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_matching_specializations'>matching_specializations</span> <span class='op'>=</span> <span class='id identifier rubyid_each_specialization'>each_specialization</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec_model'>spec_model</span><span class='op'>|</span>
        <span class='id identifier rubyid_spec_model'>spec_model</span><span class='period'>.</span><span class='id identifier rubyid_weak_match?'>weak_match?</span><span class='lparen'>(</span><span class='id identifier rubyid_selection'>selection</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_matching_specializations'>matching_specializations</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> matching specializations found</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_matching_specializations'>matching_specializations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
            <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_matching_specializations'>matching_specializations</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CompositionSpecialization.html#initialize-instance_method" title="Syskit::Models::CompositionSpecialization#initialize (method)">new</a></span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='kw'>return</span> <span class='id identifier rubyid_partition_specializations'>partition_specializations</span><span class='lparen'>(</span><span class='id identifier rubyid_matching_specializations'>matching_specializations</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_default_specialization?-instance_method">
  
    #<strong>has_default_specialization?</strong>(key)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if an object is registered in default_specialization anywhere
in the class hierarchy</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 12</span>

<span class='id identifier rubyid_inherited_attribute'>inherited_attribute</span><span class='lparen'>(</span><span class='symbol'>:default_specialization</span><span class='comma'>,</span> <span class='symbol'>:default_specializations</span><span class='comma'>,</span> <span class='symbol'>:map</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instanciate_all_possible_specializations-instance_method">
  
    #<strong>instanciate_all_possible_specializations</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 319</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instanciate_all_possible_specializations'>instanciate_all_possible_specializations</span>
    <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_specializations'>partition_specializations</span><span class='lparen'>(</span><span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_done_subsets'>done_subsets</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_set'>set</span><span class='op'>|</span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subset_size'>subset_size</span><span class='op'>|</span>
            <span class='id identifier rubyid_set'>set</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_combination'>combination</span><span class='lparen'>(</span><span class='id identifier rubyid_subset_size'>subset_size</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subset'>subset</span><span class='op'>|</span>
                <span class='id identifier rubyid_subset'>subset</span> <span class='op'>=</span> <span class='id identifier rubyid_subset'>subset</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
                <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_done_subsets'>done_subsets</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_subset'>subset</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='const'>Specialization</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
                    <span class='id identifier rubyid_subset'>subset</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span> <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
                    <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_specialized_model'>specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_subset'>subset</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_done_subsets'>done_subsets</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_subset'>subset</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instanciated_specializations-instance_method">
  
    #<strong>instanciated_specializations</strong>  &#x21d2; <tt>Hash{Hash{String=&gt;Model} =&gt; <span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns set of specialized composition models already instantiated with
<span class='object_link'><a href="#specialized_model-instance_method" title="Syskit::Models::SpecializationManager#specialized_model (method)">#specialized_model</a></span>. The key is the specialization selectors and the value
the composite specialization, in which
<span class='object_link'><a href="CompositionSpecialization.html#composition_model-instance_method" title="Syskit::Models::CompositionSpecialization#composition_model (method)">CompositionSpecialization#composition_model</a></span> returns the composition model</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Hash{String=&gt;Model} =&gt; <span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>set of specialized composition models already instantiated with
<span class='object_link'><a href="#specialized_model-instance_method" title="Syskit::Models::SpecializationManager#specialized_model (method)">#specialized_model</a></span>. The key is the specialization selectors and the value
the composite specialization, in which
<span class='object_link'><a href="CompositionSpecialization.html#composition_model-instance_method" title="Syskit::Models::CompositionSpecialization#composition_model (method)">CompositionSpecialization#composition_model</a></span> returns the composition model</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349
350
351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 347</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instanciated_specializations'>instanciated_specializations</span>
    <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_root_model'>root_model</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span> <span class='op'>==</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
        <span class='kw'>return</span> <span class='lparen'>(</span><span class='ivar'>@instanciated_specializations</span> <span class='op'>||=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
    <span class='kw'>else</span> <span class='kw'>return</span> <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span><span class='period'>.</span><span class='id identifier rubyid_specializations'>specializations</span><span class='period'>.</span><span class='id identifier rubyid_instanciated_specializations'>instanciated_specializations</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="matching_specialized_model-instance_method">
  
    #<strong>matching_specialized_model</strong>(selection, options = Hash.new)  &#x21d2; <tt>Model&lt;<span class='object_link'><a href="Composition.html" title="Syskit::Models::Composition (module)">Composition</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Looks for a single composition model that matches the given selection</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>selection</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../InstanceSelection.html" title="Syskit::InstanceSelection (class)">InstanceSelection</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the current selection</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Hash.new</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">strict</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          
            &mdash; <div class='inline'>
<p>If true, an ambiguous match will make the method raise. Otherwise, the
method will return the common subset of the matching specializations.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Model&lt;<span class='object_link'><a href="Composition.html" title="Syskit::Models::Composition (module)">Composition</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the specialized model, or <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span> if no specializations match</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../AmbiguousSpecialization.html" title="Syskit::AmbiguousSpecialization (class)">AmbiguousSpecialization</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if multiple models match</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 603</span>

<span class='kw'>def</span> <span class='id identifier rubyid_matching_specialized_model'>matching_specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_selection'>selection</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'>Kernel</span><span class='period'>.</span><span class='id identifier rubyid_validate_options'>validate_options</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span>
        <span class='symbol'>:strict</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
        <span class='symbol'>:specialization_hints</span> <span class='op'>=&gt;</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='id identifier rubyid_component_selection'>component_selection</span> <span class='op'>=</span> <span class='id identifier rubyid_selection'>selection</span><span class='period'>.</span><span class='id identifier rubyid_map_value'>map_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_selected'>selected</span><span class='op'>|</span>
        <span class='id identifier rubyid_selected'>selected</span><span class='period'>.</span><span class='id identifier rubyid_selected'>selected</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_to_component_model'>to_component_model</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_find_matching_specializations'>find_matching_specializations</span><span class='lparen'>(</span><span class='id identifier rubyid_component_selection'>component_selection</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
        <span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
            <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:specialization_hints</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hint'>hint</span><span class='op'>|</span>
                <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_weak_match?'>weak_match?</span><span class='lparen'>(</span><span class='id identifier rubyid_hint'>hint</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
        <span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span>
            <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_weak_match?'>weak_match?</span><span class='lparen'>(</span><span class='id identifier rubyid_selection'>selection</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='id identifier rubyid_filtered_candidates'>filtered_candidates</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:strict</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_selection'>selection</span> <span class='op'>=</span> <span class='id identifier rubyid_selection'>selection</span><span class='period'>.</span><span class='id identifier rubyid_map_value'>map_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_sel'>sel</span><span class='op'>|</span>
                <span class='id identifier rubyid_sel'>sel</span><span class='period'>.</span><span class='id identifier rubyid_selected'>selected</span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../AmbiguousSpecialization.html" title="Syskit::AmbiguousSpecialization (class)">AmbiguousSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../AmbiguousSpecialization.html#initialize-instance_method" title="Syskit::AmbiguousSpecialization#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='comma'>,</span> <span class='id identifier rubyid_selection'>selection</span><span class='comma'>,</span> <span class='id identifier rubyid_candidates'>candidates</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_candidates'>candidates</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_find_common_specialization_subset'>find_common_specialization_subset</span><span class='lparen'>(</span><span class='id identifier rubyid_candidates'>candidates</span><span class='rparen'>)</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_specialized_model'>specialized_model</span> <span class='op'>=</span> <span class='id identifier rubyid_specialized_model'>specialized_model</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_candidates'>candidates</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_specialized_model'>specialized_model</span> <span class='op'>!=</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
            <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>using specialization </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_specialized_model'>specialized_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_specialized_model'>specialized_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_specialization_mappings-instance_method">
  
    #<strong>normalize_specialization_mappings</strong>(mappings)  &#x21d2; <tt>{String=&gt;Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;,Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Transforms specialization specifications given to #specialize into a name
=&gt; model_set mapping</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mappings</span>
      
      
        <span class='type'>(<tt>{String,Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;=&gt;Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>specialization mappings. The mapping maps an object that selects a
composition child, maps it to a model or set of models. The created
specialization will be applied only when the selected child fullfills the
models.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>{String=&gt;Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;,Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the normalized specification</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a data service type is given as child specification and none of the
children matches</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a data service type is given as child specification, but more than one
child matches this service</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_specialization_mappings'>normalize_specialization_mappings</span><span class='lparen'>(</span><span class='id identifier rubyid_mappings'>mappings</span><span class='rparen'>)</span>
    <span class='comment'># Normalize the user-provided specialization mapping
</span>    <span class='id identifier rubyid_new_spec'>new_spec</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_mappings'>mappings</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='comma'>,</span> <span class='id identifier rubyid_child_model'>child_model</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_is_model?'><span class='object_link'><a href="../Models.html#is_model%3F-class_method" title="Syskit::Models.is_model? (method)">is_model?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_children'>children</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_each_child'>each_child</span><span class='period'>.</span>
                <span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_child_definition'>child_definition</span><span class='op'>|</span> <span class='id identifier rubyid_child_definition'>child_definition</span><span class='period'>.</span><span class='id identifier rubyid_fullfills?'>fullfills?</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span>
                <span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid specialization </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_model'>child_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: no child of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> fullfills </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
                <span class='id identifier rubyid_children'>children</span> <span class='op'>=</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child_name'>child_name</span><span class='op'>|</span>
                    <span class='id identifier rubyid_child_models'>child_models</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_find_child'>find_child</span><span class='lparen'>(</span><span class='id identifier rubyid_child_name'>child_name</span><span class='rparen'>)</span><span class='period'>.</span>
                        <span class='id identifier rubyid_each_required_model'>each_required_model</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:short_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_name'>child_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_models'>child_models</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid specialization </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_model'>child_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: more than one child of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> fullfills </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>). You probably want to select one specifically by name</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
            <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_str</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid child selector </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_child_model'>child_model</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_child_model'>child_model</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_child_model'>child_model</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_is_model?'><span class='object_link'><a href="../Models.html#is_model%3F-class_method" title="Syskit::Models.is_model? (method)">is_model?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="BoundDataService.html" title="Syskit::Models::BoundDataService (class)">BoundDataService</a></span></span><span class='rparen'>)</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid specialization selector </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child'>child</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_model'>child_model</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a component model or a data service model</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_new_spec'>new_spec</span><span class='lbracket'>[</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_to_str'>to_str</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_child_model'>child_model</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_new_spec'>new_spec</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="partition_specializations-instance_method">
  
    #<strong>partition_specializations</strong>(specialization_set)  &#x21d2; <tt>[(<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>,Array&lt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>&gt;)]</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Partitions a set of specializations into the smallest number of partitions,
where all the specializations in a subset of the partition can be applied
together</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>specialization_set</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the set of specializations to be partitioned</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>[(<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>,Array&lt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>&gt;)]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the partitioned subsets, where the second element of each pair is the set
of specializations that can be applied together and the first element the
CompositionSpecialization object that is created by merging all the
specialization specifications from the second element</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partition_specializations'>partition_specializations</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization_set'>specialization_set</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_specialization_set'>specialization_set</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'># What we have to do here is:
</span>    <span class='comment'>#
</span>    <span class='comment'>#   for each S0 in specialization_set
</span>    <span class='comment'>#     for each S1 in compatibilities(S0)
</span>    <span class='comment'>#       there exists C in result which contain S0 and S1
</span>    <span class='comment'>#     end
</span>    <span class='comment'>#   end
</span>    <span class='comment'>#
</span>    <span class='comment'># We gather all the capabilities and iteratively remove the ones
</span>    <span class='comment'># for which this property is fullfilled
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_specialization_set'>specialization_set</span> <span class='op'>=</span> <span class='id identifier rubyid_specialization_set'>specialization_set</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>

    <span class='id identifier rubyid_compatibilities'>compatibilities</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_specialization_set'>specialization_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s0'>s0</span><span class='op'>|</span>
        <span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='lbracket'>[</span><span class='id identifier rubyid_s0'>s0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_s0'>s0</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span> <span class='op'>&amp;</span> <span class='id identifier rubyid_specialization_set'>specialization_set</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s0'>s0</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s0'>s0</span><span class='comma'>,</span> <span class='id identifier rubyid_remaining'>remaining</span><span class='op'>|</span>
        <span class='comment'># Iterate over the existing elements
</span>        <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_all'>all</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_s0'>s0</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_remaining'>remaining</span><span class='period'>.</span><span class='id identifier rubyid_subtract'>subtract</span><span class='lparen'>(</span><span class='id identifier rubyid_all'>all</span><span class='rparen'>)</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_compatible_with?'>compatible_with?</span><span class='lparen'>(</span><span class='id identifier rubyid_s0'>s0</span><span class='rparen'>)</span>
                <span class='comment'># not there yet and compatible, add it
</span>                <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_s0'>s0</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_all'>all</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s0'>s0</span>
                <span class='id identifier rubyid_remaining'>remaining</span><span class='period'>.</span><span class='id identifier rubyid_subtract'>subtract</span><span class='lparen'>(</span><span class='id identifier rubyid_all'>all</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='comment'># Now, add new elements for what is left
</span>        <span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>while</span> <span class='op'>!</span><span class='id identifier rubyid_remaining'>remaining</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
            <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_merged'>merged</span>
                <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CompositionSpecialization.html#initialize-instance_method" title="Syskit::Models::CompositionSpecialization#initialize (method)">new</a></span></span>
                <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_s0'>s0</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_s0'>s0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_set'>to_set</span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_remaining'>remaining</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_s1'>s1</span> <span class='op'>=</span> <span class='id identifier rubyid_remaining'>remaining</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_s0'>s0</span> <span class='op'>==</span> <span class='id identifier rubyid_s1'>s1</span> <span class='comment'># possible if the iteration on &#39;result&#39; above did not find anything
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_compatible_with?'>compatible_with?</span><span class='lparen'>(</span><span class='id identifier rubyid_s1'>s1</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_merged'>merged</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_s1'>s1</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_all'>all</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s1'>s1</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_all'>all</span><span class='rbracket'>]</span>
                <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_merged'>merged</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_merged'>merged</span><span class='comma'>,</span> <span class='id identifier rubyid_all'>all</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register-instance_method">
  
    #<strong>register</strong>(specialization)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Registers the given specialization on this manager</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>specialization</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the new specialization</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization'>specialization</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_root_name'>root_name</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_root_model'>root_model</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_specializations'>specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_specialization'>specialization</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="specializations-instance_method">
  
    #<strong>specializations</strong>  &#x21d2; <tt>{{String =&gt; Array&lt;Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;&gt;}=&gt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The set of specializations defined on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span></p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>{{String =&gt; Array&lt;Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;&gt;}=&gt;<span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span>}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 21</span>

<span class='id identifier rubyid_attribute'>attribute</span><span class='lparen'>(</span><span class='symbol'>:specializations</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='rbrace'>}</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="specialize-instance_method">
  
    #<strong>specialize</strong>(options = Hash.new, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Specifies a modification that should be applied on <span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>
when select children fullfill some specific models.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Hash.new</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>a customizable set of options</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mappings</span>
      
      
        <span class='type'>(<tt>{String,Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;=&gt;Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>specialization mappings. The mapping maps an object that selects a
composition child, maps it to a model or set of models. The created
specialization will be applied only when the selected child fullfills the
models.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">not</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If it is known that a specialization is in conflict with another, the :not
option can be used. For instance, in the following code, only two
specialization will exist: the one in which the Control child is a
SimpleController and the one in which it is a FourWheelController.</p>

<p>In the example below, if the :not option had not been used, three
specializations would have been added: the same two than above, and the one
case where &#39;Control&#39; fullfills both the SimpleController and
FourWheelController data services.</p>

<p>@example</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_specialize'>specialize</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>SimpleController</span><span class='comma'>,</span> <span class='symbol'>:not</span> <span class='op'>=&gt;</span> <span class='const'>FourWheelController</span> <span class='kw'>do</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_specialize'>specialize</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Control</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'>FourWheelController</span><span class='comma'>,</span> <span class='symbol'>:not</span> <span class='op'>=&gt;</span> <span class='const'>SimpleController</span> <span class='kw'>do</span>
<span class='kw'>end</span>
</code></pre>
</div>
          
        </li>
      
    </ul>
  
    
    

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a data service type is given as child specification and none of the
children matches</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a data service type is given as child specification, but more than one
child matches this service</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_specialize'>specialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>trying to specialize </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log_nest'>log_nest</span> <span class='int'>2</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>with</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_models'>models</span><span class='op'>|</span>
            <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> =&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_models'>models</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>

        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_mappings'>mappings</span> <span class='op'>=</span> <span class='const'>Kernel</span><span class='period'>.</span><span class='id identifier rubyid_filter_options'>filter_options</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='symbol'>:not</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:not</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_ary</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:not</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:not</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_mappings'>mappings</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_specialization_mappings'>normalize_specialization_mappings</span><span class='lparen'>(</span><span class='id identifier rubyid_mappings'>mappings</span><span class='rparen'>)</span>

    <span class='comment'># validate the mappings
</span>    <span class='id identifier rubyid_validate_specialization_mappings'>validate_specialization_mappings</span><span class='lparen'>(</span><span class='id identifier rubyid_mappings'>mappings</span><span class='rparen'>)</span>

    <span class='comment'># register it
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_specialization'>specialization</span> <span class='op'>=</span> <span class='id identifier rubyid_specializations'>specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_mappings'>mappings</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_new_specialization'>new_specialization</span> <span class='op'>=</span> <span class='id identifier rubyid_specialization'>specialization</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_new_specialization'>new_specialization</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="CompositionSpecialization.html" title="Syskit::Models::CompositionSpecialization (class)">CompositionSpecialization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="CompositionSpecialization.html#initialize-instance_method" title="Syskit::Models::CompositionSpecialization#initialize (method)">new</a></span></span>
    <span class='kw'>end</span>
    <span class='comment'># validate the block
</span>    <span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_mappings'>mappings</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_specialized_composition_model'>specialized_composition_model</span> <span class='op'>=</span>
        <span class='id identifier rubyid_create_specialized_model'>create_specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># ... and update compatibilities
</span>    <span class='comment'>#
</span>    <span class='comment'># NOTE: this code does NOT updates compatibilities based on
</span>    <span class='comment'># whether two specialization selection models are compatible as,
</span>    <span class='comment'># by definition, the system should never try to instantiate one
</span>    <span class='comment'># of these (since the models that would trigger this
</span>    <span class='comment'># instantiation cannot be represented)
</span>    <span class='id identifier rubyid_each_specialization'>each_specialization</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_spec'>spec</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_spec'>spec</span> <span class='op'>==</span> <span class='id identifier rubyid_new_specialization'>new_specialization</span> <span class='op'>||</span> <span class='id identifier rubyid_spec'>spec</span> <span class='op'>==</span> <span class='id identifier rubyid_new_specialization'>new_specialization</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_compatible_specializations?'>compatible_specializations?</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='comma'>,</span> <span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_new_specialization'>new_specialization</span>
            <span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_spec'>spec</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='period'>.</span><span class='id identifier rubyid_compatibilities'>compatibilities</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_spec'>spec</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'># and register the result
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_specialization'>specialization</span>
        <span class='id identifier rubyid_deregister'>deregister</span><span class='lparen'>(</span><span class='id identifier rubyid_specialization'>specialization</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='period'>.</span><span class='id identifier rubyid_composition_model'>composition_model</span> <span class='op'>=</span> <span class='id identifier rubyid_specialized_composition_model'>specialized_composition_model</span>
    <span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='id identifier rubyid_new_specialization'>new_specialization</span><span class='rparen'>)</span>

    <span class='comment'># Finally, we create 
</span>    <span class='id identifier rubyid_new_specialization'>new_specialization</span>

<span class='kw'>ensure</span>
    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log_nest'>log_nest</span> <span class='op'>-</span><span class='int'>2</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="specialized_model-instance_method">
  
    #<strong>specialized_model</strong>(composite_spec, applied_specializations = [composite_spec])  &#x21d2; <tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the composition model that is a specialization of
<span class='object_link'><a href="#composition_model-instance_method" title="Syskit::Models::SpecializationManager#composition_model (method)">#composition_model</a></span>, applying the set of specializations in
&#39;applied_specializations&#39; <code>composite_spec</code> is a
Specialization object in which all the required specializations have been
merged and <code>applied_specializations</code> the list of the
specializations, separate.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 361</span>

<span class='kw'>def</span> <span class='id identifier rubyid_specialized_model'>specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='comma'>,</span> <span class='id identifier rubyid_applied_specializations'>applied_specializations</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>instanciating specializations: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_applied_specializations'>applied_specializations</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log_nest'>log_nest</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_composition_model'>composition_model</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_current_model'>current_model</span> <span class='op'>=</span> <span class='id identifier rubyid_instanciated_specializations'>instanciated_specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_current_model'>current_model</span><span class='period'>.</span><span class='id identifier rubyid_composition_model'>composition_model</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span> <span class='op'>=</span> <span class='id identifier rubyid_create_specialized_model'>create_specialized_model</span><span class='lparen'>(</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='comma'>,</span> <span class='id identifier rubyid_applied_specializations'>applied_specializations</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_composition_model'>composition_model</span> <span class='op'>=</span> <span class='id identifier rubyid_child_composition'>child_composition</span>
    <span class='id identifier rubyid_instanciated_specializations'>instanciated_specializations</span><span class='lbracket'>[</span><span class='id identifier rubyid_composite_spec'>composite_spec</span><span class='period'>.</span><span class='id identifier rubyid_specialized_children'>specialized_children</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_composite_spec'>composite_spec</span>
    <span class='id identifier rubyid_child_composition'>child_composition</span>

<span class='kw'>ensure</span>
    <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='const'><span class='object_link'><a href="../Models.html" title="Syskit::Models (module)">Models</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log_nest'>log_nest</span> <span class='op'>-</span><span class='int'>2</span>
        <span class='kw'>break</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_specialization_mappings-instance_method">
  
    #<strong>validate_specialization_mappings</strong>(new_spec)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Verifies that the child selection in <code>new_spec</code> is valid</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>mappings</span>
      
      
        <span class='type'>(<tt>{String,Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;=&gt;Model&lt;<span class='object_link'><a href="../DataService.html" title="Syskit::DataService (module)">DataService</a></span>&gt;,Model&lt;<span class='object_link'><a href="Component.html" title="Syskit::Models::Component (module)">Component</a></span>&gt;}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>specialization mappings. The mapping maps an object that selects a
composition child, maps it to a model or set of models. The created
specialization will be applied only when the selected child fullfills the
models.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if the spec refers to a child that does not exist</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if the spec either selects on a model that is already provided by the
corresponding child</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../IncompatibleComponentModels.html" title="Syskit::IncompatibleComponentModels (class)">IncompatibleComponentModels</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if the new model contains a component model that is incompatible with the
current child&#39;s model</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/syskit/models/specialization_manager.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validate_specialization_mappings'>validate_specialization_mappings</span><span class='lparen'>(</span><span class='id identifier rubyid_new_spec'>new_spec</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_spec'>new_spec</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child_name'>child_name</span><span class='comma'>,</span> <span class='id identifier rubyid_child_models'>child_models</span><span class='op'>|</span>
        <span class='id identifier rubyid_child_m'>child_m</span> <span class='op'>=</span> <span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_find_child'>find_child</span><span class='lparen'>(</span><span class='id identifier rubyid_child_name'>child_name</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_child_m'>child_m</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>there is no child called </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_name'>child_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_composition_model'>composition_model</span><span class='period'>.</span><span class='id identifier rubyid_short_name'>short_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_merged'>merged</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Placeholder.html" title="Syskit::Models::Placeholder (module)">Placeholder</a></span></span><span class='period'>.</span><span class='id identifier rubyid_for'><span class='object_link'><a href="Placeholder/Creation.html#for-instance_method" title="Syskit::Models::Placeholder::Creation#for (method)">for</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_child_models'>child_models</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_child_m'>child_m</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_merged'>merged</span> <span class='op'>==</span> <span class='id identifier rubyid_child_m'>child_m</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_models'>child_models</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:short_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not specify a specialization of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_child_m'>child_m</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 21:58:07 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>