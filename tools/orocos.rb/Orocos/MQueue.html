<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Orocos::MQueue
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Orocos::MQueue";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Orocos.html" title="Orocos (module)">Orocos</a></span></span>
     &raquo; 
    <span class="title">MQueue</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Orocos::MQueue
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/orocos/mqueue.rb<span class="defines">,<br />
  ext/rorocos/rorocos.cc</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Support for the POSIX Message Queues transport in RTT</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_fallback_to_corba%3F-class_method" title="auto_fallback_to_corba? (class method)">.<strong>auto_fallback_to_corba?</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:method:auto_fallback_to_corba? :call-seq:  
Orocos::MQueue.auto_fallback_to_corba? =&gt; true or false  
Orocos::MQueue.auto_fallback_to_corba = new_value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_sizes%3F-class_method" title="auto_sizes? (class method)">.<strong>auto_sizes?</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:method:auto_sizes? :call-seq:   Orocos::MQueue.auto_sizes? =&gt; true or
false   Orocos::MQueue.auto_sizes = new_value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available%3F-class_method" title="available? (class method)">.<strong>available?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the MQ transport is available on this system (i.e. built in
RTT).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#msg_max-class_method" title="msg_max (class method)">.<strong>msg_max</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the maximum message queue size, in the number of samples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#msgsize_max-class_method" title="msgsize_max (class method)">.<strong>msgsize_max</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the maximum message size allowed in a message queue, in bytes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transportable_type_names-class_method" title="Orocos::MQueue.transportable_type_names (class method)">.<strong>Orocos::MQueue.transportable_type_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of string that are the type names which can be transported
over the MQ layer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#try_mq_open-class_method" title="try_mq_open (class method)">.<strong>try_mq_open</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid_sizes%3F-class_method" title="valid_sizes? (class method)">.<strong>valid_sizes?</strong>(buffer_size, data_size)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verifies that the given buffer size (in samples) and sample size (in bytes)
are below the limits defined in /proc.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_sizes%3F-class_method" title="validate_sizes? (class method)">.<strong>validate_sizes?</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:method:validate_sizes? :call-seq:   Orocos::MQueue.validate_sizes? =&gt;
true or false   Orocos::MQueue.validate_sizes = new_value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#warn%3F-class_method" title="warn? (class method)">.<strong>warn?</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:method:warn? :call-seq:   Orocos::MQueue.warn? =&gt; true or false  
Orocos::MQueue.warn = new_value.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto=-instance_method" title="#auto= (instance method)">#<strong>auto=</strong>(value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto%3F-instance_method" title="#auto? (instance method)">#<strong>auto?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="auto_fallback_to_corba?-class_method">
  
    .<strong>auto_fallback_to_corba?</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:method:auto_fallback_to_corba? :call-seq:</p>

<pre class="code ruby"><code class="ruby">Orocos::MQueue.auto_fallback_to_corba? =&gt; true or false
Orocos::MQueue.auto_fallback_to_corba = new_value
</code></pre>

<p>If true (the default), a failed connection that is using MQ will only
generate a warning, and a CORBA connection will be created instead.</p>

<p>While orocos.rb tries very hard to not create MQ connections if it is not
possible, it is hard to predict how much memory all existing MQueues in a
system take, which is bounded by per-user limits or even by the amount of
available kernel memory.</p>

<p>If false, an exception is generated instead.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 124</span>

<span class='id identifier rubyid_attr_predicate'>attr_predicate</span> <span class='symbol'>:auto_fallback_to_corba?</span><span class='comma'>,</span> <span class='kw'>true</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auto_sizes?-class_method">
  
    .<strong>auto_sizes?</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:method:auto_sizes? :call-seq:</p>

<pre class="code ruby"><code class="ruby">Orocos::MQueue.auto_sizes? =&gt; true or false
Orocos::MQueue.auto_sizes = new_value
</code></pre>

<p>Controls whether orocos.rb should compute the required data size for
policies where MQ is used and data_size is 0. Turning it off means that you
rely on the component developpers to call setDataSample in their components
with a sufficiently big sample.</p>

<p>See the documentation of Orocos.auto? for the constraints on MQ usage.
Setting this off and automatic MQ usage on is not robust and therefore not
recommended.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 89</span>

<span class='id identifier rubyid_attr_predicate'>attr_predicate</span> <span class='symbol'>:auto_sizes?</span><span class='comma'>,</span> <span class='kw'>true</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available?-class_method">
  
    .<strong>available?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the MQ transport is available on this system (i.e. built in
RTT)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 14</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_available?'>available?</span>
    <span class='kw'>if</span> <span class='ivar'>@available</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='ivar'>@available</span><span class='op'>=</span>
            <span class='kw'>if</span> <span class='op'>!</span><span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>RTT_TRANSPORT_MQ_ID</span><span class='rparen'>)</span>
                <span class='kw'>false</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Orocos::MQueue (module)">MQueue</a></span></span><span class='period'>.</span><span class='id identifier rubyid_try_mq_open'><span class='object_link'><a href="#try_mq_open-class_method" title="Orocos::MQueue.try_mq_open (method)">try_mq_open</a></span></span>
                <span class='const'><span class='object_link'><a href="../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the RTT is built with MQ support, but creating message queues fails with: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>false</span>
            <span class='kw'>elsif</span> <span class='const'><span class='object_link'><a href="../Orocos.html#TRANSPORT_MQ-constant" title="Orocos::TRANSPORT_MQ (constant)">TRANSPORT_MQ</a></span></span> <span class='op'>!=</span> <span class='const'>RTT_TRANSPORT_MQ_ID</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="InternalError.html" title="Orocos::InternalError (class)">InternalError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hardcoded value of TRANSPORT_MQ differs from the transport ID from RTT (</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../Orocos.html#TRANSPORT_MQ-constant" title="Orocos::TRANSPORT_MQ (constant)">TRANSPORT_MQ</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'> != </span><span class='embexpr_beg'>#{</span><span class='const'>RTT_TRANSPORT_MQ_ID</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Set the value at the top of </span><span class='embexpr_beg'>#{</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='const'>RTT_TRANSPORT_MQ_ID</span><span class='embexpr_end'>}</span><span class='tstring_content'> and report to the orocos.rb developers</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='kw'>true</span>
            <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='ivar'>@available</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="msg_max-class_method">
  
    .<strong>msg_max</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the maximum message queue size, in the number of samples</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 158</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_msg_max'>msg_max</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@msg_max</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='kw'>return</span> <span class='ivar'>@msg_max</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/proc/sys/fs/mqueue/msg_max</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='ivar'>@msg_max</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
        <span class='ivar'>@msg_max</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/proc/sys/fs/mqueue/msg_max</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="msgsize_max-class_method">
  
    .<strong>msgsize_max</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the maximum message size allowed in a message queue, in bytes</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 171</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_msgsize_max'>msgsize_max</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@msgsize_max</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='kw'>return</span> <span class='ivar'>@msgsize_max</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_readable?'>readable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/proc/sys/fs/mqueue/msgsize_max</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='ivar'>@msgsize_max</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
        <span class='ivar'>@msgsize_max</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/proc/sys/fs/mqueue/msgsize_max</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transportable_type_names-class_method">
  
    .<strong>Orocos::MQueue.transportable_type_names</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of string that are the type names which can be transported
over the MQ layer</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/rorocos/rorocos.cc', line 582</span>

static VALUE mqueue_transportable_type_names(VALUE mod)
{
    RTT::types::TypeInfoRepository::shared_ptr rtt_types =
        RTT::types::TypeInfoRepository::Instance();

    VALUE result = rb_ary_new();
    vector&lt;string&gt; all_types = rtt_types-&gt;getTypes();
    for (vector&lt;string&gt;::iterator it = all_types.begin(); it != all_types.end(); ++it)
    {
        RTT::types::TypeInfo* ti = rtt_types-&gt;type(*it);
        vector&lt;int&gt; transports = ti-&gt;getTransportNames();
        if (find(transports.begin(), transports.end(), ORO_MQUEUE_PROTOCOL_ID) != transports.end())
            rb_ary_push(result, rb_str_new2(it-&gt;c_str()));
    }
    return result;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="try_mq_open-class_method">
  
    .<strong>try_mq_open</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/rorocos/rorocos.cc', line 556</span>

static VALUE try_mq_open(VALUE mod)
{
    int this_pid = getpid();
    std::string queue_name = std::string(&quot;/orocosrb_&quot;) + boost::lexical_cast&lt;std::string&gt;(this_pid);

    mq_attr attributes;
    attributes.mq_flags = 0;
    attributes.mq_maxmsg = 1;
    attributes.mq_msgsize = 1;
    mqd_t setup = mq_open(queue_name.c_str(), O_RDWR | O_CREAT, S_IREAD | S_IWRITE, &amp;attributes);
    if (setup == -1)
        return rb_str_new2(strerror(errno));
    else
    {
        mq_close(setup);
        mq_unlink(queue_name.c_str());
        return Qnil;
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid_sizes?-class_method">
  
    .<strong>valid_sizes?</strong>(buffer_size, data_size)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Verifies that the given buffer size (in samples) and sample size (in bytes)
are below the limits defined in /proc</p>

<p>This is used by Port.handle_mq_transport if MQueue.validate_sizes? is true.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 137</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_valid_sizes?'>valid_sizes?</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer_size'>buffer_size</span><span class='comma'>,</span> <span class='id identifier rubyid_data_size'>data_size</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_msg_max'>msg_max</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_msgsize_max'>msgsize_max</span>
        <span class='const'><span class='object_link'><a href="../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the system-level MQ limits msg_max and msgsize_max parameters are unknown on this OS. I am disabling MQ support</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_buffer_size'>buffer_size</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_msg_max'>msg_max</span>
        <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='const'><span class='object_link'><a href="../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_content'>: required buffer size </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_buffer_size'>buffer_size</span><span class='embexpr_end'>}</span><span class='tstring_content'> is greater than the maximum that the system allows (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg_max'>msg_max</span><span class='embexpr_end'>}</span><span class='tstring_content'>). On linux systems, you can use /proc/sys/fs/mqueue/msg_max to change this limit</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_data_size'>data_size</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_msgsize_max'>msgsize_max</span>
        <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='const'><span class='object_link'><a href="../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_content'>: required sample size </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data_size'>data_size</span><span class='embexpr_end'>}</span><span class='tstring_content'> is greater than the maximum that the system allows (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msgsize_max'>msgsize_max</span><span class='embexpr_end'>}</span><span class='tstring_content'>). On linux systems, you can use /proc/sys/fs/mqueue/msgsize_max to change this limit</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_sizes?-class_method">
  
    .<strong>validate_sizes?</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:method:validate_sizes? :call-seq:</p>

<pre class="code ruby"><code class="ruby">Orocos::MQueue.validate_sizes? =&gt; true or false
Orocos::MQueue.validate_sizes = new_value
</code></pre>

<p>Controls whether orocos.rb should validate the data_size field in the
policies that require the use of MQ. If true, verify that this size is
compatible with the current operating systems limits, and switch back to
CORBA if it is not the case (or if the limits are unknown).</p>

<p>See the documentation of Orocos.auto? for the constraints on MQ usage.
Setting this off and automatic MQ usage on is not robust and therefore not
recommended.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 106</span>

<span class='id identifier rubyid_attr_predicate'>attr_predicate</span> <span class='symbol'>:validate_sizes?</span><span class='comma'>,</span> <span class='kw'>true</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="warn?-class_method">
  
    .<strong>warn?</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:method:warn? :call-seq:</p>

<pre class="code ruby"><code class="ruby">Orocos::MQueue.warn? =&gt; true or false
Orocos::MQueue.warn = new_value
</code></pre>

<p>Controls whether orocos.rb should issue a warning if auto_use? is true but
some connection cannot use the message queues</p>

<p>See the documentation of Orocos.auto_use? for the constraints on MQ usage.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 73</span>

<span class='id identifier rubyid_attr_predicate'>attr_predicate</span> <span class='symbol'>:warn?</span><span class='comma'>,</span> <span class='kw'>true</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="auto=-instance_method">
  
    #<strong>auto=</strong>(value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auto='>auto=</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot turn automatic MQ handling. It is either not built into the RTT, or you don&#39;t have enough permissions to create message queues (in which case a warning message has been displayed)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auto?-instance_method">
  
    #<strong>auto?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/mqueue.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auto?'>auto?</span><span class='semicolon'>;</span> <span class='kw'>false</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 22:10:21 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>