<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Orocos::Log::Replay
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Orocos::Log::Replay";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span>
     &raquo; 
    <span class="title">Replay</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Orocos::Log::Replay
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Orocos::Log::Replay</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../Namespace.html" title="Orocos::Namespace (module)">Namespace</a></span>, <span class='object_link'><a href="../PortsSearchable.html" title="Orocos::PortsSearchable (module)">PortsSearchable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/orocos/log/replay.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Class for loading and replaying pocolog (Rock) log files.</p>

<p>This class creates objects whose API is compatible with
<span class='object_link'><a href="../TaskContext.html" title="Orocos::TaskContext (class)">TaskContext</a></span> and <span class='object_link'><a href="../OutputPort.html" title="Orocos::OutputPort (class)">OutputPort</a></span>, using the log data.</p>

<p>By default, all tasks that are present in the log files provided to <span class='object_link'><a href="#open-class_method" title="Orocos::Log::Replay.open (method)">Replay.open</a></span>
can be resolved using the orocos name service. If this behaviour is
unwanted, call <span class='object_link'><a href="#deregister_tasks-instance_method" title="Orocos::Log::Replay#deregister_tasks (method)">#deregister_tasks</a></span> after <span class='object_link'><a href="#open-class_method" title="Orocos::Log::Replay.open (method)">Replay.open</a></span> or <span class='object_link'><a href="#load-instance_method" title="Orocos::Log::Replay#load (method)">#load</a></span> was called. To
do it on a task-by-task basis, do the following after the call to <span class='object_link'><a href="#open-class_method" title="Orocos::Log::Replay.open (method)">Replay.open</a></span>
or <span class='object_link'><a href="#load-instance_method" title="Orocos::Log::Replay#load (method)">#load</a></span></p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_replay'>replay</span><span class='period'>.</span><span class='id identifier rubyid_name_service'>name_service</span><span class='period'>.</span><span class='id identifier rubyid_deregister'>deregister</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>task_name</span><span class='tstring_end'>&#39;</span></span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Namespace.html" title="Orocos::Namespace (module)">Namespace</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Namespace.html#DELIMATOR-constant" title="Orocos::Namespace::DELIMATOR (constant)">Namespace::DELIMATOR</a></span></p>


  <h2>Class Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_config_file-class_method" title="log_config_file (class method)">.<strong>log_config_file</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute log_config_file.</p>
</div></span>
  
</li>

    
  </ul>

  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#actual_speed-instance_method" title="#actual_speed (instance method)">#<strong>actual_speed</strong>  &#x21d2; Float </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The actual replay speed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#annotations-instance_method" title="#annotations (instance method)">#<strong>annotations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>array of stream annotations.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_sample-instance_method" title="#current_sample (instance method)">#<strong>current_sample</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>last replayed sample.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_config_file-instance_method" title="#log_config_file (instance method)">#<strong>log_config_file</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>name of the log file which holds the logged properties is converted into
Regexp.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_service-instance_method" title="#name_service (instance method)">#<strong>name_service</strong>  &#x21d2; Orocos::Local </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A local nameservice on which the log tasks are registered.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_service_async-instance_method" title="#name_service_async (instance method)">#<strong>name_service_async</strong>  &#x21d2; Orocos::Async::Local </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A local async nameservice on which the log tasks are registered.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#out_of_sync_delta-instance_method" title="#out_of_sync_delta (instance method)">#<strong>out_of_sync_delta</strong>  &#x21d2; Float </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Measure of time synchronization during replay.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_qt_events-instance_method" title="#process_qt_events (instance method)">#<strong>process_qt_events</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>set it to true if processing of qt events is needed during synced replay.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#replayed_annotations-instance_method" title="#replayed_annotations (instance method)">#<strong>replayed_annotations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>array of all replayed annotaions this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was
called.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#replayed_ports-instance_method" title="#replayed_ports (instance method)">#<strong>replayed_ports</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>array of all replayed ports this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was called.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#replayed_properties-instance_method" title="#replayed_properties (instance method)">#<strong>replayed_properties</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>array of all replayed properties this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was
called.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#speed-instance_method" title="#speed (instance method)">#<strong>speed</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>desired replay speed = 1 â€“&gt; record time.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#timestamps-instance_method" title="#timestamps (instance method)">#<strong>timestamps</strong>  &#x21d2; Hash&lt;String,#call&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A mapping from a typelib type name to an object that allows to extract the
timestamp from a value of that type.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_sample_time-instance_method" title="#use_sample_time (instance method)">#<strong>use_sample_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If true, the alignment algorithm is going to use the sample time for
alignment.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#used_streams-instance_method" title="#used_streams (instance method)">#<strong>used_streams</strong>  &#x21d2; Array&lt;Pocolog::DataStream&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The streams that are actually replayed.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(*path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_intervals_as_log_markers-instance_method" title="#add_intervals_as_log_markers (instance method)">#<strong>add_intervals_as_log_markers</strong>(intervals, comment)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds the given time intervals as LogMarkers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advance-instance_method" title="#advance (instance method)">#<strong>advance</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#align-instance_method" title="#align (instance method)">#<strong>align</strong>(time_source = self.time_source)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Aligns all streams which have at least: * one reader * or one connections *
or track set to true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#aligned%3F-instance_method" title="#aligned? (instance method)">#<strong>aligned?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calc_statistics-instance_method" title="#calc_statistics (instance method)">#<strong>calc_statistics</strong>(time = current_time)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_reader_buffers-instance_method" title="#clear_reader_buffers (instance method)">#<strong>clear_reader_buffers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears all reader buffers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>close the log file, deregister from name service and also close all
available streams.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect_to-instance_method" title="#connect_to (instance method)">#<strong>connect_to</strong>(task, port_mappings = Hash.new, port_policies = Hash.new, ports_ignored = Array.new)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tries to connect all input ports of the OROCOS task to simulated
OutputPorts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_annotations-instance_method" title="#current_annotations (instance method)">#<strong>current_annotations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The current annotations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_port-instance_method" title="#current_port (instance method)">#<strong>current_port</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns the last port which recieved data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_sample_data-instance_method" title="#current_sample_data (instance method)">#<strong>current_sample_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns the current data of the current sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_time-instance_method" title="#current_time (instance method)">#<strong>current_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_timestamp-instance_method" title="#default_timestamp (instance method)">#<strong>default_timestamp</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets a code block to calculate the default timestamp duricng replay.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deregister_tasks-instance_method" title="#deregister_tasks (instance method)">#<strong>deregister_tasks</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>deregister the local name service again.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#duration-instance_method" title="#duration (instance method)">#<strong>duration</strong>  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The total duration of the replayed data, in seconds.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_port-instance_method" title="#each_port (instance method)">#<strong>each_port</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates through all simulated ports.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_task-instance_method" title="#each_task (instance method)">#<strong>each_task</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates through all simulated tasks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the end of file is reached.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#export_to_file-instance_method" title="#export_to_file (instance method)">#<strong>export_to_file</strong>(file, start_index = 0, end_index = 0, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>exports all aligned stream to a new log file if no start and end index is
given all data are exported otherwise the data are truncated according to
the given global indexes the block is called for each sample to update a
progress bar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_intervals-instance_method" title="#extract_intervals (instance method)">#<strong>extract_intervals</strong>(start_time = nil, end_time = nil, min_val = 0.8, kernel_size = 5.0) {|reader, sample| ... } &#x21d2; Array&lt;Array&lt;Time&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Extracts time intervals from the log file where the given code block
returns true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_sample_pos-instance_method" title="#first_sample_pos (instance method)">#<strong>first_sample_pos</strong>(stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_name-instance_method" title="#full_name (instance method)">#<strong>full_name</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns the full name of a task reachable under the given name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_log_markers-instance_method" title="#generate_log_markers (instance method)">#<strong>generate_log_markers</strong>(comment, min_val = 0.8, kernel_size = 5.0) {|reader, sample| ... } &#x21d2; Array&lt;Array&lt;Time&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Extracts time intervals from the log file where the given code block
returns true and adds these interval as log markers to the log replay
instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_task%3F-instance_method" title="#has_task? (instance method)">#<strong>has_task?</strong>(name)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(*path)  &#x21d2; Replay </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new instance of Replay.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_sample_pos-instance_method" title="#last_sample_pos (instance method)">#<strong>last_sample_pos</strong>(stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-instance_method" title="#load (instance method)">#<strong>load</strong>(*paths)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Logs that share the same basename, will be joined such that the streams
within the logs appear continous.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_log_file-instance_method" title="#load_log_file (instance method)">#<strong>load_log_file</strong>(file, path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads all the streams defined in the provided log file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_task_from_stream-instance_method" title="#load_task_from_stream (instance method)">#<strong>load_task_from_stream</strong>(stream, path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_markers-instance_method" title="#log_markers (instance method)">#<strong>log_markers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns an array of log_markers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_missing-instance_method" title="#method_missing (instance method)">#<strong>method_missing</strong>(m, *args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This is used to support the syntax.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#port_for-instance_method" title="#port_for (instance method)">#<strong>port_for</strong>(type_name, port_name, precise = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tries to find a OutputPort for a specefic data type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ports-instance_method" title="#ports (instance method)">#<strong>ports</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of all simulated ports.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty_print-instance_method" title="#pretty_print (instance method)">#<strong>pretty_print</strong>(pp)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>pretty print for Replay.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_sample-instance_method" title="#push_sample (instance method)">#<strong>push_sample</strong>(stream_idx, sample_info)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh-instance_method" title="#refresh (instance method)">#<strong>refresh</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>replays the last sample to the log port.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_tasks-instance_method" title="#register_tasks (instance method)">#<strong>register_tasks</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>registers all replayed log tasks on the local name server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#replay%3F-instance_method" title="#replay? (instance method)">#<strong>replay?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns false if no ports are or will be replayed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_time_sync-instance_method" title="#reset_time_sync (instance method)">#<strong>reset_time_sync</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the simulated time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rewinds all streams and replays the first sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">#<strong>run</strong>(time_sync = false, speed = 1, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Runs through the log files until the end is reached.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sample_index-instance_method" title="#sample_index (instance method)">#<strong>sample_index</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current position of the replayed sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sample_index_for_time-instance_method" title="#sample_index_for_time (instance method)">#<strong>sample_index_for_time</strong>(time)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seek-instance_method" title="#seek (instance method)">#<strong>seek</strong>(pos)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seeks to the given position.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_data-instance_method" title="#single_data (instance method)">#<strong>single_data</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of samples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#step-instance_method" title="#step (instance method)">#<strong>step</strong>(time_sync = false) {|reader, sample| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the next sample, writes it to the ports which are connected to the
OutputPort and updates all its readers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#step_back-instance_method" title="#step_back (instance method)">#<strong>step_back</strong>(time_sync = false, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the previous sample and writes it to the ports which are connected to
the OutputPort and updated its readers (see step).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_index_for_name-instance_method" title="#stream_index_for_name (instance method)">#<strong>stream_index_for_name</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_index_for_type-instance_method" title="#stream_index_for_type (instance method)">#<strong>stream_index_for_type</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_step%3F-instance_method" title="#sync_step? (instance method)">#<strong>sync_step?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns ture if the next sample must be replayed to meet synchronous
replay.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#task-instance_method" title="#task (instance method)">#<strong>task</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the simulated task with the given namen.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#task%3F-instance_method" title="#task? (instance method)">#<strong>task?</strong>(name)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns true if a task with the given name exists.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tasks-instance_method" title="#tasks (instance method)">#<strong>tasks</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns an array of all simulated tasks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time-instance_method" title="#time (instance method)">#<strong>time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the time of the current sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_source-instance_method" title="#time_source (instance method)">#<strong>time_source</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns where from the time used for alignment should be taken.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_sync-instance_method" title="#time_sync (instance method)">#<strong>time_sync</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>this can be used to set a different time sync logic the code block has
three parameters time = current sample time actual_delta = time between
start of replay and now required_delta = time which should have elapsed
between start and now to replay at the desired speed the code block must
return the number of seconds which the replay shall wait before the sample
is repalyed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timestamp-instance_method" title="#timestamp (instance method)">#<strong>timestamp</strong>(type_name, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Declares how the timestamp can be extracted out of values of a given type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#track-instance_method" title="#track (instance method)">#<strong>track</strong>(value, filter = Hash.new)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If set to true all ports are replayed and are not filtered out by the
filter otherwise only ports are replayed which have a reader or a
connection to an other port.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../PortsSearchable.html" title="Orocos::PortsSearchable (module)">PortsSearchable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../PortsSearchable.html#find_all_input_ports-instance_method" title="Orocos::PortsSearchable#find_all_input_ports (method)">#find_all_input_ports</a></span>, <span class='object_link'><a href="../PortsSearchable.html#find_all_output_ports-instance_method" title="Orocos::PortsSearchable#find_all_output_ports (method)">#find_all_output_ports</a></span>, <span class='object_link'><a href="../PortsSearchable.html#find_all_ports-instance_method" title="Orocos::PortsSearchable#find_all_ports (method)">#find_all_ports</a></span>, <span class='object_link'><a href="../PortsSearchable.html#find_input_port-instance_method" title="Orocos::PortsSearchable#find_input_port (method)">#find_input_port</a></span>, <span class='object_link'><a href="../PortsSearchable.html#find_output_port-instance_method" title="Orocos::PortsSearchable#find_output_port (method)">#find_output_port</a></span>, <span class='object_link'><a href="../PortsSearchable.html#find_port-instance_method" title="Orocos::PortsSearchable#find_port (method)">#find_port</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Namespace.html" title="Orocos::Namespace (module)">Namespace</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Namespace.html#basename-instance_method" title="Orocos::Namespace#basename (method)">#basename</a></span>, <span class='object_link'><a href="../Namespace.html#map_to_namespace-instance_method" title="Orocos::Namespace#map_to_namespace (method)">#map_to_namespace</a></span>, <span class='object_link'><a href="../Namespace.html#namespace-instance_method" title="Orocos::Namespace#namespace (method)">#namespace</a></span>, <span class='object_link'><a href="../Namespace.html#namespace=-instance_method" title="Orocos::Namespace#namespace= (method)">#namespace=</a></span>, <span class='object_link'><a href="../Namespace.html#same_namespace%3F-instance_method" title="Orocos::Namespace#same_namespace? (method)">#same_namespace?</a></span>, <span class='object_link'><a href="../Namespace.html#split_name-instance_method" title="Orocos::Namespace#split_name (method)">#split_name</a></span>, <span class='object_link'><a href="../Namespace.html#split_name-class_method" title="Orocos::Namespace.split_name (method)">split_name</a></span>, <span class='object_link'><a href="../Namespace.html#validate_namespace_name-class_method" title="Orocos::Namespace.validate_namespace_name (method)">validate_namespace_name</a></span>, <span class='object_link'><a href="../Namespace.html#verify_same_namespace-instance_method" title="Orocos::Namespace#verify_same_namespace (method)">#verify_same_namespace</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(*path)  &#x21d2; <tt><span class='object_link'><a href="" title="Orocos::Log::Replay (class)">Replay</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new instance of Replay</p>

<p>If a path is givien load is called after creation to load the log files.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Replay.new(*path) is deprecated, use Replay.open(*path) to create and load files at the same time</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='ivar'>@default_timestamp</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@timestamps</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@tasks</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@annotations</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@current_annotations</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@speed</span> <span class='op'>=</span> <span class='int'>1</span>
    <span class='ivar'>@replayed_ports</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@replayed_properties</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@replayed_objects</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@used_streams</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@stream</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@current_sample</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@process_qt_events</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@log_config_file</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Orocos::Log::Replay (class)">Replay</a></span></span><span class='op'>::</span><span class='id identifier rubyid_log_config_file'><span class='object_link'><a href="#log_config_file-class_method" title="Orocos::Log::Replay.log_config_file (method)">log_config_file</a></span></span>
    <span class='ivar'>@namespace</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_reset_time_sync'>reset_time_sync</span>
    <span class='id identifier rubyid_time_sync'>time_sync</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice this">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>
  
    <div class="method_details first">
  <h3 class="signature first" id="method_missing-instance_method">
  
    #<strong>method_missing</strong>(m, *args, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This is used to support the syntax. log_replay.task</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 1059</span>

<span class='kw'>def</span> <span class='id identifier rubyid_method_missing'>method_missing</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='comma'>,</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>    <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>=</span> <span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_task_name'>task_name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_task_name'>task_name</span>

    <span class='kw'>begin</span>
        <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span>  <span class='const'>NoMethodError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a Log::Task of the current log file(s)</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The following tasks are availabe:</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
            <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id="log_config_file=-class_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="log_config_file-class_method">
  
    .<strong>log_config_file</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute log_config_file</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log_config_file'>log_config_file</span>
  <span class='ivar'>@log_config_file</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="actual_speed-instance_method">
  
    #<strong>actual_speed</strong>  &#x21d2; <tt>Float</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The actual replay speed</p>

<p>This is updated during replay, and reflects the actual replay speed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_actual_speed'>actual_speed</span>
  <span class='ivar'>@actual_speed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="annotations-instance_method">
  
    #<strong>annotations</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>array of stream annotations</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_annotations'>annotations</span>
  <span class='ivar'>@annotations</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="current_sample-instance_method">
  
    #<strong>current_sample</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>last replayed sample</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_sample'>current_sample</span>
  <span class='ivar'>@current_sample</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="log_config_file=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="log_config_file-instance_method">
  
    #<strong>log_config_file</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>name of the log file which holds the logged properties is converted into
Regexp</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log_config_file'>log_config_file</span>
  <span class='ivar'>@log_config_file</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name_service=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name_service-instance_method">
  
    #<strong>name_service</strong>  &#x21d2; <tt><span class='object_link'><a href="../Local.html" title="Orocos::Local (module)">Orocos::Local</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a local nameservice on which the log tasks are registered. It is
added to the global name service with <span class='object_link'><a href="#register_tasks-instance_method" title="Orocos::Log::Replay#register_tasks (method)">#register_tasks</a></span> and removed with
#unregister_tasks</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Local.html" title="Orocos::Local (module)">Orocos::Local</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a local nameservice on which the log tasks are registered. It is added to
the global name service with <span class='object_link'><a href="#register_tasks-instance_method" title="Orocos::Log::Replay#register_tasks (method)">#register_tasks</a></span> and removed with
#unregister_tasks</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_service'>name_service</span>
  <span class='ivar'>@name_service</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name_service_async=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name_service_async-instance_method">
  
    #<strong>name_service_async</strong>  &#x21d2; <tt><span class='object_link'><a href="../Async/Local.html" title="Orocos::Async::Local (module)">Orocos::Async::Local</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a local async nameservice on which the log tasks are registered. It
is added to the global name service with <span class='object_link'><a href="#register_tasks-instance_method" title="Orocos::Log::Replay#register_tasks (method)">#register_tasks</a></span> and removed with
#unregister_tasks</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Async/Local.html" title="Orocos::Async::Local (module)">Orocos::Async::Local</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a local async nameservice on which the log tasks are registered. It is
added to the global name service with <span class='object_link'><a href="#register_tasks-instance_method" title="Orocos::Log::Replay#register_tasks (method)">#register_tasks</a></span> and removed with
#unregister_tasks</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_service_async'>name_service_async</span>
  <span class='ivar'>@name_service_async</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="out_of_sync_delta-instance_method">
  
    #<strong>out_of_sync_delta</strong>  &#x21d2; <tt>Float</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Measure of time synchronization during replay</p>

<p>This is updated during replay to reflect how fast the replay actually is.
This is the difference (in seconds) between the replay time that we should
have and the replay time that we actually have</p>

<p>In practice, negative values mean that the replayed samples are behind the
simulated times, and positive values mean that the replayed samples are
replayed to fast</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 118</span>

<span class='kw'>def</span> <span class='id identifier rubyid_out_of_sync_delta'>out_of_sync_delta</span>
  <span class='ivar'>@out_of_sync_delta</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="process_qt_events=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="process_qt_events-instance_method">
  
    #<strong>process_qt_events</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>set it to true if processing of qt events is needed during synced replay</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_qt_events'>process_qt_events</span>
  <span class='ivar'>@process_qt_events</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="replayed_annotations=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="replayed_annotations-instance_method">
  
    #<strong>replayed_annotations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>array of all replayed annotaions this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was
called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replayed_annotations'>replayed_annotations</span>
  <span class='ivar'>@replayed_annotations</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="replayed_ports=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="replayed_ports-instance_method">
  
    #<strong>replayed_ports</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>array of all replayed ports this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replayed_ports'>replayed_ports</span>
  <span class='ivar'>@replayed_ports</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="replayed_properties=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="replayed_properties-instance_method">
  
    #<strong>replayed_properties</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>array of all replayed properties this array is filled after <span class='object_link'><a href="#align-instance_method" title="Orocos::Log::Replay#align (method)">#align</a></span> was
called</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replayed_properties'>replayed_properties</span>
  <span class='ivar'>@replayed_properties</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="speed=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="speed-instance_method">
  
    #<strong>speed</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>desired replay speed = 1 â€“&gt; record time</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_speed'>speed</span>
  <span class='ivar'>@speed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="timestamps-instance_method">
  
    #<strong>timestamps</strong>  &#x21d2; <tt>Hash&lt;String,#call&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a mapping from a typelib type name to an object that allows to
extract the timestamp from a value of that type</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;String,#call&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a mapping from a typelib type name to an object that allows to extract the
timestamp from a value of that type</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>{timestamp}</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timestamps'>timestamps</span>
  <span class='ivar'>@timestamps</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="use_sample_time=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="use_sample_time-instance_method">
  
    #<strong>use_sample_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If true, the alignment algorithm is going to use the sample time for
alignment. Otherwise, it uses the time at which the sample got written on
disk (logical time)</p>

<p>See also #time_source</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use_sample_time'>use_sample_time</span>
  <span class='ivar'>@use_sample_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="used_streams-instance_method">
  
    #<strong>used_streams</strong>  &#x21d2; <tt>Array&lt;Pocolog::DataStream&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The streams that are actually replayed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Pocolog::DataStream&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_used_streams'>used_streams</span>
  <span class='ivar'>@used_streams</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="open-class_method">
  
    .<strong>open</strong>(*path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176
177
178
179
180
181
182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 174</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_replay'>replay</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_replay'>replay</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_replay'>replay</span>
<span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot load logfiles</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span>
<span class='kw'>rescue</span> <span class='const'>Pocolog</span><span class='op'>::</span><span class='const'>Logfiles</span><span class='op'>::</span><span class='const'>MissingPrologue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wrong log format</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_e'>e</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_intervals_as_log_markers-instance_method">
  
    #<strong>add_intervals_as_log_markers</strong>(intervals, comment)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds the given time intervals as LogMarkers</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>intervals</span>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Time&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The intervals</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>comment</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Comment of the log markers</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


769
770
771
772
773
774
775
776
777
778
779</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 769</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_intervals_as_log_markers'>add_intervals_as_log_markers</span><span class='lparen'>(</span><span class='id identifier rubyid_intervals'>intervals</span><span class='comma'>,</span><span class='id identifier rubyid_comment'>comment</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_markers'>markers</span> <span class='op'>=</span> <span class='id identifier rubyid_log_markers'>log_markers</span> <span class='comment'># fill @markers from log file
</span>    <span class='id identifier rubyid_intervals'>intervals</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_interval'>interval</span><span class='op'>|</span>
        <span class='id identifier rubyid_markers'>markers</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="LogMarker.html" title="Orocos::Log::LogMarker (class)">LogMarker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="LogMarker.html#initialize-instance_method" title="Orocos::Log::LogMarker#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_interval'>interval</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span><span class='symbol'>:start</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span><span class='id identifier rubyid_comment'>comment</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_markers'>markers</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="LogMarker.html" title="Orocos::Log::LogMarker (class)">LogMarker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="LogMarker.html#initialize-instance_method" title="Orocos::Log::LogMarker#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_interval'>interval</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='comma'>,</span><span class='symbol'>:stop</span><span class='comma'>,</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span><span class='id identifier rubyid_comment'>comment</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_markers'>markers</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_markers'>markers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="advance-instance_method">
  
    #<strong>advance</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


454
455
456
457
458
459
460</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 454</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advance'>advance</span>
    <span class='kw'>if</span><span class='lparen'>(</span><span class='ivar'>@stream</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_throw'>throw</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream is not initialized yet</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="align-instance_method">
  
    #<strong>align</strong>(time_source = self.time_source)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Aligns all streams which have at least:</p>
<ul><li>
<p>one reader</p>
</li><li>
<p>or one connections</p>
</li><li>
<p>or track set to true.</p>
</li></ul>

<p>After calling this method no more ports can be tracked.</p>

<p>time_source is passed through to the StreamAligner. It can be used to
override the global #time_source parameter. See #time_source for available
values.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 400</span>

<span class='kw'>def</span> <span class='id identifier rubyid_align'>align</span><span class='lparen'>(</span> <span class='id identifier rubyid_time_source'>time_source</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_time_source'>time_source</span> <span class='rparen'>)</span>
    <span class='ivar'>@replayed_ports</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@used_streams</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@replayed_annotations</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_replay?'>replay?</span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No ports are selected. Assuming that all ports shall be replayed.</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Connect port(s) or set their track flag to true to get rid of this message.</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_track'>track</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'>#get all properties which shall be replayed
</span>    <span class='id identifier rubyid_each_task'>each_task</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_used?'>used?</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_port'>port</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tracked'>tracked</span><span class='op'>=</span><span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_has_port?'>has_port?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>state</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_properties'>properties</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_property'>property</span><span class='op'>|</span>
                <span class='id identifier rubyid_property'>property</span><span class='period'>.</span><span class='id identifier rubyid_tracked'>tracked</span> <span class='op'>=</span> <span class='kw'>true</span>
                <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_property'>property</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='ivar'>@replayed_properties</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_property'>property</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'>#get all streams which shall be replayed
</span>    <span class='id identifier rubyid_each_port'>each_port</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_port'>port</span><span class='op'>|</span>
        <span class='ivar'>@replayed_ports</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_port'>port</span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_used?'>used?</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Aligning streams --&gt; all ports which are unused will not be loaded!!!</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='ivar'>@replayed_properties</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@replayed_ports</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No log data are replayed. All selected streams are empty.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='comment'># If we do have something to replay, then add the annotations as
</span>    <span class='comment'># well
</span>    <span class='id identifier rubyid_annotations'>annotations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_annotation'>annotation</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_annotation'>annotation</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@replayed_annotations</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_annotation'>annotation</span>
    <span class='kw'>end</span>

    <span class='ivar'>@replayed_objects</span> <span class='op'>=</span> <span class='ivar'>@replayed_properties</span> <span class='op'>+</span> <span class='ivar'>@replayed_ports</span> <span class='op'>+</span> <span class='ivar'>@replayed_annotations</span>
    <span class='ivar'>@used_streams</span> <span class='op'>=</span> <span class='ivar'>@replayed_objects</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:stream</span><span class='rparen'>)</span>

    <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Replayed Ports:</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@replayed_ports</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_port'>port</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='const'>PP</span><span class='period'>.</span><span class='id identifier rubyid_pp'>pp</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span>

    <span class='comment'>#join streams
</span>    <span class='ivar'>@stream</span> <span class='op'>=</span> <span class='const'>Pocolog</span><span class='op'>::</span><span class='const'>StreamAligner</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_time_source'>time_source</span><span class='comma'>,</span> <span class='op'>*</span><span class='ivar'>@used_streams</span><span class='rparen'>)</span>
    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>

    <span class='id identifier rubyid_reset_time_sync'>reset_time_sync</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_step'>step</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="aligned?-instance_method">
  
    #<strong>aligned?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 510</span>

<span class='kw'>def</span> <span class='id identifier rubyid_aligned?'>aligned?</span>
    <span class='kw'>return</span> <span class='ivar'>@stream</span> <span class='op'>!=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="calc_statistics-instance_method">
  
    #<strong>calc_statistics</strong>(time = current_time)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


585
586
587
588
589
590
591
592
593
594
595</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 585</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calc_statistics'>calc_statistics</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_current_time'>current_time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_current_time'>current_time</span>

    <span class='ivar'>@base_time</span> <span class='op'>||=</span> <span class='id identifier rubyid_time'>time</span>
    <span class='ivar'>@start_time</span> <span class='op'>||=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>

    <span class='id identifier rubyid_required_delta'>required_delta</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span> <span class='op'>-</span> <span class='ivar'>@base_time</span><span class='rparen'>)</span><span class='op'>/</span><span class='ivar'>@speed</span>
    <span class='id identifier rubyid_actual_delta'>actual_delta</span>   <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='ivar'>@start_time</span>
    <span class='ivar'>@out_of_sync_delta</span> <span class='op'>=</span> <span class='ivar'>@time_sync_proc</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span><span class='id identifier rubyid_actual_delta'>actual_delta</span><span class='comma'>,</span><span class='id identifier rubyid_required_delta'>required_delta</span><span class='rparen'>)</span>
    <span class='ivar'>@actual_speed</span> <span class='op'>=</span> <span class='id identifier rubyid_required_delta'>required_delta</span><span class='op'>/</span><span class='id identifier rubyid_actual_delta'>actual_delta</span><span class='op'>*</span><span class='ivar'>@speed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_reader_buffers-instance_method">
  
    #<strong>clear_reader_buffers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears all reader buffers. This is usefull if you are changing the replay
direction.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1043
1044
1045
1046
1047</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 1043</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_reader_buffers'>clear_reader_buffers</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_clear_reader_buffers'>clear_reader_buffers</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="close-instance_method">
  
    #<strong>close</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>close the log file, deregister from name service and also close all
available streams</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


491
492
493
494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 491</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
		<span class='id identifier rubyid_deregister_tasks'>deregister_tasks</span>
		<span class='comment'># TODO close all streams
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connect_to-instance_method">
  
    #<strong>connect_to</strong>(task, port_mappings = Hash.new, port_policies = Hash.new, ports_ignored = Array.new)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tries to connect all input ports of the OROCOS task to simulated
OutputPorts</p>

<h2 id="label-Parameter-3A">Parameter:</h2>

<p>*task =&gt; task to connect to *port_mappings =&gt; hash to define port
mappings =&gt; dst_port_name *ports_ignored =&gt; array of
port names which shall be ignored</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 326</span>

<span class='kw'>def</span> <span class='id identifier rubyid_connect_to'>connect_to</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span><span class='id identifier rubyid_port_mappings'>port_mappings</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='comma'>,</span><span class='id identifier rubyid_port_policies'>port_policies</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span><span class='id identifier rubyid_ports_ignored'>ports_ignored</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
    <span class='comment'>#convenience block to do connect_to(task,:auto_ignore)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_port_mappings'>port_mappings</span> <span class='op'>==</span> <span class='symbol'>:auto_ignore</span>
        <span class='id identifier rubyid_ports_ignored'>ports_ignored</span> <span class='op'>=</span> <span class='id identifier rubyid_port_mappings'>port_mappings</span>
        <span class='id identifier rubyid_port_mappings'>port_mappings</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ports_ignored'>ports_ignored</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ports_ignored'>ports_ignored</span><span class='rparen'>)</span>

    <span class='comment'>#start task if necessary
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:PRE_OPERATIONAL</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_configure'>configure</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='symbol'>:STOPPED</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span>
    <span class='kw'>end</span>

    <span class='comment'>#to have a better user interface the hash is inverted
</span>    <span class='comment'>#port1 connect_to port2 is written as (&#39;port1&#39; =&gt; &#39;port2&#39;)
</span>    <span class='id identifier rubyid_port_mappings'>port_mappings</span> <span class='op'>=</span> <span class='id identifier rubyid_port_mappings'>port_mappings</span><span class='period'>.</span><span class='id identifier rubyid_invert'>invert</span>

    <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_port'>each_port</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_port'>port</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_to_orocos_port'>to_orocos_port</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../InputPort.html" title="Orocos::InputPort (class)">InputPort</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_ports_ignored'>ports_ignored</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_target_port'>target_port</span> <span class='op'>=</span> <span class='id identifier rubyid_find_port'>find_port</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span><span class='id identifier rubyid_port_mappings'>port_mappings</span><span class='lbracket'>[</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='op'>||</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_target_port'>target_port</span>
                <span class='id identifier rubyid_target_port'>target_port</span><span class='period'>.</span><span class='id identifier rubyid_connect_to'>connect_to</span><span class='lparen'>(</span><span class='id identifier rubyid_port'>port</span><span class='comma'>,</span><span class='id identifier rubyid_port_policies'>port_policies</span><span class='lbracket'>[</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_ports_ignored'>ports_ignored</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='symbol'>:auto_ignore</span>
                <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot find an output port for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>else</span>
                <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No input port can be found for output port </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_full_name'>full_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_annotations-instance_method">
  
    #<strong>current_annotations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The current annotations</p>

<p>This is an aggregated version of #annotations, where the value for each key
is the last value known (i.e. the value from the last annotation with that
key that has a timestamp lower than the current time)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_annotations'>current_annotations</span>
    <span class='id identifier rubyid_annotations'>annotations</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='id identifier rubyid_ann'>ann</span><span class='op'>|</span>
        <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_ann'>ann</span><span class='period'>.</span><span class='id identifier rubyid_current_state'>current_state</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_port-instance_method">
  
    #<strong>current_port</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns the last port which recieved data</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


681
682
683
684
685
686</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 681</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_port'>current_port</span>
    <span class='kw'>if</span> <span class='ivar'>@current_sample</span>
        <span class='id identifier rubyid_stream_idx'>stream_idx</span> <span class='op'>=</span> <span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_replayed_ports'>replayed_ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_sample_data-instance_method">
  
    #<strong>current_sample_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns the current data of the current sample</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


689
690
691
692
693
694</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 689</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_sample_data'>current_sample_data</span>
    <span class='kw'>if</span> <span class='ivar'>@current_sample</span>
        <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>=</span> <span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_read_one_raw_data_sample'>read_one_raw_data_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_time-instance_method">
  
    #<strong>current_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


573
574
575
576
577
578
579
580
581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 573</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_time'>current_time</span>
    <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>=</span> <span class='ivar'>@current_sample</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_time'>time</span>

    <span class='id identifier rubyid_stream_type'>stream_type</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_by_index'>stream_by_index</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_getter'>getter</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_timestamps'>timestamps</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_type'>stream_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_default_timestamp'>default_timestamp</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_read_one_raw_data_sample'>read_one_raw_data_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_getter'>getter</span><span class='lbracket'>[</span><span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
    <span class='kw'>else</span> <span class='id identifier rubyid_time'>time</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_timestamp-instance_method">
  
    #<strong>default_timestamp</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets a code block to calculate the default timestamp duricng replay.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281
282
283</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_timestamp'>default_timestamp</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='kw'>then</span> <span class='ivar'>@default_timestamp</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>else</span> <span class='ivar'>@default_timestamp</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deregister_tasks-instance_method">
  
    #<strong>deregister_tasks</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>deregister the local name service again</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


483
484
485
486
487</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 483</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deregister_tasks'>deregister_tasks</span>
		<span class='kw'>if</span> <span class='ivar'>@name_service</span>
 <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='id identifier rubyid_name_service'><span class='object_link'><a href="../../Orocos.html#name_service-class_method" title="Orocos.name_service (method)">name_service</a></span></span><span class='period'>.</span><span class='id identifier rubyid_delete'><span class='object_link'><a href="../NameService.html#delete-instance_method" title="Orocos::NameService#delete (method)">delete</a></span></span> <span class='ivar'>@name_service</span>
		<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="duration-instance_method">
  
    #<strong>duration</strong>  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The total duration of the replayed data, in seconds</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


517
518
519
520
521
522
523
524
525</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 517</span>

<span class='kw'>def</span> <span class='id identifier rubyid_duration'>duration</span>
    <span class='id identifier rubyid_intervals'>intervals</span> <span class='op'>=</span> <span class='id identifier rubyid_used_streams'>used_streams</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_interval_lg'>interval_lg</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='id identifier rubyid_intervals'>intervals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:first</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='id identifier rubyid_intervals'>intervals</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:last</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_max'>max</span>
        <span class='id identifier rubyid_max'>max</span> <span class='op'>-</span> <span class='id identifier rubyid_min'>min</span>
    <span class='kw'>else</span> <span class='int'>0</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_port-instance_method">
  
    #<strong>each_port</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Iterates through all simulated ports.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


813
814
815
816
817</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 813</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_port'>each_port</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_each_port'>each_port</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each_task-instance_method">
  
    #<strong>each_task</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Iterates through all simulated tasks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


851
852
853
854
855</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 851</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each_task'>each_task</span> <span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eof?-instance_method">
  
    #<strong>eof?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the end of file is reached.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


873
874
875</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 873</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eof?'>eof?</span>
    <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_eof?'>eof?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="export_to_file-instance_method">
  
    #<strong>export_to_file</strong>(file, start_index = 0, end_index = 0, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>exports all aligned stream to a new log file if no start and end index is
given all data are exported otherwise the data are truncated according to
the given global indexes the block is called for each sample to update a
progress bar</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1053
1054
1055</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 1053</span>

<span class='kw'>def</span> <span class='id identifier rubyid_export_to_file'>export_to_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span><span class='id identifier rubyid_start_index'>start_index</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span><span class='id identifier rubyid_end_index'>end_index</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_export_to_file'>export_to_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span><span class='id identifier rubyid_start_index'>start_index</span><span class='comma'>,</span><span class='id identifier rubyid_end_index'>end_index</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="extract_intervals-instance_method">
  
    #<strong>extract_intervals</strong>(start_time = nil, end_time = nil, min_val = 0.8, kernel_size = 5.0) {|reader, sample| ... } &#x21d2; <tt>Array&lt;Array&lt;Time&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Extracts time intervals from the log file where the given code block
returns true.</p>

<p>For each sample the given code block is called with the current port and
sample as parameter. After all samples were replayed the generated result
vector (true is interpreted as 1) is filtered with a box filter of the
given size. The returned intervals are these intervals where the filtered
result vector is equal or bigger than min_val</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>start_time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Start time of the interval which is replayed (nil = start of the log file)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>end_time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>End time of the interval which is replayed (nil = end of the log file)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>min_val</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0.8</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Min value of the filtered result vector to be regarded as inlayer</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kernel_size</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>5.0</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Filter kernel size of the box filter in seconds</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>reader</tt>, <tt>sample</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>reader</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data reader of the port from which the sample has been read</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data sample</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Time&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>extracted intervals</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 717</span>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_intervals'>extract_intervals</span><span class='lparen'>(</span><span class='id identifier rubyid_start_time'>start_time</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span><span class='id identifier rubyid_end_time'>end_time</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_min_val'>min_val</span><span class='op'>=</span><span class='float'>0.8</span><span class='comma'>,</span><span class='id identifier rubyid_kernel_size'>kernel_size</span><span class='op'>=</span><span class='float'>5.0</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='comment'>#replay given intervals and collect results of the code block
</span>    <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span><span class='id identifier rubyid_times'>times</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>||=</span> <span class='kw'>begin</span>
                  <span class='id identifier rubyid_rewind'>rewind</span>
                  <span class='id identifier rubyid_time'>time</span>
              <span class='kw'>end</span>
    <span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_start_time'>start_time</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_current_port'>current_port</span><span class='comma'>,</span><span class='id identifier rubyid_current_sample_data'>current_sample_data</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='int'>1</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_times'>times</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_time'>time</span>
    <span class='kw'>end</span> <span class='kw'>while</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_end_time'>end_time</span> <span class='op'>||</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_end_time'>end_time</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='comment'>#filter result vector
</span>    <span class='id identifier rubyid_idx'>idx</span><span class='comma'>,</span><span class='id identifier rubyid_sum'>sum</span><span class='comma'>,</span><span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span>
    <span class='id identifier rubyid_filtered'>filtered</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
        <span class='kw'>while</span> <span class='id identifier rubyid_times'>times</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='op'>+</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_times'>times</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_kernel_size'>kernel_size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_idx'>idx</span><span class='op'>+</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>-</span><span class='int'>1</span>
            <span class='id identifier rubyid_size'>size</span> <span class='op'>+=</span> <span class='int'>1</span>
            <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='op'>+</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
                <span class='id identifier rubyid_sum'>sum</span><span class='op'>/</span><span class='id identifier rubyid_size'>size</span>
              <span class='kw'>else</span>
                  <span class='int'>0</span>
              <span class='kw'>end</span>
        <span class='id identifier rubyid_sum'>sum</span> <span class='op'>-=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_idx'>idx</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_size'>size</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_val'>val</span>
    <span class='kw'>end</span>

    <span class='comment'>#extract intervals
</span>    <span class='id identifier rubyid_intervals'>intervals</span><span class='comma'>,</span><span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='kw'>nil</span>
    <span class='id identifier rubyid_filtered'>filtered</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='comma'>,</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_e'>e</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_min_val'>min_val</span>
            <span class='id identifier rubyid_start'>start</span> <span class='op'>||=</span> <span class='id identifier rubyid_times'>times</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_start'>start</span>
            <span class='id identifier rubyid_intervals'>intervals</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_start'>start</span><span class='comma'>,</span><span class='id identifier rubyid_times'>times</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_times'>times</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='op'>-</span><span class='id identifier rubyid_start'>start</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_kernel_size'>kernel_size</span>
            <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_intervals'>intervals</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_sample_pos-instance_method">
  
    #<strong>first_sample_pos</strong>(stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 462</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_sample_pos'>first_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_first_sample_pos'>first_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_name-instance_method">
  
    #<strong>full_name</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns the full name of a task reachable under the given name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365
366
367
368
369
370
371
372
373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 361</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='comment'># use full name
</span>    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_name'>name</span> <span class='kw'>if</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>

    <span class='comment'># use namespace of replay
</span>    <span class='id identifier rubyid_name2'>name2</span> <span class='op'>=</span> <span class='id identifier rubyid_map_to_namespace'>map_to_namespace</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_name2'>name2</span> <span class='kw'>if</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_name2'>name2</span><span class='rparen'>)</span>

    <span class='comment'># use all namespaces
</span>    <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='kw'>if</span> <span class='id identifier rubyid_t'>t</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_log_markers-instance_method">
  
    #<strong>generate_log_markers</strong>(comment, min_val = 0.8, kernel_size = 5.0) {|reader, sample| ... } &#x21d2; <tt>Array&lt;Array&lt;Time&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Extracts time intervals from the log file where the given code block
returns true and adds these interval as log markers to the log replay
instance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>comment</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Comment of the log markers</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>min_val</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0.8</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Min value of the filtered result vector to be regarded as inlayer</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kernel_size</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>5.0</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Filter kernel size of the box filter in seconds</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>reader</tt>, <tt>sample</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>reader</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data reader of the port from which the sample has been read</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data sample</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Time&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>extracted intervals</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#extract_intervals-instance_method" title="Orocos::Log::Replay#extract_intervals (method)">#extract_intervals</a></span></li>
    
      <li><span class='object_link'><a href="#add_intervals_as_log_markers-instance_method" title="Orocos::Log::Replay#add_intervals_as_log_markers (method)">#add_intervals_as_log_markers</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


797
798
799
800
801
802</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 797</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_log_markers'>generate_log_markers</span><span class='lparen'>(</span><span class='id identifier rubyid_comment'>comment</span><span class='comma'>,</span><span class='id identifier rubyid_min_val'>min_val</span><span class='op'>=</span><span class='float'>0.8</span><span class='comma'>,</span><span class='id identifier rubyid_kernel_size'>kernel_size</span><span class='op'>=</span><span class='float'>5.0</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_intervals'>intervals</span> <span class='op'>=</span> <span class='id identifier rubyid_extract_intervals'>extract_intervals</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_min_val'>min_val</span><span class='comma'>,</span><span class='id identifier rubyid_kernel_size'>kernel_size</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_add_intervals_as_log_markers'>add_intervals_as_log_markers</span><span class='lparen'>(</span><span class='id identifier rubyid_intervals'>intervals</span><span class='comma'>,</span><span class='id identifier rubyid_comment'>comment</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rewind'>rewind</span>
    <span class='id identifier rubyid_intervals'>intervals</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_task?-instance_method">
  
    #<strong>has_task?</strong>(name)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


845
846
847
848</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 845</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_task?'>has_task?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_map_to_namespace'>map_to_namespace</span> <span class='id identifier rubyid_name'>name</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_sample_pos-instance_method">
  
    #<strong>last_sample_pos</strong>(stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_sample_pos'>last_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_last_sample_pos'>last_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load-instance_method">
  
    #<strong>load</strong>(*paths)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Logs that share the same basename, will be joined such that the streams
within the logs appear continous.</p>

<p>a collection of files/directories can be given as arguments, followed by a
typelib registry and/or an options hash. The options can be given as:</p>

<p>:registry - same as providing the registry directly :multifile - set to
:last if you don&#39;t want merging of logs with the same</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_basename'>basename</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


979
980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 979</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_paths'>paths</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_flatten!'>flatten!</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No log file was given</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='id identifier rubyid_logreg'>logreg</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Typelib</span><span class='op'>::</span><span class='const'>Registry</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_logreg'>logreg</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
    <span class='kw'>end</span>
		<span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
		    <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
		    <span class='id identifier rubyid_logreg'>logreg</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:registry</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:registry</span><span class='rbracket'>]</span>
		<span class='kw'>end</span>

    <span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
        <span class='comment'>#check if path is a directory
</span>        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_all_files'>all_files</span> <span class='op'>=</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:glob</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*.*.log</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_by_basename'>by_basename</span> <span class='op'>=</span> <span class='id identifier rubyid_all_files'>all_files</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
                <span class='id identifier rubyid_split'>split</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(.*)\.(\d+)\.log$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_split'>split</span>
                    <span class='id identifier rubyid_basename'>basename</span><span class='comma'>,</span> <span class='id identifier rubyid_number'>number</span> <span class='op'>=</span> <span class='id identifier rubyid_split'>split</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_split'>split</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_basename'>basename</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
                    <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_basename'>basename</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_number'>number</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
                    <span class='id identifier rubyid_h'>h</span>
                <span class='kw'>else</span>
                    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid log file name </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Expecting: /^(.*)\.(\d+)\.log$/</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_h'>h</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_by_basename'>by_basename</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
                <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>empty directory: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>next</span>
            <span class='kw'>end</span>

            <span class='id identifier rubyid_by_basename'>by_basename</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_files'>files</span><span class='op'>|</span>
			    <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:multifile</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:last</span>
				<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_files'>files</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span>
			    <span class='kw'>end</span>
			    <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='op'>|</span>
				<span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
			    <span class='kw'>end</span>

                <span class='id identifier rubyid_args'>args</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_logreg'>logreg</span>

                <span class='id identifier rubyid_logfile'>logfile</span> <span class='op'>=</span> <span class='const'>Pocolog</span><span class='op'>::</span><span class='const'>Logfiles</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='rparen'>)</span>
                <span class='id identifier rubyid_load_log_file'>load_log_file</span><span class='lparen'>(</span><span class='id identifier rubyid_logfile'>logfile</span><span class='comma'>,</span> <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>elsif</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_file?'>file?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='const'>Pocolog</span><span class='op'>::</span><span class='const'>Logfiles</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_logreg'>logreg</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_load_log_file'>load_log_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Can not load log file: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is neither a directory nor a file</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Nothing was loaded from the following log files </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_paths'>paths</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>; </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='comment'>#register task on the local name server
</span>    <span class='id identifier rubyid_register_tasks'>register_tasks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_log_file-instance_method">
  
    #<strong>load_log_file</strong>(file, path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Loads all the streams defined in the provided log file</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


954
955
956
957
958
959
960
961
962
963</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 954</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_log_file'>load_log_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  loading log file </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_stream_type</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>annotations</span><span class='tstring_end'>&quot;</span></span>
            <span class='ivar'>@annotations</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Annotations.html" title="Orocos::Log::Annotations (class)">Annotations</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Annotations.html#initialize-instance_method" title="Orocos::Log::Annotations#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
            <span class='kw'>next</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_load_task_from_stream'>load_task_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_task_from_stream-instance_method">
  
    #<strong>load_task_from_stream</strong>(stream, path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 901</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_task_from_stream'>load_task_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='comment'>#get the name of the task which was logged into the stream
</span>    <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_task_name</span><span class='tstring_end'>&quot;</span></span>
                    <span class='kw'>begin</span>
                        <span class='id identifier rubyid_namespace'>namespace</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Namespace.html" title="Orocos::Namespace (module)">Namespace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_split_name'><span class='object_link'><a href="../Namespace.html#split_name-class_method" title="Orocos::Namespace.split_name (method)">split_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_task_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
                        <span class='const'><span class='object_link'><a href="../Namespace.html" title="Orocos::Namespace (module)">Namespace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_validate_namespace_name'><span class='object_link'><a href="../Namespace.html#validate_namespace_name-class_method" title="Orocos::Namespace.validate_namespace_name (method)">validate_namespace_name</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rparen'>)</span>
                    <span class='kw'>rescue</span> <span class='const'>ArgumentError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
                        <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid metadata rock_task_name:&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_task_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; for stream </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                        <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_task_name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                        <span class='kw'>return</span> <span class='id identifier rubyid_load_task_from_stream'>load_task_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
                    <span class='kw'>end</span>
                    <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rock_task_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(.*)\.</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
                <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream name (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>) does not follow the convention TASKNAME.PORTNAME and has no metadata, assuming as TASKNAME \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_task_name'>task_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='comment'>#check if there is a namespace
</span>    <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_task_name'>task_name</span> <span class='op'>==</span> <span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_task_name'>task_name</span><span class='rparen'>)</span>
                    <span class='id identifier rubyid_map_to_namespace'>map_to_namespace</span><span class='lparen'>(</span><span class='id identifier rubyid_task_name'>task_name</span><span class='rparen'>)</span>
                <span class='kw'>else</span>
                    <span class='id identifier rubyid_task_name'>task_name</span>
                <span class='kw'>end</span>

    <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_task_name'>task_name</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_task'>task</span>
        <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_task_name'>task_name</span><span class='rbracket'>]</span><span class='op'>=</span> <span class='const'><span class='object_link'><a href="TaskContext.html" title="Orocos::Log::TaskContext (class)">TaskContext</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="TaskContext.html#initialize-instance_method" title="Orocos::Log::TaskContext#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span><span class='id identifier rubyid_task_name'>task_name</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span><span class='ivar'>@log_config_file</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Guess the stream type if it&#39;s not stored in the file
</span>    <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_stream_type'>stream_type</span> <span class='op'>=</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rock_stream_type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='ivar'>@log_config_file</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_stream_type'>stream_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>property</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_stream_type'>stream_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>begin</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_add_stream'>add_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='id identifier rubyid_stream_type'>stream_type</span><span class='rparen'>)</span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    loading stream </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="InitializePortError.html" title="Orocos::Log::InitializePortError (class)">InitializePortError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_error'>error</span>
        <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    loading stream </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>) failed: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_error'>error</span><span class='embexpr_end'>}</span><span class='tstring_content'>. </span><span class='tstring_end'>&quot;</span></span>\
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Call the port for an error message.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_task'>task</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log_markers-instance_method">
  
    #<strong>log_markers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns an array of log_markers</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


829
830
831
832
833
834
835
836
837
838
839
840
841
842
843</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 829</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log_markers'>log_markers</span>
    <span class='ivar'>@markers</span> <span class='op'>||=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='kw'>return</span> <span class='ivar'>@markers</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@markers</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='id identifier rubyid_annotations'>annotations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_annotation'>annotation</span><span class='op'>|</span>
        <span class='comment'>#check if this is the right type
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_annotation'>annotation</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_type_name'>type_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/logger/Annotations</span><span class='tstring_end'>&quot;</span></span>
            <span class='ivar'>@markers</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='const'><span class='object_link'><a href="LogMarker.html" title="Orocos::Log::LogMarker (class)">LogMarker</a></span></span><span class='op'>::</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="LogMarker.html#parse-class_method" title="Orocos::Log::LogMarker.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_annotation'>annotation</span><span class='period'>.</span><span class='id identifier rubyid_samples'>samples</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@markers</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
        <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span>
    <span class='kw'>end</span>
    <span class='ivar'>@markers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="port_for-instance_method">
  
    #<strong>port_for</strong>(type_name, port_name, precise = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tries to find a OutputPort for a specefic data type. For port_name Regexp
is allowed. If precise is set to true an error will be raised if more than
one port is matching type_name and port_name.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 311</span>

<span class='kw'>def</span> <span class='id identifier rubyid_port_for'>port_for</span><span class='lparen'>(</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='id identifier rubyid_precise'>precise</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Log.html" title="Orocos::Log (module)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#port_for is deprecated. Use either #find_all_ports or #find_port</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_precise'>precise</span>
        <span class='id identifier rubyid_find_port'>find_port</span><span class='lparen'>(</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rparen'>)</span>
    <span class='kw'>else</span> <span class='id identifier rubyid_find_all_ports'>find_all_ports</span><span class='lparen'>(</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ports-instance_method">
  
    #<strong>ports</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all simulated ports</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


820
821
822
823
824
825
826</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 820</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ports'>ports</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_each_port'>each_port</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_port'>port</span><span class='op'>|</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_port'>port</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty_print-instance_method">
  
    #<strong>pretty_print</strong>(pp)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>pretty print for Replay</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pretty_print'>pretty_print</span><span class='lparen'>(</span><span class='id identifier rubyid_pp'>pp</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Orocos::Log::Replay</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_nest'>nest</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>replay speed = </span><span class='embexpr_beg'>#{</span><span class='ivar'>@speed</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Markers = </span><span class='embexpr_beg'>#{</span><span class='ivar'>@markers</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
        <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
            <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
            <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_pretty_print'>pretty_print</span><span class='lparen'>(</span><span class='id identifier rubyid_pp'>pp</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream Annotations:</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@annotations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span>
            <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
            <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_pretty_print'>pretty_print</span><span class='lparen'>(</span><span class='id identifier rubyid_pp'>pp</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_sample-instance_method">
  
    #<strong>push_sample</strong>(stream_idx, sample_info)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651
652
653
654
655
656
657
658</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 649</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_sample'>push_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='rparen'>)</span>
    <span class='comment'>#write sample to simulated ports or properties
</span>    <span class='id identifier rubyid_log_output'>log_output</span> <span class='op'>=</span> <span class='ivar'>@replayed_objects</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_log_output'>log_output</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_read_one_raw_data_sample'>read_one_raw_data_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_log_output'>log_output</span><span class='comma'>,</span><span class='const'>Typelib</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby'>to_ruby</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='op'>*</span><span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refresh-instance_method">
  
    #<strong>refresh</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>replays the last sample to the log port</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


896
897
898
899</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 896</span>

<span class='kw'>def</span> <span class='id identifier rubyid_refresh'>refresh</span>
    <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>=</span> <span class='ivar'>@current_sample</span>
    <span class='ivar'>@replayed_objects</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_tasks-instance_method">
  
    #<strong>register_tasks</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>registers all replayed log tasks on the local name server</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


471
472
473
474
475
476
477
478
479
480</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 471</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_tasks'>register_tasks</span>
    <span class='ivar'>@name_service</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../Local.html" title="Orocos::Local (module)">Local</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Local/NameService.html" title="Orocos::Local::NameService (class)">NameService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Local/NameService.html#initialize-instance_method" title="Orocos::Local::NameService#initialize (method)">new</a></span></span>
    <span class='ivar'>@name_service_async</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Async.html" title="Orocos::Async (module)">Async</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Async/Local.html" title="Orocos::Async::Local (module)">Local</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Async/Local/NameService.html" title="Orocos::Async::Local::NameService (class)">NameService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Async/Local/NameService.html#initialize-instance_method" title="Orocos::Async::Local::NameService#initialize (method)">new</a></span></span> <span class='symbol'>:tasks</span> <span class='op'>=&gt;</span> <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Async.html" title="Orocos::Async (module)">Async</a></span></span><span class='rparen'>)</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='ivar'>@name_service</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span> <span class='id identifier rubyid_task'>task</span>
        <span class='ivar'>@name_service_async</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span> <span class='id identifier rubyid_task'>task</span> <span class='kw'>if</span> <span class='ivar'>@name_service_async</span>
    <span class='kw'>end</span>
    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='id identifier rubyid_name_service'><span class='object_link'><a href="../../Orocos.html#name_service-class_method" title="Orocos.name_service (method)">name_service</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add'><span class='object_link'><a href="../NameService.html#add-instance_method" title="Orocos::NameService#add (method)">add</a></span></span> <span class='ivar'>@name_service</span>
    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Async.html" title="Orocos::Async (module)">Async</a></span></span><span class='period'>.</span><span class='id identifier rubyid_name_service'><span class='object_link'><a href="../Async.html#name_service-class_method" title="Orocos::Async.name_service (method)">name_service</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='ivar'>@name_service_async</span> <span class='kw'>if</span> <span class='ivar'>@name_service_async</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="replay?-instance_method">
  
    #<strong>replay?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns false if no ports are or will be replayed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 225</span>

<span class='kw'>def</span> <span class='id identifier rubyid_replay?'>replay?</span>
    <span class='comment'>#check if stream was initialized
</span>    <span class='kw'>if</span> <span class='ivar'>@stream</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_each_task'>each_task</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
            <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_used?'>used?</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_time_sync-instance_method">
  
    #<strong>reset_time_sync</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the simulated time. This should be called after the replay was
paused.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


529
530
531
532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 529</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_time_sync'>reset_time_sync</span>
    <span class='ivar'>@start_time</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@base_time</span>  <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@actual_speed</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@out_of_sync_delta</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewind-instance_method">
  
    #<strong>rewind</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rewinds all streams and replays the first sample.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677
678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 675</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rewind'>rewind</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
    <span class='id identifier rubyid_step'>step</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    #<strong>run</strong>(time_sync = false, speed = 1, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Runs through the log files until the end is reached.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


805
806
807
808
809
810</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 805</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span><span class='lparen'>(</span><span class='id identifier rubyid_time_sync'>time_sync</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span><span class='id identifier rubyid_speed'>speed</span><span class='op'>=</span><span class='int'>1</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_reset_time_sync'>reset_time_sync</span>
    <span class='ivar'>@speed</span> <span class='op'>=</span> <span class='id identifier rubyid_speed'>speed</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='id identifier rubyid_time_sync'>time_sync</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sample_index-instance_method">
  
    #<strong>sample_index</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current position of the replayed sample.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


858
859
860
861</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 858</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sample_index'>sample_index</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_sample_index'>sample_index</span> <span class='kw'>if</span> <span class='ivar'>@stream</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sample_index_for_time-instance_method">
  
    #<strong>sample_index_for_time</strong>(time)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261
262
263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 259</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sample_index_for_time'>sample_index_for_time</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_prev_pos'>prev_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_index'>sample_index</span>
    <span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_target_sample_pos'>target_sample_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_index'>sample_index</span>
    <span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_prev_pos'>prev_pos</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_target_sample_pos'>target_sample_pos</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seek-instance_method">
  
    #<strong>seek</strong>(pos)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Seeks to the given position</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 878</span>

<span class='kw'>def</span> <span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span>
    <span class='comment'>#check if stream was generated otherwise call align
</span>    <span class='id identifier rubyid_align'>align</span> <span class='kw'>if</span> <span class='ivar'>@stream</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='ivar'>@current_sample</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@current_sample</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'>#write all data to the ports
</span>    <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
            <span class='ivar'>@replayed_objects</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="single_data-instance_method">
  
    #<strong>single_data</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@stream</span>
        <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="size-instance_method">
  
    #<strong>size</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of samples.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


863
864
865</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 863</span>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
    <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="step-instance_method">
  
    #<strong>step</strong>(time_sync = false) {|reader, sample| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets the next sample, writes it to the ports which are connected to the
OutputPort and updates all its readers.</p>

<p>If a block is given it is called this the name of the replayed port.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>time_sync</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if true, the method will sleep as much time as required to match the time
delta in the file</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>reader</tt>, <tt>sample</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>reader</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data reader of the port from which the sample has been read</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data sample</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 610</span>

<span class='kw'>def</span> <span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='id identifier rubyid_time_sync'>time_sync</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='comment'>#check if stream was generated otherwise call align
</span>    <span class='kw'>if</span> <span class='ivar'>@stream</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_align'>align</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_stream_idx'>stream_idx</span>
        <span class='ivar'>@current_sample</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
    <span class='ivar'>@current_sample</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_calc_statistics'>calc_statistics</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>

    <span class='comment'>#wait if replay is faster than the desired speed and time_sync is set to true
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_time_sync'>time_sync</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@out_of_sync_delta</span> <span class='op'>&gt;</span> <span class='float'>0.001</span>
        <span class='kw'>if</span> <span class='ivar'>@process_qt_events</span> <span class='op'>==</span> <span class='kw'>true</span>
            <span class='id identifier rubyid_start_wait'>start_wait</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
            <span class='kw'>while</span> <span class='kw'>true</span>
                <span class='kw'>if</span> <span class='gvar'>$qApp</span>
                    <span class='gvar'>$qApp</span><span class='period'>.</span><span class='id identifier rubyid_processEvents'>processEvents</span><span class='lparen'>(</span><span class='rparen'>)</span>
                <span class='kw'>end</span>
                <span class='kw'>break</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@start_time</span>                           <span class='comment'>#break if start_time was reseted throuh processEvents
</span>                <span class='id identifier rubyid_wait'>wait</span> <span class='op'>=</span> <span class='ivar'>@out_of_sync_delta</span> <span class='op'>-</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='id identifier rubyid_start_wait'>start_wait</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_wait'>wait</span> <span class='op'>&gt;</span> <span class='float'>0.001</span>
                    <span class='id identifier rubyid_sleep'>sleep</span> <span class='lbracket'>[</span><span class='float'>0.01</span><span class='comma'>,</span><span class='id identifier rubyid_wait'>wait</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
                <span class='kw'>else</span>
                    <span class='kw'>break</span>
                <span class='kw'>end</span>
                <span class='id identifier rubyid_calc_statistics'>calc_statistics</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='ivar'>@out_of_sync_delta</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_push_sample'>push_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="step_back-instance_method">
  
    #<strong>step_back</strong>(time_sync = false, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets the previous sample and writes it to the ports which are connected to
the OutputPort and updated its readers (see step).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


662
663
664
665
666
667
668
669
670
671
672</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 662</span>

<span class='kw'>def</span> <span class='id identifier rubyid_step_back'>step_back</span><span class='lparen'>(</span><span class='id identifier rubyid_time_sync'>time_sync</span><span class='op'>=</span><span class='kw'>false</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='comment'>#check if stream was generated otherwise call start
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@stream</span>
        <span class='id identifier rubyid_align'>align</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='ivar'>@current_sample</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_step_back'>step_back</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@current_sample</span>
    <span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_push_sample'>push_sample</span><span class='lparen'>(</span><span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@current_sample</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_index_for_name-instance_method">
  
    #<strong>stream_index_for_name</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_index_for_name'>stream_index_for_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@stream</span>
        <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index_for_name'>stream_index_for_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_throw'>throw</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream is not initialized yet</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_index_for_type-instance_method">
  
    #<strong>stream_index_for_type</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


503
504
505
506
507
508</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 503</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_index_for_type'>stream_index_for_type</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@stream</span>
        <span class='kw'>return</span> <span class='ivar'>@stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index_for_type'>stream_index_for_type</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_throw'>throw</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream is not initialized yet</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_step?-instance_method">
  
    #<strong>sync_step?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns ture if the next sample must be replayed to meet synchronous replay</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568
569
570
571</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 564</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_step?'>sync_step?</span>
    <span class='id identifier rubyid_calc_statistics'>calc_statistics</span>
    <span class='kw'>if</span> <span class='ivar'>@out_of_sync_delta</span> <span class='op'>&gt;</span> <span class='float'>0.001</span>
        <span class='kw'>false</span>
    <span class='kw'>else</span>
        <span class='kw'>true</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="task-instance_method">
  
    #<strong>task</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the simulated task with the given namen.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 383</span>

<span class='kw'>def</span> <span class='id identifier rubyid_task'>task</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name2'>name2</span> <span class='op'>=</span> <span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot find TaskContext called </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_name2'>name2</span>
    <span class='kw'>return</span> <span class='ivar'>@tasks</span><span class='lbracket'>[</span><span class='id identifier rubyid_name2'>name2</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="task?-instance_method">
  
    #<strong>task?</strong>(name)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns true if a task with the given name exists</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 378</span>

<span class='kw'>def</span> <span class='id identifier rubyid_task?'>task?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tasks-instance_method">
  
    #<strong>tasks</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns an array of all simulated tasks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tasks'>tasks</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="time-instance_method">
  
    #<strong>time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the time of the current sample.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time'>time</span>
    <span class='ivar'>@base_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="time_source-instance_method">
  
    #<strong>time_source</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns where from the time used for alignment should be taken. It can be
one of</p>
<dl class="rdoc-list label-list"><dt>false
<dd>
<p>use the time at which the logger received the data (â€œlogical timeâ€)</p>
</dd><dt>:use_sample_time
<dd>
<p>for streams whose data contains a field called â€œtimeâ€ of type base/Time
(from Rock&#39;s base/types package), use the time contained in that field.
Otherwise, use the logical time.</p>
</dd></dl>

<p>See #use_sample_time, #use_sample_time=</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time_source'>time_source</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_use_sample_time'>use_sample_time</span>
        <span class='kw'>return</span> <span class='symbol'>:use_sample_time</span>
    <span class='kw'>else</span> <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="time_sync-instance_method">
  
    #<strong>time_sync</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>this can be used to set a different time sync logic the code block has
three parameters time = current sample time actual_delta = time between
start of replay and now required_delta = time which should have elapsed
between start and now to replay at the desired speed the code block must
return the number of seconds which the replay shall wait before the sample
is repalyed</p>

<p>Do not block the program otherwise qt events are no longer processed!!!</p>

<p>Example time_sync do |time,actual_delta,required_delta|</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_my_object'>my_object</span><span class='period'>.</span><span class='id identifier rubyid_busy?'>busy?</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556
557
558
559
560</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 552</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time_sync'>time_sync</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='ivar'>@time_sync_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
    <span class='kw'>else</span>
        <span class='ivar'>@time_sync_proc</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span><span class='id identifier rubyid_actual_delta'>actual_delta</span><span class='comma'>,</span><span class='id identifier rubyid_required_delta'>required_delta</span><span class='op'>|</span>
            <span class='id identifier rubyid_required_delta'>required_delta</span> <span class='op'>-</span> <span class='id identifier rubyid_actual_delta'>actual_delta</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="timestamp-instance_method">
  
    #<strong>timestamp</strong>(type_name, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Declares how the timestamp can be extracted out of values of a given type</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>use the &#39;time&#39; field in /base/samples/RigidBodyState as timestamp</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_replay'>replay</span><span class='period'>.</span><span class='id identifier rubyid_timestamp'>timestamp</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/base/samples/RigidBodyState</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rbs'>rbs</span><span class='op'>|</span>
  <span class='id identifier rubyid_rbs'>rbs</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timestamp'>timestamp</span><span class='lparen'>(</span><span class='id identifier rubyid_type_name'>type_name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_timestamps'>timestamps</span><span class='lbracket'>[</span><span class='id identifier rubyid_type_name'>type_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="track-instance_method">
  
    #<strong>track</strong>(value, filter = Hash.new)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If set to true all ports are replayed and are not filtered out by the
filter otherwise only ports are replayed which have a reader or a
connection to an other port</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/log/replay.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_track'>track</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span><span class='id identifier rubyid_filter'>filter</span><span class='op'>=</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='const'>Kernel</span><span class='op'>::</span><span class='id identifier rubyid_filter_options'>filter_options</span><span class='lparen'>(</span><span class='id identifier rubyid_filter'>filter</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='symbol'>:tasks</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@tasks</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
        <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_track'>track</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span><span class='id identifier rubyid_filter'>filter</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='symbol'>:tasks</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=~</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:tasks</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 22:10:24 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>