<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Orocos::RubyTasks::LocalOutputPort
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Orocos::RubyTasks::LocalOutputPort";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../RubyTasks.html" title="Orocos::RubyTasks (module)">RubyTasks</a></span></span>
     &raquo; 
    <span class="title">LocalOutputPort</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Orocos::RubyTasks::LocalOutputPort
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../OutputPort.html" title="Orocos::OutputPort (class)">OutputPort</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Port.html" title="Orocos::Port (class)">Port</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../OutputPort.html" title="Orocos::OutputPort (class)">OutputPort</a></span></li>
          
            <li class="next">Orocos::RubyTasks::LocalOutputPort</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/orocos/ruby_tasks/ports.rb<span class="defines">,<br />
  ext/rorocos/ruby_task_context.cc</span>
</dd>
  </dl>
  
</div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="../InputWriter.html" title="Orocos::InputWriter (class)">InputWriter</a></span></p>
</div>



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants inherited
     from <span class='object_link'><a href="../Port.html" title="Orocos::Port (class)">Port</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Port.html#CONNECTION_POLICY_OPTIONS-constant" title="Orocos::Port::CONNECTION_POLICY_OPTIONS (constant)">Port::CONNECTION_POLICY_OPTIONS</a></span>, <span class='object_link'><a href="../Port.html#DEFAULT_CONNECTION_POLICY-constant" title="Orocos::Port::DEFAULT_CONNECTION_POLICY (constant)">Port::DEFAULT_CONNECTION_POLICY</a></span>, <span class='object_link'><a href="../Port.html#MQ_RTT_DEFAULT_QUEUE_LENGTH-constant" title="Orocos::Port::MQ_RTT_DEFAULT_QUEUE_LENGTH (constant)">Port::MQ_RTT_DEFAULT_QUEUE_LENGTH</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../PortBase.html" title="Orocos::PortBase (module)">PortBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../PortBase.html#D_DIFFERENT_HOSTS-constant" title="Orocos::PortBase::D_DIFFERENT_HOSTS (constant)">PortBase::D_DIFFERENT_HOSTS</a></span>, <span class='object_link'><a href="../PortBase.html#D_SAME_HOST-constant" title="Orocos::PortBase::D_SAME_HOST (constant)">PortBase::D_SAME_HOST</a></span>, <span class='object_link'><a href="../PortBase.html#D_SAME_PROCESS-constant" title="Orocos::PortBase::D_SAME_PROCESS (constant)">PortBase::D_SAME_PROCESS</a></span>, <span class='object_link'><a href="../PortBase.html#D_UNKNOWN-constant" title="Orocos::PortBase::D_UNKNOWN (constant)">PortBase::D_UNKNOWN</a></span></p>




  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../PortBase.html" title="Orocos::PortBase (module)">PortBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../PortBase.html#model-instance_method" title="Orocos::PortBase#model (method)">#model</a></span>, <span class='object_link'><a href="../PortBase.html#name-instance_method" title="Orocos::PortBase#name (method)">#name</a></span>, <span class='object_link'><a href="../PortBase.html#orocos_type_name-instance_method" title="Orocos::PortBase#orocos_type_name (method)">#orocos_type_name</a></span>, <span class='object_link'><a href="../PortBase.html#task-instance_method" title="Orocos::PortBase#task (method)">#task</a></span>, <span class='object_link'><a href="../PortBase.html#type-instance_method" title="Orocos::PortBase#type (method)">#type</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected%3F-instance_method" title="#connected? (instance method)">#<strong>connected?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether the port seem to be connected to something.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_write-instance_method" title="#do_write (instance method)">#<strong>do_write</strong>(type_name, rb_typelib_value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove-instance_method" title="#remove (instance method)">#<strong>remove</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove this port from the underlying task context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(data)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write a sample on this output port.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../OutputPort.html" title="Orocos::OutputPort (class)">OutputPort</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../OutputPort.html#connect_to-instance_method" title="Orocos::OutputPort#connect_to (method)">#connect_to</a></span>, <span class='object_link'><a href="../OutputPort.html#disconnect_from-instance_method" title="Orocos::OutputPort#disconnect_from (method)">#disconnect_from</a></span>, <span class='object_link'><a href="../OutputPort.html#do_connect_to-instance_method" title="Orocos::OutputPort#do_connect_to (method)">#do_connect_to</a></span>, <span class='object_link'><a href="../OutputPort.html#pretty_print-instance_method" title="Orocos::OutputPort#pretty_print (method)">#pretty_print</a></span>, <span class='object_link'><a href="../OutputPort.html#publish_on_ros-instance_method" title="Orocos::OutputPort#publish_on_ros (method)">#publish_on_ros</a></span>, <span class='object_link'><a href="../OutputPort.html#reader_class-class_method" title="Orocos::OutputPort.reader_class (method)">reader_class</a></span>, <span class='object_link'><a href="../OutputPort.html#to_async-instance_method" title="Orocos::OutputPort#to_async (method)">#to_async</a></span>, <span class='object_link'><a href="../OutputPort.html#to_proxy-instance_method" title="Orocos::OutputPort#to_proxy (method)">#to_proxy</a></span>, <span class='object_link'><a href="../OutputPort.html#unpublish_from_ros-instance_method" title="Orocos::OutputPort#unpublish_from_ros (method)">#unpublish_from_ros</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../OutputPortBase.html" title="Orocos::OutputPortBase (module)">OutputPortBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../OutputPortBase.html#connect_to-instance_method" title="Orocos::OutputPortBase#connect_to (method)">#connect_to</a></span>, <span class='object_link'><a href="../OutputPortBase.html#disconnect_from-instance_method" title="Orocos::OutputPortBase#disconnect_from (method)">#disconnect_from</a></span>, <span class='object_link'><a href="../OutputPortBase.html#reader-instance_method" title="Orocos::OutputPortBase#reader (method)">#reader</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Port.html" title="Orocos::Port (class)">Port</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Port.html#create_stream-instance_method" title="Orocos::Port#create_stream (method)">#create_stream</a></span>, <span class='object_link'><a href="../Port.html#default_ros_topic_name-instance_method" title="Orocos::Port#default_ros_topic_name (method)">#default_ros_topic_name</a></span>, <span class='object_link'><a href="../Port.html#disconnect_all-instance_method" title="Orocos::Port#disconnect_all (method)">#disconnect_all</a></span>, <span class='object_link'><a href="../Port.html#do_create_stream-instance_method" title="Orocos::Port#do_create_stream (method)">#do_create_stream</a></span>, <span class='object_link'><a href="../Port.html#do_disconnect_all-instance_method" title="Orocos::Port#do_disconnect_all (method)">#do_disconnect_all</a></span>, <span class='object_link'><a href="../Port.html#do_disconnect_from-instance_method" title="Orocos::Port#do_disconnect_from (method)">#do_disconnect_from</a></span>, <span class='object_link'><a href="../Port.html#do_remove_stream-instance_method" title="Orocos::Port#do_remove_stream (method)">#do_remove_stream</a></span>, <span class='object_link'><a href="../Port.html#doc-instance_method" title="Orocos::Port#doc (method)">#doc</a></span>, <span class='object_link'><a href="../Port.html#doc%3F-instance_method" title="Orocos::Port#doc? (method)">#doc?</a></span>, <span class='object_link'><a href="../Port.html#handle_mq_transport-instance_method" title="Orocos::Port#handle_mq_transport (method)">#handle_mq_transport</a></span>, <span class='object_link'><a href="../Port.html#prepare_policy-class_method" title="Orocos::Port.prepare_policy (method)">prepare_policy</a></span>, <span class='object_link'><a href="../Port.html#pretty_print-instance_method" title="Orocos::Port#pretty_print (method)">#pretty_print</a></span>, <span class='object_link'><a href="../Port.html#refine_exceptions-instance_method" title="Orocos::Port#refine_exceptions (method)">#refine_exceptions</a></span>, <span class='object_link'><a href="../Port.html#remove_stream-instance_method" title="Orocos::Port#remove_stream (method)">#remove_stream</a></span>, <span class='object_link'><a href="../Port.html#to_orocos_port-instance_method" title="Orocos::Port#to_orocos_port (method)">#to_orocos_port</a></span>, <span class='object_link'><a href="../Port.html#transient_local_port_name-class_method" title="Orocos::Port.transient_local_port_name (method)">transient_local_port_name</a></span>, <span class='object_link'><a href="../Port.html#transport_name-class_method" title="Orocos::Port.transport_name (method)">transport_name</a></span>, <span class='object_link'><a href="../Port.html#type_name-instance_method" title="Orocos::Port#type_name (method)">#type_name</a></span>, <span class='object_link'><a href="../Port.html#validate_policy-class_method" title="Orocos::Port.validate_policy (method)">validate_policy</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../PortBase.html" title="Orocos::PortBase (module)">PortBase</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../PortBase.html#==-instance_method" title="Orocos::PortBase#== (method)">#==</a></span>, <span class='object_link'><a href="../PortBase.html#distance_to-instance_method" title="Orocos::PortBase#distance_to (method)">#distance_to</a></span>, <span class='object_link'><a href="../PortBase.html#ensure_type_available-instance_method" title="Orocos::PortBase#ensure_type_available (method)">#ensure_type_available</a></span>, <span class='object_link'><a href="../PortBase.html#full_name-instance_method" title="Orocos::PortBase#full_name (method)">#full_name</a></span>, <span class='object_link'><a href="../PortBase.html#initialize-instance_method" title="Orocos::PortBase#initialize (method)">#initialize</a></span>, <span class='object_link'><a href="../PortBase.html#log_metadata-instance_method" title="Orocos::PortBase#log_metadata (method)">#log_metadata</a></span>, <span class='object_link'><a href="../PortBase.html#max_marshalling_size-instance_method" title="Orocos::PortBase#max_marshalling_size (method)">#max_marshalling_size</a></span>, <span class='object_link'><a href="../PortBase.html#max_sizes-instance_method" title="Orocos::PortBase#max_sizes (method)">#max_sizes</a></span>, <span class='object_link'><a href="../PortBase.html#new_sample-instance_method" title="Orocos::PortBase#new_sample (method)">#new_sample</a></span>, <span class='object_link'><a href="../PortBase.html#to_s-instance_method" title="Orocos::PortBase#to_s (method)">#to_s</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="connected?-instance_method">
  
    #<strong>connected?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Whether the port seem to be connected to something</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/ruby_tasks/ports.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_connected?'>connected?</span>
    <span class='const'><span class='object_link'><a href="../../Orocos.html" title="Orocos (module)">Orocos</a></span></span><span class='period'>.</span><span class='id identifier rubyid_allow_blocking_calls'><span class='object_link'><a href="../../Orocos.html#allow_blocking_calls-class_method" title="Orocos.allow_blocking_calls (method)">allow_blocking_calls</a></span></span> <span class='kw'>do</span>
        <span class='kw'>super</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="do_write-instance_method">
  
    #<strong>do_write</strong>(type_name, rb_typelib_value)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/rorocos/ruby_task_context.cc', line 396</span>

static VALUE local_output_port_write(VALUE _local_port, VALUE type_name, VALUE rb_typelib_value)
{
    RTT::base::OutputPortInterface&amp; local_port = get_wrapped&lt;RTT::base::OutputPortInterface&gt;(_local_port);
    Typelib::Value value = typelib_get(rb_typelib_value);

    orogen_transports::TypelibMarshallerBase* transport = 0;
    RTT::types::TypeInfo* ti = get_type_info(StringValuePtr(type_name));
    if (ti &amp;&amp; ti-&gt;hasProtocol(orogen_transports::TYPELIB_MARSHALLER_ID))
    {
        transport =
            dynamic_cast&lt;orogen_transports::TypelibMarshallerBase*&gt;(ti-&gt;getProtocol(orogen_transports::TYPELIB_MARSHALLER_ID));
    }

    if (!transport)
    {
        RTT::base::DataSourceBase::shared_ptr ds =
            ti-&gt;buildReference(value.getData());
        local_port.write(ds);
    }
    else
    {
        orogen_transports::TypelibMarshallerBase::Handle* handle =
            transport-&gt;createHandle();

        transport-&gt;setTypelibSample(handle, static_cast&lt;uint8_t*&gt;(value.getData()));
        RTT::base::DataSourceBase::shared_ptr ds =
            transport-&gt;getDataSource(handle);
        local_port.write(ds);
        transport-&gt;deleteHandle(handle);
    }
    return local_port.connected() ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove-instance_method">
  
    #<strong>remove</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove this port from the underlying task context</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/ruby_tasks/ports.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove'>remove</span>
    <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_remove_port'>remove_port</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write-instance_method">
  
    #<strong>write</strong>(data)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write a sample on this output port</p>

<p>If the data type is a struct, the sample can be provided either as a
Typelib instance object or as a hash.</p>

<p>In the first case, one can do:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_port'>port</span><span class='period'>.</span><span class='id identifier rubyid_new_sample'>new_sample</span> <span class='comment'># Get a new sample from the port
</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_field'>field</span> <span class='op'>=</span> <span class='int'>10</span>
<span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_other_field'>other_field</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a_string</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_input_writer'>input_writer</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
</code></pre>

<p>In the second case,</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_input_writer'>input_writer</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='symbol'>:field</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='comma'>,</span> <span class='symbol'>:other_field</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a_string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/orocos/ruby_tasks/ports.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>Typelib</span><span class='period'>.</span><span class='id identifier rubyid_from_ruby'>from_ruby</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_do_write'>do_write</span><span class='lparen'>(</span><span class='id identifier rubyid_orocos_type_name'>orocos_type_name</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Apr 10 22:10:29 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>