<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Pocolog::StreamAligner
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Pocolog::StreamAligner";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span>
     &raquo; 
    <span class="title">StreamAligner</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Pocolog::StreamAligner
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Pocolog::StreamAligner</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pocolog/stream_aligner.rb</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="StreamAligner/IndexEntry.html" title="Pocolog::StreamAligner::IndexEntry (class)">IndexEntry</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_time-instance_method" title="#base_time (instance method)">#<strong>base_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute base_time.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_index-instance_method" title="#full_index (instance method)">#<strong>full_index</strong>  &#x21d2; Array&lt;IndexEntry&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The full aligned index.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#global_pos_first_sample-instance_method" title="#global_pos_first_sample (instance method)">#<strong>global_pos_first_sample</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A per-stream mapping from the stream index to the global position of the
last of this stream&#39;s samples.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#global_pos_last_sample-instance_method" title="#global_pos_last_sample (instance method)">#<strong>global_pos_last_sample</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A per-stream mapping from the stream index to the global position of the
first of this stream&#39;s samples.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#interval_lg-instance_method" title="#interval_lg (instance method)">#<strong>interval_lg</strong>  &#x21d2; (Time,Time) </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The time of the first and last samples in the stream, in logical time.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sample_index-instance_method" title="#sample_index (instance method)">#<strong>sample_index</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The index of the current sample.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of samples one can get out of this stream aligner.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#streams-instance_method" title="#streams (instance method)">#<strong>streams</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute streams.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_rt-instance_method" title="#use_rt (instance method)">#<strong>use_rt</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute use_rt.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_sample_time-instance_method" title="#use_sample_time (instance method)">#<strong>use_sample_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute use_sample_time.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_streams-instance_method" title="#add_streams (instance method)">#<strong>add_streams</strong>(*streams)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add new streams to the alignment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#advance-instance_method" title="#advance (instance method)">#<strong>advance</strong>  &#x21d2; (Integer,Time) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Advances one step in the joint stream, and returns the index of the update
stream as well as the time but does not decode the data sample_index like
<span class='object_link'><a href="#step-instance_method" title="Pocolog::StreamAligner#step (method)">#step</a></span> or <span class='object_link'><a href="#next-instance_method" title="Pocolog::StreamAligner#next (method)">#next</a></span> does.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_samples-instance_method" title="#count_samples (instance method)">#<strong>count_samples</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provided for backward compatibility only.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">#<strong>each</strong>(do_rewind = true) {|stream_idx, time, sample| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerate all samples in this stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether there are no samples in the aligner.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eof%3F-instance_method" title="#eof? (instance method)">#<strong>eof?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tests whether reading the next sample will return something.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#export_to_file-instance_method" title="#export_to_file (instance method)">#<strong>export_to_file</strong>(file, start_index = 0, end_index = size, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>exports all streams to a new log file if no start and end index is given
all data are exported otherwise the data are truncated according to the
given global indexes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_first_stream_sample_after-instance_method" title="#find_first_stream_sample_after (instance method)">#<strong>find_first_stream_sample_after</strong>(position_global, stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the stream-local index of the first sample strictly after the
sample at the given global position.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_first_stream_sample_at_or_after-instance_method" title="#find_first_stream_sample_at_or_after (instance method)">#<strong>find_first_stream_sample_at_or_after</strong>(position_global, stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the stream-local index of the first sample that is either at or
just after the given global position.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#first_sample_pos-instance_method" title="#first_sample_pos (instance method)">#<strong>first_sample_pos</strong>(stream)  &#x21d2; nil, Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the global sample position of the first sample of the given stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(use_rt = false, *streams)  &#x21d2; StreamAligner </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of StreamAligner.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_sample_pos-instance_method" title="#last_sample_pos (instance method)">#<strong>last_sample_pos</strong>(stream)  &#x21d2; nil, Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the global sample position of the last sample of the given stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-instance_method" title="#next (instance method)">#<strong>next</strong>  &#x21d2; (Time,Time,(Integer,Typelib::Type))<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defined for compatibility with DataStream#next.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty_print-instance_method" title="#pretty_print (instance method)">#<strong>pretty_print</strong>(pp)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#previous-instance_method" title="#previous (instance method)">#<strong>previous</strong>  &#x21d2; (Time,Time,(Integer,Typelib::Type))<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Defined for compatibility with DataStream#previous.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#raw_each-instance_method" title="#raw_each (instance method)">#<strong>raw_each</strong>(do_rewind = true) {|stream_idx, time, sample| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enumerate all samples in this stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_streams-instance_method" title="#remove_streams (instance method)">#<strong>remove_streams</strong>(*streams)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove the given streams in the stream aligner.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">#<strong>rewind</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rewinds the stream aligner to the position before the first sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sample_info-instance_method" title="#sample_info (instance method)">#<strong>sample_info</strong>(stream_idx)  &#x21d2; (DataStream,Integer)<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the information necessary to read a stream&#39;s sample later.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seek-instance_method" title="#seek (instance method)">#<strong>seek</strong>(pos, read_data = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seek at the given position or time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seek_to_index_entry-instance_method" title="#seek_to_index_entry (instance method)">#<strong>seek_to_index_entry</strong>(entry, read_data = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>This is a private helper for <span class='object_link'><a href="#seek_to_time-instance_method" title="Pocolog::StreamAligner#seek_to_time (method)">#seek_to_time</a></span> and <span class='object_link'><a href="#seek_to_pos-instance_method" title="Pocolog::StreamAligner#seek_to_pos (method)">#seek_to_pos</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seek_to_pos-instance_method" title="#seek_to_pos (instance method)">#<strong>seek_to_pos</strong>(pos, read_data = true)  &#x21d2; (Integer,Time[,Typelib::Type]) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seeks to the sample whose global position is pos.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#seek_to_time-instance_method" title="#seek_to_time (instance method)">#<strong>seek_to_time</strong>(time, read_data = true)  &#x21d2; (Integer,Time[,Typelib::Type]) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seek to the first sample after the given time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_data-instance_method" title="#single_data (instance method)">#<strong>single_data</strong>(index, sample = nil)  &#x21d2; Object<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current data sample for the given stream index note stream
index is the index of the data stream, not the search index !.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_raw_data-instance_method" title="#single_raw_data (instance method)">#<strong>single_raw_data</strong>(index, sample = nil)  &#x21d2; Typelib::Type </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current raw data sample for the given stream index note stream
index is the index of the data stream, not the search index !.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#step-instance_method" title="#step (instance method)">#<strong>step</strong>  &#x21d2; (Integer,Time,Typelib::Type) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Advances one step in the joint stream, and returns the index of the updated
stream as well as the time and the data sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#step_back-instance_method" title="#step_back (instance method)">#<strong>step_back</strong>  &#x21d2; (Integer,Time,Typelib::Type) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Decrements one step in the joint stream, an returns the index of the
updated stream, its time as well as the sample data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_by_index-instance_method" title="#stream_by_index (instance method)">#<strong>stream_by_index</strong>(stream_idx)  &#x21d2; DataStream </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the stream object at the given stream index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_index_for_name-instance_method" title="#stream_index_for_name (instance method)">#<strong>stream_index_for_name</strong>(name)  &#x21d2; Integer<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the stream index of the stream with this name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_index_for_stream-instance_method" title="#stream_index_for_stream (instance method)">#<strong>stream_index_for_stream</strong>(stream)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the stream index for the given stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_index_for_type-instance_method" title="#stream_index_for_type (instance method)">#<strong>stream_index_for_type</strong>(type)  &#x21d2; Integer<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the stream index of the stream whose type has this name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time-instance_method" title="#time (instance method)">#<strong>time</strong>  &#x21d2; Time </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the time of the last played back sample.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_interval-instance_method" title="#time_interval (instance method)">#<strong>time_interval</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_interval_lg-instance_method" title="#update_interval_lg (instance method)">#<strong>update_interval_lg</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Update <span class='object_link'><a href="#interval_lg-instance_method" title="Pocolog::StreamAligner#interval_lg (method)">#interval_lg</a></span> based on the information currently in <span class='object_link'><a href="#full_index-instance_method" title="Pocolog::StreamAligner#full_index (method)">#full_index</a></span>.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(use_rt = false, *streams)  &#x21d2; <tt><span class='object_link'><a href="" title="Pocolog::StreamAligner (class)">StreamAligner</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of StreamAligner</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_use_rt'>use_rt</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_streams'>streams</span><span class='rparen'>)</span>
    <span class='ivar'>@use_sample_time</span> <span class='op'>=</span> <span class='id identifier rubyid_use_rt'>use_rt</span> <span class='op'>==</span> <span class='symbol'>:use_sample_time</span>
    <span class='ivar'>@use_rt</span>  <span class='op'>=</span> <span class='id identifier rubyid_use_rt'>use_rt</span>
    <span class='ivar'>@global_pos_first_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@global_pos_last_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='ivar'>@size</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@interval_lg</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@base_time</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@stream_state</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@streams</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id identifier rubyid_add_streams'>add_streams</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_streams'>streams</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="base_time-instance_method">
  
    #<strong>base_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute base_time</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 6</span>

<span class='kw'>def</span> <span class='id identifier rubyid_base_time'>base_time</span>
  <span class='ivar'>@base_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="full_index-instance_method">
  
    #<strong>full_index</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="StreamAligner/IndexEntry.html" title="Pocolog::StreamAligner::IndexEntry (class)">IndexEntry</a></span>&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The full aligned index</p>

<p>This is a mapping from a global position in the aligned stream to
information about the sample at that stream</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="StreamAligner/IndexEntry.html" title="Pocolog::StreamAligner::IndexEntry (class)">IndexEntry</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_index'>full_index</span>
  <span class='ivar'>@full_index</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="global_pos_first_sample-instance_method">
  
    #<strong>global_pos_first_sample</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A per-stream mapping from the stream index to the global position of the
last of this stream&#39;s samples</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#first_sample_pos-instance_method" title="Pocolog::StreamAligner#first_sample_pos (method)">#first_sample_pos</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_global_pos_first_sample'>global_pos_first_sample</span>
  <span class='ivar'>@global_pos_first_sample</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="global_pos_last_sample-instance_method">
  
    #<strong>global_pos_last_sample</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A per-stream mapping from the stream index to the global position of the
first of this stream&#39;s samples</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#last_sample_pos-instance_method" title="Pocolog::StreamAligner#last_sample_pos (method)">#last_sample_pos</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_global_pos_last_sample'>global_pos_last_sample</span>
  <span class='ivar'>@global_pos_last_sample</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="interval_lg-instance_method">
  
    #<strong>interval_lg</strong>  &#x21d2; <tt>(Time,Time)</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The time of the first and last samples in the stream, in logical time</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Time,Time)</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interval_lg'>interval_lg</span>
  <span class='ivar'>@interval_lg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="sample_index-instance_method">
  
    #<strong>sample_index</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The index of the current sample</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sample_index'>sample_index</span>
  <span class='ivar'>@sample_index</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="size-instance_method">
  
    #<strong>size</strong>  &#x21d2; <tt>Integer</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of samples one can get out of this stream aligner</p>

<p>This is the sum of samples available on each of the underlying streams</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
  <span class='ivar'>@size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="streams-instance_method">
  
    #<strong>streams</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute streams</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_streams'>streams</span>
  <span class='ivar'>@streams</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="use_rt-instance_method">
  
    #<strong>use_rt</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute use_rt</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 3</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use_rt'>use_rt</span>
  <span class='ivar'>@use_rt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="use_sample_time-instance_method">
  
    #<strong>use_sample_time</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute use_sample_time</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 4</span>

<span class='kw'>def</span> <span class='id identifier rubyid_use_sample_time'>use_sample_time</span>
  <span class='ivar'>@use_sample_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_streams-instance_method">
  
    #<strong>add_streams</strong>(*streams)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add new streams to the alignment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_streams'>add_streams</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_streams'>streams</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>!=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_eof?'>eof?</span>
            <span class='id identifier rubyid_eof'>eof</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_sample_index'>sample_index</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_streams_size'>streams_size</span> <span class='op'>=</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_stream'>stream</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>+</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_size'>size</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='ivar'>@size</span> <span class='op'>+=</span> <span class='id identifier rubyid_streams_size'>streams_size</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adding </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> streams with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_streams_size'>streams_size</span><span class='embexpr_end'>}</span><span class='tstring_content'> samples</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_tic'>tic</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_base_time'>base_time</span>
        <span class='ivar'>@base_time</span> <span class='op'>=</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='period'>.</span><span class='id identifier rubyid_base_time'>base_time</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_sort_index'>sort_index</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_all_streams'>all_streams</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='ivar'>@streams</span> <span class='op'>+</span> <span class='id identifier rubyid_streams'>streams</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_base_time'>base_time</span>
        <span class='id identifier rubyid_all_streams'>all_streams</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='period'>.</span><span class='id identifier rubyid_base_time'>base_time</span> <span class='op'>=</span> <span class='id identifier rubyid_base_time'>base_time</span>
            <span class='kw'>for</span> <span class='id identifier rubyid_entry'>entry</span> <span class='kw'>in</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='period'>.</span><span class='id identifier rubyid_index_map'>index_map</span>
                <span class='id identifier rubyid_sort_index'>sort_index</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_entry'>entry</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>concatenated indexes in </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='id identifier rubyid_tic'>tic</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> seconds</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_tic'>tic</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
    <span class='id identifier rubyid_sort_index'>sort_index</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>

    <span class='ivar'>@global_pos_first_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@global_pos_last_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_current_positions'>current_positions</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_all_streams'>all_streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='ivar'>@full_index</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_position_global'>position_global</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>for</span> <span class='id identifier rubyid_sort_code'>sort_code</span> <span class='kw'>in</span> <span class='id identifier rubyid_sort_index'>sort_index</span>
        <span class='id identifier rubyid_time'>time</span>         <span class='op'>=</span> <span class='id identifier rubyid_sort_code'>sort_code</span> <span class='op'>/</span> <span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_stream_index'>stream_index</span> <span class='op'>=</span> <span class='id identifier rubyid_sort_code'>sort_code</span> <span class='op'>%</span> <span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_position_in_stream'>position_in_stream</span> <span class='op'>=</span> <span class='id identifier rubyid_current_positions'>current_positions</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_current_positions'>current_positions</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_position_in_stream'>position_in_stream</span> <span class='op'>+</span> <span class='int'>1</span>

        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="StreamAligner/IndexEntry.html" title="Pocolog::StreamAligner::IndexEntry (class)">IndexEntry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Pocolog::StreamAligner#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_index'>stream_index</span><span class='comma'>,</span> <span class='id identifier rubyid_position_in_stream'>position_in_stream</span><span class='comma'>,</span> <span class='id identifier rubyid_position_global'>position_global</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_global_pos_first_sample'>global_pos_first_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_position_global'>position_global</span>
        <span class='id identifier rubyid_global_pos_last_sample'>global_pos_last_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_position_global'>position_global</span>
        <span class='ivar'>@full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_position_global'>position_global</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>
        <span class='id identifier rubyid_position_global'>position_global</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='ivar'>@streams</span> <span class='op'>=</span> <span class='id identifier rubyid_all_streams'>all_streams</span>
    <span class='id identifier rubyid_update_interval_lg'>update_interval_lg</span>
    <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>built full index in </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>-</span> <span class='id identifier rubyid_tic'>tic</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> seconds</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>if</span> <span class='id identifier rubyid_current_entry'>current_entry</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='ivar'>@full_index</span><span class='period'>.</span>
            <span class='id identifier rubyid_index'>index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
                <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>==</span> <span class='id identifier rubyid_current_entry'>current_entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>&amp;&amp;</span>
                    <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span> <span class='op'>==</span> <span class='id identifier rubyid_current_entry'>current_entry</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span>
            <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_eof'>eof</span>
            <span class='id identifier rubyid_step'>step</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="advance-instance_method">
  
    #<strong>advance</strong>  &#x21d2; <tt>(Integer,Time)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Advances one step in the joint stream, and returns the index of the update
stream as well as the time but does not decode the data sample_index like
<span class='object_link'><a href="#step-instance_method" title="Pocolog::StreamAligner#step (method)">#step</a></span> or <span class='object_link'><a href="#next-instance_method" title="Pocolog::StreamAligner#next (method)">#next</a></span> does</p>

<p>The associated data sample can then be retrieved by single_data(stream_idx)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Time)</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#step-instance_method" title="Pocolog::StreamAligner#step (method)">#step</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403
404
405
406
407
408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 401</span>

<span class='kw'>def</span> <span class='id identifier rubyid_advance'>advance</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_eof?'>eof?</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_seek_to_pos'>seek_to_pos</span><span class='lparen'>(</span><span class='ivar'>@sample_index</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_samples-instance_method">
  
    #<strong>count_samples</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Provided for backward compatibility only</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count_samples'>count_samples</span>
    <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>StreamAligner#count_samples is deprecated. Use #size instead</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="each-instance_method">
  
    #<strong>each</strong>(do_rewind = true) {|stream_idx, time, sample| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enumerate all samples in this stream</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>do_rewind</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether <span class='object_link'><a href="#rewind-instance_method" title="Pocolog::StreamAligner#rewind (method)">#rewind</a></span> should be called first</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>stream_idx</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream in which the sample is contained</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream time</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the sample itself</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


670
671
672
673
674
675
676</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 670</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='id identifier rubyid_do_rewind'>do_rewind</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_do_rewind'>do_rewind</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

    <span class='id identifier rubyid_raw_each'>raw_each</span><span class='lparen'>(</span><span class='id identifier rubyid_do_rewind'>do_rewind</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_raw_sample'>raw_sample</span><span class='op'>|</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='const'>Typelib</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby'>to_ruby</span><span class='lparen'>(</span><span class='id identifier rubyid_raw_sample'>raw_sample</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty?-instance_method">
  
    #<strong>empty?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Whether there are no samples in the aligner</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eof?-instance_method">
  
    #<strong>eof?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tests whether reading the next sample will return something</p>

<p>If <span class='object_link'><a href="#eof%3F-instance_method" title="Pocolog::StreamAligner#eof? (method)">#eof?</a></span> returns true, <span class='object_link'><a href="#advance-instance_method" title="Pocolog::StreamAligner#advance (method)">#advance</a></span> and <span class='object_link'><a href="#step-instance_method" title="Pocolog::StreamAligner#step (method)">#step</a></span> are guaranteed to return nil
if called.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eof?'>eof?</span>
    <span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="export_to_file-instance_method">
  
    #<strong>export_to_file</strong>(file, start_index = 0, end_index = size, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>exports all streams to a new log file if no start and end index is given
all data are exported otherwise the data are truncated according to the
given global indexes</p>

<p>the block is called for each sample to update a custom progress bar if the
block returns 1 the export is canceled</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_export_to_file'>export_to_file</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='comma'>,</span><span class='id identifier rubyid_start_index'>start_index</span><span class='op'>=</span><span class='int'>0</span><span class='comma'>,</span><span class='id identifier rubyid_end_index'>end_index</span><span class='op'>=</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Logfiles.html" title="Pocolog::Logfiles (class)">Logfiles</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="Logfiles.html#create-class_method" title="Pocolog::Logfiles.create (method)">create</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
        <span class='id identifier rubyid_stream_start_index'>stream_start_index</span> <span class='op'>=</span> <span class='id identifier rubyid_first_sample_pos'>first_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_stream_end_index'>stream_end_index</span>  <span class='op'>=</span> <span class='id identifier rubyid_last_sample_pos'>last_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span>
        <span class='comment'># Ignore the stream if it is empty
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_stream_start_index'>stream_start_index</span>
        <span class='comment'># Ignore the stream if there are no samples intersecting with
</span>        <span class='comment'># the required interval
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_index'>start_index</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_stream_end_index'>stream_end_index</span> <span class='op'>||</span> <span class='id identifier rubyid_end_index'>end_index</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_stream_start_index'>stream_start_index</span>

        <span class='id identifier rubyid_stream_start_index'>stream_start_index</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_start_index'>start_index</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_start_index'>stream_start_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
        <span class='id identifier rubyid_stream_end_index'>stream_end_index</span>   <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_end_index'>end_index</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_end_index'>stream_end_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>

        <span class='id identifier rubyid_first_stream_pos'>first_stream_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_find_first_stream_sample_at_or_after'>find_first_stream_sample_at_or_after</span><span class='lparen'>(</span>
            <span class='id identifier rubyid_stream_start_index'>stream_start_index</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_last_stream_pos'>last_stream_pos</span>  <span class='op'>=</span> <span class='id identifier rubyid_find_first_stream_sample_at_or_after'>find_first_stream_sample_at_or_after</span><span class='lparen'>(</span>
            <span class='id identifier rubyid_stream_end_index'>stream_end_index</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_first_stream_pos'>first_stream_pos</span> <span class='op'>==</span> <span class='id identifier rubyid_last_stream_pos'>last_stream_pos</span>

        <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_number_of_samples'>number_of_samples</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_end_index'>stream_end_index</span><span class='op'>-</span><span class='id identifier rubyid_stream_start_index'>stream_start_index</span><span class='op'>+</span><span class='int'>1</span>
        <span class='id identifier rubyid_stream_output'>stream_output</span> <span class='op'>=</span> <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_create_stream'>create_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_copy_to'>copy_to</span><span class='lparen'>(</span><span class='id identifier rubyid_first_stream_pos'>first_stream_pos</span><span class='comma'>,</span><span class='id identifier rubyid_last_stream_pos'>last_stream_pos</span><span class='comma'>,</span><span class='id identifier rubyid_stream_output'>stream_output</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span>
                <span class='id identifier rubyid_index'>index</span> <span class='op'>+=</span><span class='int'>1</span>
                <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span><span class='id identifier rubyid_number_of_samples'>number_of_samples</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_result'>result</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_first_stream_sample_after-instance_method">
  
    #<strong>find_first_stream_sample_after</strong>(position_global, stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the stream-local index of the first sample strictly after the
sample at the given global position</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>position_global</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a global position</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stream</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data stream</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 523</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_first_stream_sample_after'>find_first_stream_sample_after</span><span class='lparen'>(</span><span class='id identifier rubyid_position_global'>position_global</span><span class='comma'>,</span> <span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_position_global'>position_global</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_index_for_stream'>stream_index_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>

    <span class='comment'># First things first, if entry is a sample of stream, we just have
</span>    <span class='comment'># to go forward by one
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>==</span> <span class='id identifier rubyid_stream_number'>stream_number</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span> <span class='op'>+</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='comment'># Otherwise, we need to search in the stream
</span>    <span class='id identifier rubyid_time'>time</span>  <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span>
    <span class='id identifier rubyid_search_pos'>search_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='period'>.</span><span class='id identifier rubyid_sample_number_by_internal_time'>sample_number_by_internal_time</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_search_pos'>search_pos</span> <span class='op'>==</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_search_pos'>search_pos</span>
    <span class='kw'>end</span>

    <span class='comment'># If the sample we found has the same time than the entry at
</span>    <span class='comment'># position_global, We now have to figure out whether it is before or
</span>    <span class='comment'># after position global
</span>    <span class='comment'>#
</span>    <span class='comment'># We do a linear search in all samples that have the same time than
</span>    <span class='comment'># the reference time. This basically assumes that you don&#39;t have a
</span>    <span class='comment'># million samples with the same time. I believe it fair.
</span>    <span class='id identifier rubyid_search_time'>search_time</span> <span class='op'>=</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='period'>.</span><span class='id identifier rubyid_internal_time_by_sample_number'>internal_time_by_sample_number</span><span class='lparen'>(</span><span class='id identifier rubyid_search_pos'>search_pos</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_search_time'>search_time</span> <span class='op'>!=</span> <span class='id identifier rubyid_time'>time</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_search_pos'>search_pos</span>
    <span class='kw'>end</span>

    <span class='kw'>while</span> <span class='id identifier rubyid_entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span> <span class='op'>==</span> <span class='id identifier rubyid_time'>time</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>==</span> <span class='id identifier rubyid_stream_number'>stream_number</span>
            <span class='kw'>return</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_position_global'>position_global</span> <span class='op'>+=</span> <span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_search_pos'>search_pos</span> <span class='op'>+</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_first_stream_sample_at_or_after-instance_method">
  
    #<strong>find_first_stream_sample_at_or_after</strong>(position_global, stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the stream-local index of the first sample that is either at or
just after the given global position</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>position_global</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a global position</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stream</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the data stream</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


505
506
507
508
509
510
511
512
513
514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 505</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_first_stream_sample_at_or_after'>find_first_stream_sample_at_or_after</span><span class='lparen'>(</span><span class='id identifier rubyid_position_global'>position_global</span><span class='comma'>,</span> <span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_position_global'>position_global</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_index_for_stream'>stream_index_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>==</span> <span class='id identifier rubyid_stream_number'>stream_number</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_find_first_stream_sample_after'>find_first_stream_sample_after</span><span class='lparen'>(</span><span class='id identifier rubyid_position_global'>position_global</span><span class='comma'>,</span> <span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="first_sample_pos-instance_method">
  
    #<strong>first_sample_pos</strong>(stream)  &#x21d2; <tt>nil</tt>, <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the global sample position of the first sample of the given stream</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>the</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>stream</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>, <tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 577</span>

<span class='kw'>def</span> <span class='id identifier rubyid_first_sample_pos'>first_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_stream_index_from_stream'>validate_stream_index_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@global_pos_first_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_sample_pos-instance_method">
  
    #<strong>last_sample_pos</strong>(stream)  &#x21d2; <tt>nil</tt>, <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the global sample position of the last sample of the given stream</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>the</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>stream</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>, <tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


589
590
591
592
593
594</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 589</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_sample_pos'>last_sample_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='id identifier rubyid_validate_stream_index_from_stream'>validate_stream_index_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@global_pos_last_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream'>stream</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next-instance_method">
  
    #<strong>next</strong>  &#x21d2; <tt>(Time,Time,(Integer,Typelib::Type))</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defined for compatibility with DataStream#next</p>

<p>Goes one sample further and returns the sample&#39;s logical and real times
as well as the stream index and the sample data</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Time,Time,(Integer,Typelib::Type))</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 429</span>

<span class='kw'>def</span> <span class='kw'>next</span>
    <span class='id identifier rubyid_stream_index'>stream_index</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_step'>step</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream_index'>stream_index</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pretty_print-instance_method">
  
    #<strong>pretty_print</strong>(pp)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


449
450
451
452
453
454
455
456
457
458</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 449</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pretty_print'>pretty_print</span><span class='lparen'>(</span><span class='id identifier rubyid_pp'>pp</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Stream aligner with </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> streams and </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> samples</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_nest'>nest</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_breakable'>breakable</span>
        <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_seplist'>seplist</span><span class='lparen'>(</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
            <span class='id identifier rubyid_pp'>pp</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>] </span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_pretty_print'>pretty_print</span><span class='lparen'>(</span><span class='id identifier rubyid_pp'>pp</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="previous-instance_method">
  
    #<strong>previous</strong>  &#x21d2; <tt>(Time,Time,(Integer,Typelib::Type))</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Defined for compatibility with DataStream#previous</p>

<p>Goes back one sample and returns the sample&#39;s logical and real times as
well as the stream index and the sample data</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Time,Time,(Integer,Typelib::Type))</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


442
443
444
445
446
447</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 442</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previous'>previous</span>
    <span class='id identifier rubyid_stream_index'>stream_index</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_step_back'>step_back</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream_index'>stream_index</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="raw_each-instance_method">
  
    #<strong>raw_each</strong>(do_rewind = true) {|stream_idx, time, sample| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Enumerate all samples in this stream</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>do_rewind</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether <span class='object_link'><a href="#rewind-instance_method" title="Pocolog::StreamAligner#rewind (method)">#rewind</a></span> should be called first</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>stream_idx</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream in which the sample is contained</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream time</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the sample itself</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


654
655
656
657
658
659
660
661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 654</span>

<span class='kw'>def</span> <span class='id identifier rubyid_raw_each'>raw_each</span><span class='lparen'>(</span><span class='id identifier rubyid_do_rewind'>do_rewind</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_enum_for'>enum_for</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_do_rewind'>do_rewind</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

    <span class='id identifier rubyid_rewind'>rewind</span> <span class='kw'>if</span> <span class='id identifier rubyid_do_rewind'>do_rewind</span>
    <span class='kw'>while</span> <span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_advance'>advance</span><span class='rparen'>)</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_single_raw_data'>single_raw_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_streams-instance_method">
  
    #<strong>remove_streams</strong>(*streams)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove the given streams in the stream aligner</p>

<p>The index-to-stream mapping changes after this. Refer to <span class='object_link'><a href="#streams-instance_method" title="Pocolog::StreamAligner#streams (method)">#streams</a></span> to map
indexes to streams</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_streams'>remove_streams</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_streams'>streams</span><span class='rparen'>)</span>
    <span class='comment'># First, build a map of the current stream indexes to the new
</span>    <span class='comment'># stream indexes
</span>    <span class='id identifier rubyid_stream_indexes'>stream_indexes</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_for_removal'>for_removal</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
        <span class='id identifier rubyid_s_index'>s_index</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_index_for_stream'>stream_index_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_stream_indexes'>stream_indexes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s_index'>s_index</span>
        <span class='id identifier rubyid_for_removal'>for_removal</span><span class='lbracket'>[</span><span class='id identifier rubyid_s_index'>s_index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_index_map'>index_map</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_new_index'>new_index</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_for_removal'>for_removal</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_index_map'>index_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_index_map'>index_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_index'>stream_index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_new_index'>new_index</span>
            <span class='id identifier rubyid_new_index'>new_index</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_eof?'>eof?</span>
        <span class='id identifier rubyid_eof'>eof</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>!=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_sample_index'>sample_index</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_changed_sample'>changed_sample</span> <span class='op'>=</span> <span class='id identifier rubyid_for_removal'>for_removal</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_entry'>current_entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'># Then, transform the index accordingly
</span>    <span class='ivar'>@global_pos_first_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='ivar'>@global_pos_last_sample</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_global_position'>global_position</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@full_index</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>==</span> <span class='id identifier rubyid_entry'>entry</span><span class='rparen'>)</span>
            <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='id identifier rubyid_global_position'>global_position</span>
            <span class='id identifier rubyid_current_entry'>current_entry</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># speedup comparison for the rest of the filtering
</span>        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_new_index'>new_index</span> <span class='op'>=</span> <span class='id identifier rubyid_index_map'>index_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_global_pos_first_sample'>global_pos_first_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_new_index'>new_index</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_global_position'>global_position</span>
            <span class='id identifier rubyid_global_pos_last_sample'>global_pos_last_sample</span><span class='lbracket'>[</span><span class='id identifier rubyid_new_index'>new_index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_global_position'>global_position</span>
            <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_position_global'>position_global</span> <span class='op'>=</span> <span class='id identifier rubyid_global_position'>global_position</span>
            <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span> <span class='op'>=</span> <span class='id identifier rubyid_new_index'>new_index</span>
            <span class='id identifier rubyid_global_position'>global_position</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='ivar'>@stream_state</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>

    <span class='kw'>if</span> <span class='ivar'>@full_index</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_eof'>eof</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span>
    <span class='kw'>elsif</span> <span class='ivar'>@sample_index</span> <span class='op'>!=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>=</span> <span class='id identifier rubyid_seek_to_pos'>seek_to_pos</span><span class='lparen'>(</span><span class='ivar'>@sample_index</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Remove the streams, and update the global attributes
</span>    <span class='id identifier rubyid_stream_indexes'>stream_indexes</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='ivar'>@streams</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span>
        <span class='ivar'>@size</span> <span class='op'>-=</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_update_interval_lg'>update_interval_lg</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_sample_info'>sample_info</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_changed_sample'>changed_sample</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>!=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='op'>*</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='comma'>,</span> <span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_info'>sample_info</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewind-instance_method">
  
    #<strong>rewind</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rewinds the stream aligner to the position before the first sample</p>

<p>I.e. calling <span class='object_link'><a href="#next-instance_method" title="Pocolog::StreamAligner#next (method)">#next</a></span> after <span class='object_link'><a href="#rewind-instance_method" title="Pocolog::StreamAligner#rewind (method)">#rewind</a></span> would read the first sample</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rewind'>rewind</span>
    <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sample_info-instance_method">
  
    #<strong>sample_info</strong>(stream_idx)  &#x21d2; <tt>(<span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span>,Integer)</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the information necessary to read a stream&#39;s sample later</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>stream_idx, time = aligner.advance
@read_later = aligner.sample_info(stream_idx)
...
if @read_later
   stream, position = *@read_later
   stream.read_one_raw_data_sample(position)
end</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>stream_idx</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the index of the stream</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(<span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span>,Integer)</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if there is a current sample on this stream, this is the stream and the
position on the stream, suitable to be passed to
<span class='object_link'><a href="DataStream.html#read_one_raw_data_sample-instance_method" title="Pocolog::DataStream#read_one_raw_data_sample (method)">DataStream#read_one_raw_data_sample</a></span>. Otherwise, returns nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 612</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='ivar'>@stream_state</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_streams'>streams</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_position_in_stream'>position_in_stream</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seek-instance_method">
  
    
      <span class="overload">#<strong>seek</strong>(pos, read_data = true)  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>seek</strong>(time, read_data = true)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Seek at the given position or time</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_pos'>pos</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Time</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_seek_to_time'>seek_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_seek_to_pos'>seek_to_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seek_to_index_entry-instance_method">
  
    #<strong>seek_to_index_entry</strong>(entry, read_data = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>This is a private helper for <span class='object_link'><a href="#seek_to_time-instance_method" title="Pocolog::StreamAligner#seek_to_time (method)">#seek_to_time</a></span> and <span class='object_link'><a href="#seek_to_pos-instance_method" title="Pocolog::StreamAligner#seek_to_pos (method)">#seek_to_pos</a></span>. It seeks the
stream aligner to the given global sample</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>entry</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="StreamAligner/IndexEntry.html" title="Pocolog::StreamAligner::IndexEntry (class)">IndexEntry</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>index entry of the global sample we want to seek to</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 320</span>

<span class='kw'>def</span> <span class='id identifier rubyid_seek_to_index_entry'>seek_to_index_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='id identifier rubyid_size'>size</span>
        <span class='kw'>return</span>
    <span class='kw'>end</span>

    <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_position_global'>position_global</span>
    <span class='id identifier rubyid_stream_idx'>stream_idx</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_stream_number'>stream_number</span>
    <span class='ivar'>@stream_state</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_read_data'>read_data</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seek_to_pos-instance_method">
  
    #<strong>seek_to_pos</strong>(pos, read_data = true)  &#x21d2; <tt>(Integer,Time[,Typelib::Type])</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Seeks to the sample whose global position is pos</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pos</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the targetted global position</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>read_data</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether the sample itself should be read or not</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Time[,Typelib::Type])</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream index, sample time and the sample itself if read_data is true</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305
306
307
308
309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_seek_to_pos'>seek_to_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RangeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>empty stream</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='int'>0</span> <span class='op'>||</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_size'>size</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RangeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pos'>pos</span><span class='embexpr_end'>}</span><span class='tstring_content'> is out of bounds [0..</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'>].</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_seek_to_index_entry'>seek_to_index_entry</span><span class='lparen'>(</span><span class='ivar'>@full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="seek_to_time-instance_method">
  
    #<strong>seek_to_time</strong>(time, read_data = true)  &#x21d2; <tt>(Integer,Time[,Typelib::Type])</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Seek to the first sample after the given time</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the reference time</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>read_data</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether the sample itself should be read or not</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Time[,Typelib::Type])</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream index, sample time and the sample itself if read_data is true</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


285
286
287
288
289
290
291
292
293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 285</span>

<span class='kw'>def</span> <span class='id identifier rubyid_seek_to_time'>seek_to_time</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RangeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'> is out of bounds, the stream is empty</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RangeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'> is out of bounds valid interval </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_target_time'>target_time</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_to_internal'><span class='object_link'><a href="StreamIndex.html#time_to_internal-class_method" title="Pocolog::StreamIndex.time_to_internal (method)">time_to_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='ivar'>@full_index</span><span class='period'>.</span><span class='id identifier rubyid_bsearch'>bsearch</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_target_time'>target_time</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_seek_to_index_entry'>seek_to_index_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_read_data'>read_data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="single_data-instance_method">
  
    #<strong>single_data</strong>(index, sample = nil)  &#x21d2; <tt>Object</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current data sample for the given stream index note stream
index is the index of the data stream, not the search index !</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>index of the stream</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'>(<tt>Typelib::Type</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if given, the sample will be decoded in this object instead of creating a
new one</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


626
627
628
629
630</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 626</span>

<span class='kw'>def</span> <span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_sample'>sample</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_raw'>raw</span> <span class='op'>=</span> <span class='id identifier rubyid_single_raw_data'>single_raw_data</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_sample'>sample</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='const'>Typelib</span><span class='period'>.</span><span class='id identifier rubyid_to_ruby'>to_ruby</span><span class='lparen'>(</span><span class='id identifier rubyid_raw'>raw</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="single_raw_data-instance_method">
  
    #<strong>single_raw_data</strong>(index, sample = nil)  &#x21d2; <tt>Typelib::Type</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the current raw data sample for the given stream index note stream
index is the index of the data stream, not the search index !</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>index of the stream</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sample</span>
      
      
        <span class='type'>(<tt>Typelib::Type</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if given, the sample will be decoded in this object instead of creating a
new one</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Typelib::Type</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


640
641
642
643
644
645</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 640</span>

<span class='kw'>def</span> <span class='id identifier rubyid_single_raw_data'>single_raw_data</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_sample'>sample</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stream'>stream</span><span class='comma'>,</span> <span class='id identifier rubyid_position'>position</span> <span class='op'>=</span> <span class='id identifier rubyid_sample_info'>sample_info</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream'>stream</span>
        <span class='id identifier rubyid_stream'>stream</span><span class='period'>.</span><span class='id identifier rubyid_read_one_raw_data_sample'>read_one_raw_data_sample</span><span class='lparen'>(</span><span class='id identifier rubyid_position'>position</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="step-instance_method">
  
    #<strong>step</strong>  &#x21d2; <tt>(Integer,Time,Typelib::Type)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Advances one step in the joint stream, and returns the index of the updated
stream as well as the time and the data sample</p>

<p>The associated data sample can also be retrieved by single_data(stream_idx)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Time,Typelib::Type)</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#advance-instance_method" title="Pocolog::StreamAligner#advance (method)">#advance</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 385</span>

<span class='kw'>def</span> <span class='id identifier rubyid_step'>step</span>
    <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='id identifier rubyid_advance'>advance</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_stream_idx'>stream_idx</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_single_data'>single_data</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="step_back-instance_method">
  
    #<strong>step_back</strong>  &#x21d2; <tt>(Integer,Time,Typelib::Type)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Decrements one step in the joint stream, an returns the index of the
updated stream, its time as well as the sample data</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Time,Typelib::Type)</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


414
415
416
417
418
419
420
421</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 414</span>

<span class='kw'>def</span> <span class='id identifier rubyid_step_back'>step_back</span>
    <span class='kw'>if</span> <span class='ivar'>@sample_index</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='ivar'>@sample_index</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_seek_to_pos'>seek_to_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_by_index-instance_method">
  
    #<strong>stream_by_index</strong>(stream_idx)  &#x21d2; <tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the stream object at the given stream index</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>stream_idx</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DataStream.html" title="Pocolog::DataStream (class)">DataStream</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_by_index'>stream_by_index</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rparen'>)</span>
    <span class='ivar'>@streams</span><span class='lbracket'>[</span><span class='id identifier rubyid_stream_idx'>stream_idx</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_index_for_name-instance_method">
  
    #<strong>stream_index_for_name</strong>(name)  &#x21d2; <tt>Integer</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the stream index of the stream with this name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


353
354
355</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 353</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_index_for_name'>stream_index_for_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_index_for_stream-instance_method">
  
    #<strong>stream_index_for_stream</strong>(stream)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the stream index for the given stream</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_index_for_stream'>stream_index_for_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_stream'>stream</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_index_for_type-instance_method">
  
    #<strong>stream_index_for_type</strong>(type)  &#x21d2; <tt>Integer</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the stream index of the stream whose type has this name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if more than one stream has this type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369
370
371
372
373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stream_index_for_type'>stream_index_for_type</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_match_i'>match_i</span> <span class='op'>=</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_type'>type</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_match_i'>match_i</span>
        <span class='id identifier rubyid_rmatch_i'>rmatch_i</span> <span class='op'>=</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_rindex'>rindex</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='id identifier rubyid_type'>type</span> <span class='rbrace'>}</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_match_i'>match_i</span> <span class='op'>!=</span> <span class='id identifier rubyid_rmatch_i'>rmatch_i</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>There exists more than one stream with type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_match_i'>match_i</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="time-instance_method">
  
    #<strong>time</strong>  &#x21d2; <tt>Time</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the time of the last played back sample</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time'>time</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_sample_index'>sample_index</span> <span class='op'>!=</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='lbracket'>[</span><span class='id identifier rubyid_sample_index'>sample_index</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='const'><span class='object_link'><a href="StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_from_internal'><span class='object_link'><a href="StreamIndex.html#time_from_internal-class_method" title="Pocolog::StreamIndex.time_from_internal (method)">time_from_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="time_interval-instance_method">
  
    #<strong>time_interval</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time_interval'>time_interval</span>
    <span class='const'><span class='object_link'><a href="../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn_deprecated'><span class='object_link'><a href="../Pocolog.html#warn_deprecated-class_method" title="Pocolog.warn_deprecated (method)">warn_deprecated</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>StreamAligner#time_interval is deprecated in favor of #interval_lg</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_interval_lg'>interval_lg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_interval_lg-instance_method">
  
    #<strong>update_interval_lg</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Update <span class='object_link'><a href="#interval_lg-instance_method" title="Pocolog::StreamAligner#interval_lg (method)">#interval_lg</a></span> based on the information currently in <span class='object_link'><a href="#full_index-instance_method" title="Pocolog::StreamAligner#full_index (method)">#full_index</a></span></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259
260
261
262
263</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/stream_aligner.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_interval_lg'>update_interval_lg</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_full_index'>full_index</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='ivar'>@interval_lg</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
        <span class='ivar'>@interval_lg</span> <span class='op'>=</span> <span class='lbracket'>[</span>
            <span class='const'><span class='object_link'><a href="StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_from_internal'><span class='object_link'><a href="StreamIndex.html#time_from_internal-class_method" title="Pocolog::StreamIndex.time_from_internal (method)">time_from_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_full_index'>full_index</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='rparen'>)</span><span class='comma'>,</span>
            <span class='const'><span class='object_link'><a href="StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_from_internal'><span class='object_link'><a href="StreamIndex.html#time_from_internal-class_method" title="Pocolog::StreamIndex.time_from_internal (method)">time_from_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_full_index'>full_index</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='rparen'>)</span>
        <span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>