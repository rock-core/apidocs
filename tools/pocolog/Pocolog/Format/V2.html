<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Pocolog::Format::V2
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Pocolog::Format::V2";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Format.html" title="Pocolog::Format (module)">Format</a></span></span>
     &raquo; 
    <span class="title">V2</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Pocolog::Format::V2
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pocolog/format/v2.rb</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="MAGIC-constant" class="">MAGIC =
        <div class="docstring">
  <div class="discussion">
    
<p>The magic code present at the beginning of each pocolog file</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>POCOSIM</span><span class='tstring_end'>&#39;</span></span></pre></dd>
    
      <dt id="VERSION-constant" class="">VERSION =
        <div class="docstring">
  <div class="discussion">
    
<p>Format version ID. Increment this when the file format changes in a
non-backward-compatible way</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>2</span></pre></dd>
    
      <dt id="PROLOGUE_SIZE-constant" class="">PROLOGUE_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>The size of the file&#39;s prologue</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='int'>9</span></pre></dd>
    
      <dt id="INDEX_MAGIC-constant" class="">INDEX_MAGIC =
        <div class="docstring">
  <div class="discussion">
    
<p>The magic code at the beginning of a pocolog index</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>POCOSIM_INDEX</span><span class='tstring_end'>&#39;</span></span></pre></dd>
    
      <dt id="INDEX_VERSION-constant" class="">INDEX_VERSION =
        <div class="docstring">
  <div class="discussion">
    
<p>The current index version. Unlike with the format version, a changing index
version will only cause rebuilding the index</p>

<p>(i.e. this can change without changing the overall format version)</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>3</span></pre></dd>
    
      <dt id="INDEX_PROLOGUE_SIZE-constant" class="">INDEX_PROLOGUE_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>Size of the index prologue</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='int'>20</span></pre></dd>
    
      <dt id="INDEX_STREAM_DESCRIPTION_SIZE-constant" class="">INDEX_STREAM_DESCRIPTION_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>Size of a stream description in the index</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>8</span> <span class='op'>*</span> <span class='int'>8</span></pre></dd>
    
      <dt id="INDEX_STREAM_ENTRY_SIZE-constant" class="">INDEX_STREAM_ENTRY_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>Size of an entry in the index table</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>8</span> <span class='op'>*</span> <span class='int'>3</span></pre></dd>
    
      <dt id="BLOCK_HEADER_SIZE-constant" class="">BLOCK_HEADER_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>The size of the generic block header</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>8</span></pre></dd>
    
      <dt id="TIME_SIZE-constant" class="">TIME_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>The size of a time in a block header</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>8</span></pre></dd>
    
      <dt id="DATA_BLOCK_HEADER_SIZE-constant" class="">DATA_BLOCK_HEADER_SIZE =
        <div class="docstring">
  <div class="discussion">
    
<p>The size of a data header, excluding the generic block header</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='const'><span class='object_link'><a href="#TIME_SIZE-constant" title="Pocolog::Format::V2::TIME_SIZE (constant)">TIME_SIZE</a></span></span> <span class='op'>*</span> <span class='int'>2</span> <span class='op'>+</span> <span class='int'>5</span></pre></dd>
    
      <dt id="STREAM_BLOCK_DECLARATION_HEADER_SIZE_MIN-constant" class="">STREAM_BLOCK_DECLARATION_HEADER_SIZE_MIN =
        <div class="docstring">
  <div class="discussion">
    
<p>The size of a stream block declaration header</p>

<p>Stream declarations contain variable-length strings, we can only have a min</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>9</span></pre></dd>
    
  </dl>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index_contents_from_stream-class_method" title="index_contents_from_stream (class method)">.<strong>index_contents_from_stream</strong>(stream_info, index_data_pos)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Helper method that prepares index contents for a given stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index_file_valid%3F-class_method" title="index_file_valid? (class method)">.<strong>index_file_valid?</strong>(index_path, file_path)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tests whether the index whose path is given is valid for the given log
file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_index-class_method" title="read_index (class method)">.<strong>read_index</strong>(index_io, expected_file_size: nil, expected_mtime: nil)  &#x21d2; Array&lt;StreamInfo&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the information contained in a file index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_index_prologue-class_method" title="read_index_prologue (class method)">.<strong>read_index_prologue</strong>(index_io, validate_version: true, expected_mtime: nil, expected_file_size: nil)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the prologue of an index file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_index_stream_info-class_method" title="read_index_stream_info (class method)">.<strong>read_index_stream_info</strong>(index_io, expected_file_size: nil, expected_mtime: nil)  &#x21d2; Array&lt;IndexStreamInfo&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read basic stream information from an index file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_minimal_stream_info-class_method" title="read_minimal_stream_info (class method)">.<strong>read_minimal_stream_info</strong>(index_io, file_io)  &#x21d2; Array&lt;(BlockStream::StreamBlock,IndexStreamInfo)&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the stream information, but not the actual block index, from an index
file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_prologue-class_method" title="read_prologue (class method)">.<strong>read_prologue</strong>(io, validate_version: true)  &#x21d2; (Integer,Boolean) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read a file&#39;s prologue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rebuild_index_file-class_method" title="rebuild_index_file (class method)">.<strong>rebuild_index_file</strong>(io, index_path)  &#x21d2; Array&lt;StreamInfo,nil&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rebuild a pocolog file&#39;s index and saves it to file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid_file%3F-class_method" title="valid_file? (class method)">.<strong>valid_file?</strong>(file)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_version-class_method" title="validate_version (class method)">.<strong>validate_version</strong>(version)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Verify that the given version is compatible with this format version.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_index-class_method" title="write_index (class method)">.<strong>write_index</strong>(index_io, file_io, streams, version: INDEX_VERSION)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write an index file for a given file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_index_prologue-class_method" title="write_index_prologue (class method)">.<strong>write_index_prologue</strong>(index_io, size, mtime, version: INDEX_VERSION)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write a prologue on an index file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_prologue-class_method" title="write_prologue (class method)">.<strong>write_prologue</strong>(io, big_endian = Pocolog.big_endian?)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Write a v2 file prologue.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#declaration_pos-instance_method" title="#declaration_pos (instance method)">#<strong>declaration_pos</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The position in the pocolog file of the stream declaration block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index_pos-instance_method" title="#index_pos (instance method)">#<strong>index_pos</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The position in the index file of the stream index data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_size-instance_method" title="#stream_size (instance method)">#<strong>stream_size</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The number of samples in the stream.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="index_contents_from_stream-class_method">
  
    .<strong>index_contents_from_stream</strong>(stream_info, index_data_pos)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Helper method that prepares index contents for a given stream</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


359
360
361
362
363
364
365
366
367
368
369
370
371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 359</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_index_contents_from_stream'>index_contents_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_info'>stream_info</span><span class='comma'>,</span> <span class='id identifier rubyid_index_data_pos'>index_data_pos</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_interval_rt'>interval_rt</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_interval_rt'>interval_rt</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_interval_lg'>interval_lg</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
    <span class='id identifier rubyid_base_time'>base_time</span>   <span class='op'>=</span> <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_base_time'>base_time</span>
    <span class='id identifier rubyid_index_stream_info'>index_stream_info</span> <span class='op'>=</span> <span class='lbracket'>[</span>
        <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_declaration_blocks'>declaration_blocks</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span>
        <span class='id identifier rubyid_index_data_pos'>index_data_pos</span><span class='comma'>,</span>
        <span class='id identifier rubyid_base_time'>base_time</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span>
        <span class='id identifier rubyid_interval_rt'>interval_rt</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_rt'>interval_rt</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span>
        <span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_lg'>interval_lg</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>0</span>
    <span class='rbracket'>]</span>

    <span class='lbracket'>[</span><span class='id identifier rubyid_index_stream_info'>index_stream_info</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_info'>stream_info</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='period'>.</span><span class='id identifier rubyid_index_map'>index_map</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="index_file_valid?-class_method">
  
    .<strong>index_file_valid?</strong>(index_path, file_path)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tests whether the index whose path is given is valid for the given log file</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 209</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_index_file_valid?'>index_file_valid?</span><span class='lparen'>(</span><span class='id identifier rubyid_index_path'>index_path</span><span class='comma'>,</span> <span class='id identifier rubyid_file_path'>file_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_stat'>stat</span> <span class='op'>=</span> <span class='id identifier rubyid_file_path'>file_path</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span>
    <span class='kw'>begin</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_index_path'>index_path</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index_io'>index_io</span><span class='op'>|</span>
            <span class='id identifier rubyid_read_index_stream_info'>read_index_stream_info</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='label'>expected_file_size:</span> <span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='kw'>true</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
        <span class='kw'>false</span>
    <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span>
    <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_index-class_method">
  
    .<strong>read_index</strong>(index_io, expected_file_size: nil, expected_mtime: nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the information contained in a file index</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the information contained in the index file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 168</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read_index'>read_index</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='label'>expected_file_size:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expected_mtime:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_minimal_stream_info'>minimal_stream_info</span> <span class='op'>=</span> <span class='id identifier rubyid_read_index_stream_info'>read_index_stream_info</span><span class='lparen'>(</span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span>
        <span class='label'>expected_file_size:</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span><span class='comma'>,</span>
        <span class='label'>expected_mtime:</span> <span class='id identifier rubyid_expected_mtime'>expected_mtime</span>
    <span class='rparen'>)</span>

    <span class='id identifier rubyid_minimal_stream_info'>minimal_stream_info</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_stream_size'>stream_size</span> <span class='op'>*</span> <span class='const'><span class='object_link'><a href="#INDEX_STREAM_ENTRY_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_ENTRY_SIZE (constant)">INDEX_STREAM_ENTRY_SIZE</a></span></span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_index_pos'>index_pos</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_index_data'>index_data</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_index_size'>index_size</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_index_data'>index_data</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>!=</span> <span class='id identifier rubyid_index_size'>index_size</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not enough or too much data in index</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_index_data'>index_data</span> <span class='op'>=</span> <span class='id identifier rubyid_index_data'>index_data</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                               <span class='period'>.</span><span class='id identifier rubyid_each_slice'>each_slice</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
        <span class='const'><span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_raw_data'><span class='object_link'><a href="../StreamInfo.html#from_raw_data-class_method" title="Pocolog::StreamInfo.from_raw_data (method)">from_raw_data</a></span></span><span class='lparen'>(</span>
            <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_declaration_pos'>declaration_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_interval_rt'>interval_rt</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_base_time'>base_time</span><span class='comma'>,</span>
            <span class='id identifier rubyid_index_data'>index_data</span>
        <span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_index_prologue-class_method">
  
    .<strong>read_index_prologue</strong>(index_io, validate_version: true, expected_mtime: nil, expected_file_size: nil)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the prologue of an index file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>validate_version</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if true, the method will raise if the file version does not match
<span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the index file version</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 104</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read_index_prologue'>read_index_prologue</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='label'>validate_version:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>expected_mtime:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expected_file_size:</span> <span class='kw'>nil</span>
<span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="#INDEX_PROLOGUE_SIZE-constant" title="Pocolog::Format::V2::INDEX_PROLOGUE_SIZE (constant)">INDEX_PROLOGUE_SIZE</a></span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index file too small to contain a valid index</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='int'>4</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_magic'>magic</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_magic'>magic</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span>
        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_magic'>magic</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wrong index magic in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>probably an old index</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>else</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is empty</span><span class='tstring_end'>&quot;</span></span>
            <span class='kw'>end</span>

        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../MissingIndexPrologue.html" title="Pocolog::MissingIndexPrologue (class)">MissingIndexPrologue</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_index_version'>index_version</span> <span class='op'>=</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_validate_version'>validate_version</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_index_version'>index_version</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ObsoleteIndexVersion.html" title="Pocolog::ObsoleteIndexVersion (class)">ObsoleteIndexVersion</a></span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>old format </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_version'>index_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current format is </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_index_version'>index_version</span> <span class='op'>&gt;</span> <span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>old format </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_version'>index_version</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>\
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>current format is </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_index_size'>index_size</span><span class='comma'>,</span> <span class='id identifier rubyid_index_mtime'>index_mtime</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;Q&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span> <span class='op'>!=</span> <span class='id identifier rubyid_index_size'>index_size</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file size in index (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_size'>index_size</span><span class='embexpr_end'>}</span><span class='tstring_content'>) and actual file </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>size (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_file_size'>expected_file_size</span><span class='embexpr_end'>}</span><span class='tstring_content'>) mismatch</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_expected_mtime'>expected_mtime</span>
        <span class='id identifier rubyid_expected_mtime_i'>expected_mtime_i</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_to_internal'><span class='object_link'><a href="../StreamIndex.html#time_to_internal-class_method" title="Pocolog::StreamIndex.time_to_internal (method)">time_to_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_expected_mtime'>expected_mtime</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_expected_mtime_i'>expected_mtime_i</span> <span class='op'>!=</span> <span class='id identifier rubyid_index_mtime'>index_mtime</span>
            <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mtime in index (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_mtime'>index_mtime</span><span class='embexpr_end'>}</span><span class='tstring_content'>) and actual mtime </span><span class='tstring_end'>&quot;</span></span>\
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_mtime_i'>expected_mtime_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>) mismatch</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_index_version'>index_version</span><span class='comma'>,</span> <span class='id identifier rubyid_index_size'>index_size</span><span class='comma'>,</span>
     <span class='const'><span class='object_link'><a href="../StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_from_internal'><span class='object_link'><a href="../StreamIndex.html#time_from_internal-class_method" title="Pocolog::StreamIndex.time_from_internal (method)">time_from_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_index_mtime'>index_mtime</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_index_stream_info-class_method">
  
    .<strong>read_index_stream_info</strong>(index_io, expected_file_size: nil, expected_mtime: nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read basic stream information from an index file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>index_io</span>
      
      
        <span class='type'>(<tt>IO</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the index IO</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the information contained in the index file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 228</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read_index_stream_info'>read_index_stream_info</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span>
                                <span class='label'>expected_file_size:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                                <span class='label'>expected_mtime:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_read_index_prologue'>read_index_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span>
                        <span class='label'>validate_version:</span> <span class='kw'>true</span><span class='comma'>,</span>
                        <span class='label'>expected_mtime:</span> <span class='id identifier rubyid_expected_mtime'>expected_mtime</span><span class='comma'>,</span>
                        <span class='label'>expected_file_size:</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="#INDEX_PROLOGUE_SIZE-constant" title="Pocolog::Format::V2::INDEX_PROLOGUE_SIZE (constant)">INDEX_PROLOGUE_SIZE</a></span></span> <span class='op'>+</span> <span class='int'>8</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index file too small</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_stream_count'>stream_count</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='int'>8</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_minimum_index_size'>minimum_index_size</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#INDEX_PROLOGUE_SIZE-constant" title="Pocolog::Format::V2::INDEX_PROLOGUE_SIZE (constant)">INDEX_PROLOGUE_SIZE</a></span></span> <span class='op'>+</span> <span class='int'>8</span> <span class='op'>+</span>
                         <span class='const'><span class='object_link'><a href="#INDEX_STREAM_DESCRIPTION_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_DESCRIPTION_SIZE (constant)">INDEX_STREAM_DESCRIPTION_SIZE</a></span></span> <span class='op'>*</span> <span class='id identifier rubyid_stream_count'>stream_count</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_minimum_index_size'>minimum_index_size</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index file too small</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_expected_file_size'>expected_file_size</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_streams'>streams</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_stream_count'>stream_count</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#INDEX_STREAM_DESCRIPTION_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_DESCRIPTION_SIZE (constant)">INDEX_STREAM_DESCRIPTION_SIZE</a></span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='comment'># This is (declaration_pos, index_pos, stream_size)
</span>        <span class='id identifier rubyid_declaration_pos'>declaration_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_index_pos'>index_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_size'>stream_size</span><span class='comma'>,</span>
            <span class='id identifier rubyid_interval_rt_min'>interval_rt_min</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_rt_max'>interval_rt_max</span><span class='comma'>,</span>
            <span class='id identifier rubyid_interval_lg_min'>interval_lg_min</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_lg_max'>interval_lg_max</span> <span class='op'>=</span> <span class='op'>*</span><span class='id identifier rubyid_values'>values</span>

        <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_size'>stream_size</span> <span class='op'>*</span> <span class='const'><span class='object_link'><a href="#INDEX_STREAM_ENTRY_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_ENTRY_SIZE (constant)">INDEX_STREAM_ENTRY_SIZE</a></span></span>
        <span class='id identifier rubyid_expected_file_size'>expected_file_size</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_index_size'>index_size</span> <span class='op'>+</span> <span class='id identifier rubyid_index_pos'>index_pos</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_stream_size'>stream_size</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='id identifier rubyid_base_time'>base_time</span> <span class='op'>=</span> <span class='kw'>nil</span>
            <span class='id identifier rubyid_interval_rt'>interval_rt</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_interval_lg'>interval_lg</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_interval_rt'>interval_rt</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_interval_rt_min'>interval_rt_min</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_rt_max'>interval_rt_max</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_interval_lg'>interval_lg</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_interval_lg_min'>interval_lg_min</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_lg_max'>interval_lg_max</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_streams'>streams</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
            <span class='id identifier rubyid_declaration_pos'>declaration_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_index_pos'>index_pos</span><span class='comma'>,</span> <span class='id identifier rubyid_base_time'>base_time</span><span class='comma'>,</span>
            <span class='id identifier rubyid_stream_size'>stream_size</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_rt'>interval_rt</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_lg'>interval_lg</span>
        <span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_expected_file_size'>expected_file_size</span> <span class='op'>=</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>!=</span> <span class='id identifier rubyid_expected_file_size'>expected_file_size</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidIndex.html" title="Pocolog::InvalidIndex (class)">InvalidIndex</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>index file should be of size </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_expected_file_size'>expected_file_size</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>but is of size </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_streams'>streams</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_minimal_stream_info-class_method">
  
    .<strong>read_minimal_stream_info</strong>(index_io, file_io)  &#x21d2; <tt>Array&lt;(<span class='object_link'><a href="../BlockStream/StreamBlock.html" title="Pocolog::BlockStream::StreamBlock (class)">BlockStream::StreamBlock</a></span>,<span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span>)&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the stream information, but not the actual block index, from an index
file</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;(<span class='object_link'><a href="../BlockStream/StreamBlock.html" title="Pocolog::BlockStream::StreamBlock (class)">BlockStream::StreamBlock</a></span>,<span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span>)&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 289</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read_minimal_stream_info'>read_minimal_stream_info</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_index_stream_info'>index_stream_info</span> <span class='op'>=</span> <span class='id identifier rubyid_read_index_stream_info'>read_index_stream_info</span><span class='lparen'>(</span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span>
        <span class='label'>expected_file_size:</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='rparen'>)</span>

    <span class='id identifier rubyid_index_stream_info'>index_stream_info</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_info'>info</span><span class='op'>|</span>
        <span class='id identifier rubyid_file_io'>file_io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_declaration_pos'>declaration_pos</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_block_stream'>block_stream</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../BlockStream.html" title="Pocolog::BlockStream (class)">BlockStream</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../BlockStream.html#initialize-instance_method" title="Pocolog::BlockStream#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_file_io'>file_io</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_block_stream'>block_stream</span><span class='period'>.</span><span class='id identifier rubyid_read_next_block_header'>read_next_block_header</span>
        <span class='id identifier rubyid_stream_block'>stream_block</span> <span class='op'>=</span> <span class='id identifier rubyid_block_stream'>block_stream</span><span class='period'>.</span><span class='id identifier rubyid_read_stream_block'>read_stream_block</span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_stream_block'>stream_block</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_prologue-class_method">
  
    .<strong>read_prologue</strong>(io, validate_version: true)  &#x21d2; <tt>(Integer,Boolean)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read a file&#39;s prologue</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>io</span>
      
      
        <span class='type'>(<tt>IO</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the file from which to read the prologue</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>validate_version</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if true, the method will raise if the file version does not match
<span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Boolean)</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the file format version and a flag that tells whether the file&#39;s data
is encoded as big or little endian</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 48</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_read_prologue'>read_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='label'>validate_version:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_header'>header</span> <span class='op'>=</span> <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#PROLOGUE_SIZE-constant" title="Pocolog::Format::V2::PROLOGUE_SIZE (constant)">PROLOGUE_SIZE</a></span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_header'>header</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="#PROLOGUE_SIZE-constant" title="Pocolog::Format::V2::PROLOGUE_SIZE (constant)">PROLOGUE_SIZE</a></span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../MissingPrologue.html" title="Pocolog::MissingPrologue (class)">MissingPrologue</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> too small</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_magic'>magic</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_magic'>magic</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../MissingPrologue.html" title="Pocolog::MissingPrologue (class)">MissingPrologue</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a pocolog log file. </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Got </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_magic'>magic</span><span class='embexpr_end'>}</span><span class='tstring_content'> at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span><span class='embexpr_end'>}</span><span class='tstring_content'>, but was expecting </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_format_version'>format_version</span><span class='comma'>,</span> <span class='id identifier rubyid_big_endian'>big_endian</span> <span class='op'>=</span> <span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='int'>9</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xVV</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_validate_version'>validate_version</span><span class='lparen'>(</span><span class='id identifier rubyid_format_version'>format_version</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_validate_version'>validate_version</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_format_version'>format_version</span><span class='comma'>,</span> <span class='id identifier rubyid_big_endian'>big_endian</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rebuild_index_file-class_method">
  
    .<strong>rebuild_index_file</strong>(io, index_path)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span>,nil&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rebuild a pocolog file&#39;s index and saves it to file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>io</span>
      
      
        <span class='type'>(<tt>File</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the pocolog file IO</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>index_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the path into which the index should be saved</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span>,nil&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 310</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_rebuild_index_file'>rebuild_index_file</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_index_path'>index_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_block_stream'>block_stream</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../BlockStream.html" title="Pocolog::BlockStream (class)">BlockStream</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../BlockStream.html#initialize-instance_method" title="Pocolog::BlockStream#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_block_stream'>block_stream</span><span class='period'>.</span><span class='id identifier rubyid_read_prologue'>read_prologue</span>
    <span class='id identifier rubyid_stream_info'>stream_info</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_file_index_builder'><span class='object_link'><a href="../../Pocolog.html#file_index_builder-class_method" title="Pocolog.file_index_builder (method)">file_index_builder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_block_stream'>block_stream</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../../FileUtils.html" title="FileUtils (module)">FileUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_index_path'>index_path</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_index_path'>index_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index_io'>index_io</span><span class='op'>|</span>
        <span class='id identifier rubyid_write_index'>write_index</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_stream_info'>stream_info</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_stream_info'>stream_info</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid_file?-class_method">
  
    .<strong>valid_file?</strong>(file)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 84</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_valid_file?'>valid_file?</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_io'>io</span><span class='op'>|</span>
        <span class='id identifier rubyid_read_prologue'>read_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='rparen'>)</span>
        <span class='kw'>true</span>
    <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../InvalidFile.html" title="Pocolog::InvalidFile (class)">InvalidFile</a></span></span>
    <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_version-class_method">
  
    .<strong>validate_version</strong>(version)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Verify that the given version is compatible with this format version</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>ObsoleteVersion if the version is older than <span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span> and cannot be loaded
by this code</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>InvalidFile if the version is newer than <span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 71</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate_version'>validate_version</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../ObsoleteVersion.html" title="Pocolog::ObsoleteVersion (class)">ObsoleteVersion</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>old format </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'>, current format </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>is </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>. Convert it using the </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--to-new-format of pocolog</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>&gt;</span> <span class='const'><span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../InvalidFile.html" title="Pocolog::InvalidFile (class)">InvalidFile</a></span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>this file is in v</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'> which is </span><span class='tstring_end'>&quot;</span></span>\
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>newer that the one we know </span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>. Update pocolog</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_index-class_method">
  
    .<strong>write_index</strong>(index_io, file_io, streams, version: INDEX_VERSION)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write an index file for a given file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file_io</span>
      
      
        <span class='type'>(<tt>File</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the file that is being indexed. It cannot be a IOSequence</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>index_io</span>
      
      
        <span class='type'>(<tt>File</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the file into which the index should be written</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>streams</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../StreamInfo.html" title="Pocolog::StreamInfo (class)">StreamInfo</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stream information that should be stored</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 329</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_index'>write_index</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='comma'>,</span> <span class='id identifier rubyid_streams'>streams</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>attempting to overwrite the file by its index</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_write_index_prologue'>write_index_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='id identifier rubyid_file_io'>file_io</span><span class='period'>.</span><span class='id identifier rubyid_stat'>stat</span><span class='period'>.</span><span class='id identifier rubyid_mtime'>mtime</span><span class='comma'>,</span>
                         <span class='label'>version:</span> <span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_index_list_pos'>index_list_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_tell'>tell</span>
    <span class='id identifier rubyid_index_data_pos'>index_data_pos</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#INDEX_STREAM_DESCRIPTION_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_DESCRIPTION_SIZE (constant)">INDEX_STREAM_DESCRIPTION_SIZE</a></span></span> <span class='op'>*</span> <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span>
                     <span class='id identifier rubyid_index_list_pos'>index_list_pos</span>

    <span class='id identifier rubyid_streams'>streams</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_stream_info'>stream_info</span><span class='op'>|</span>
        <span class='id identifier rubyid_index_stream_info'>index_stream_info</span><span class='comma'>,</span> <span class='id identifier rubyid_index_data'>index_data</span> <span class='op'>=</span>
            <span class='id identifier rubyid_index_contents_from_stream'>index_contents_from_stream</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_info'>stream_info</span><span class='comma'>,</span> <span class='id identifier rubyid_index_data_pos'>index_data_pos</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_index_list_pos'>index_list_pos</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_index_stream_info'>index_stream_info</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_seek'>seek</span><span class='lparen'>(</span><span class='id identifier rubyid_index_data_pos'>index_data_pos</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_index_data'>index_data</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Q&gt;*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_index_list_pos'>index_list_pos</span> <span class='op'>+=</span> <span class='const'><span class='object_link'><a href="#INDEX_STREAM_DESCRIPTION_SIZE-constant" title="Pocolog::Format::V2::INDEX_STREAM_DESCRIPTION_SIZE (constant)">INDEX_STREAM_DESCRIPTION_SIZE</a></span></span>
        <span class='id identifier rubyid_index_data_pos'>index_data_pos</span> <span class='op'>+=</span> <span class='id identifier rubyid_index_data'>index_data</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>*</span> <span class='int'>8</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_index_prologue-class_method">
  
    .<strong>write_index_prologue</strong>(index_io, size, mtime, version: INDEX_VERSION)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write a prologue on an index file</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 158</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_index_prologue'>write_index_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_index_io'>index_io</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='id identifier rubyid_mtime'>mtime</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='const'><span class='object_link'><a href="#INDEX_VERSION-constant" title="Pocolog::Format::V2::INDEX_VERSION (constant)">INDEX_VERSION</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#INDEX_MAGIC-constant" title="Pocolog::Format::V2::INDEX_MAGIC (constant)">INDEX_MAGIC</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_version'>version</span><span class='comma'>,</span> <span class='id identifier rubyid_size'>size</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../StreamIndex.html" title="Pocolog::StreamIndex (class)">StreamIndex</a></span></span><span class='period'>.</span><span class='id identifier rubyid_time_to_internal'><span class='object_link'><a href="../StreamIndex.html#time_to_internal-class_method" title="Pocolog::StreamIndex.time_to_internal (method)">time_to_internal</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_mtime'>mtime</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_index_io'>index_io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>L&gt;Q&gt;Q&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_prologue-class_method">
  
    .<strong>write_prologue</strong>(io, big_endian = Pocolog.big_endian?)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Write a v2 file prologue</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 94</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_prologue'>write_prologue</span><span class='lparen'>(</span><span class='id identifier rubyid_io'>io</span><span class='comma'>,</span> <span class='id identifier rubyid_big_endian'>big_endian</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Pocolog.html" title="Pocolog (module)">Pocolog</a></span></span><span class='period'>.</span><span class='id identifier rubyid_big_endian?'><span class='object_link'><a href="../../Pocolog.html#big_endian%3F-class_method" title="Pocolog.big_endian? (method)">big_endian?</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#MAGIC-constant" title="Pocolog::Format::V2::MAGIC (constant)">MAGIC</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_io'>io</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='op'>*</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="#VERSION-constant" title="Pocolog::Format::V2::VERSION (constant)">VERSION</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_big_endian'>big_endian</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>xVV</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="declaration_pos-instance_method">
  
    #<strong>declaration_pos</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the position in the pocolog file of the stream declaration block</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the position in the pocolog file of the stream declaration block</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 202</span>

<span class='const'><span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span></span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='symbol'>:declaration_pos</span><span class='comma'>,</span> <span class='symbol'>:index_pos</span><span class='comma'>,</span> <span class='symbol'>:base_time</span><span class='comma'>,</span> <span class='symbol'>:stream_size</span><span class='comma'>,</span>
    <span class='symbol'>:interval_rt</span><span class='comma'>,</span> <span class='symbol'>:interval_lg</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="index_pos-instance_method">
  
    #<strong>index_pos</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the position in the index file of the stream index data</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the position in the index file of the stream index data</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 202</span>

<span class='const'><span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span></span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='symbol'>:declaration_pos</span><span class='comma'>,</span> <span class='symbol'>:index_pos</span><span class='comma'>,</span> <span class='symbol'>:base_time</span><span class='comma'>,</span> <span class='symbol'>:stream_size</span><span class='comma'>,</span>
    <span class='symbol'>:interval_rt</span><span class='comma'>,</span> <span class='symbol'>:interval_lg</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stream_size-instance_method">
  
    #<strong>stream_size</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of samples in the stream</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the number of samples in the stream</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pocolog/format/v2.rb', line 202</span>

<span class='const'><span class='object_link'><a href="V2/IndexStreamInfo.html" title="Pocolog::Format::V2::IndexStreamInfo (class)">IndexStreamInfo</a></span></span> <span class='op'>=</span> <span class='const'>Struct</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='symbol'>:declaration_pos</span><span class='comma'>,</span> <span class='symbol'>:index_pos</span><span class='comma'>,</span> <span class='symbol'>:base_time</span><span class='comma'>,</span> <span class='symbol'>:stream_size</span><span class='comma'>,</span>
    <span class='symbol'>:interval_rt</span><span class='comma'>,</span> <span class='symbol'>:interval_lg</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>